---
title: type-extensions.stx
hide:
  - toc
---

# `type-extensions.stx`

:simple-github: [pdmosses/webdsl-statix/webdslstatix/trans/static-semantics/types/type-extensions.stx]

[pdmosses/webdsl-statix/webdslstatix/trans/static-semantics/types/type-extensions.stx]: https://github.com/pdmosses/webdsl-statix/blob/master/webdslstatix/trans/static-semantics/types/type-extensions.stx "The source file on GitHub"

<div class="stx"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
</pre></div></td>
<td class="code"><pre><code><span class="keyword">module</span> <a href="../../webdsl-types.stx/#static-semantics/types/type-extensions_7_3" id="static-semantics/types/type-extensions_1_8" title="a definition with a single reference"><span class="token sort_Id">static-semantics/types/type-extensions</span></a>

<span class="keyword">imports</span>
  <a href="../../actions/functions.stx/#static-semantics/actions/functions_1_8" id="static-semantics/actions/functions_4_3" title="a reference to a single-file definition"><span class="token sort_Id">static-semantics/actions/functions</span></a>

  <a href="../built-ins.stx/#static-semantics/types/built-ins_1_8" id="static-semantics/types/built-ins_6_3" title="a reference to a single-file definition"><span class="token sort_Id">static-semantics/types/built-ins</span></a>

  <a href="../../webdsl-entities.stx/#static-semantics/webdsl-entities_1_8" id="static-semantics/webdsl-entities_8_3" title="a reference to a single-file definition"><span class="token sort_Id">static-semantics/webdsl-entities</span></a>
  <a href="../../webdsl-native.stx/#static-semantics/webdsl-native_1_8" id="static-semantics/webdsl-native_9_3" title="a reference to a single-file definition"><span class="token sort_Id">static-semantics/webdsl-native</span></a>
  <a href="../../webdsl-types.stx/#static-semantics/webdsl-types_1_8" id="static-semantics/webdsl-types_10_3" title="a reference to a single-file definition"><span class="token sort_Id">static-semantics/webdsl-types</span></a>
  <a href="../../webdsl.stx/#static-semantics/webdsl_1_8" id="static-semantics/webdsl_11_3" title="a reference to a single-file definition"><span class="token sort_Id">static-semantics/webdsl</span></a>

<span class="keyword">rules</span>

  <a href="../../webdsl.stx/#defOk_356_3" id="defOk_15_3" title="a reference to a single-file definition"><span class="token sort_Id">defOk</span></a><span class="operator">(</span><span class="cons_Var"><button class="modal-open" id="s_15_9" title="a definition with multiple references" data-urls="#s line 16_17, 17_31, 18_24, 19_37, 20_20"><span class="token sort_Id">s</span></button></span><span class="operator">,</span> <span class="cons_Op"><a href="../../../../src-gen/statix/signatures/WebDSL-Type-sig.stx/#TypeDef_21_5" id="TypeDef_15_12" title="a reference to a single-file definition"><span class="token sort_Id">TypeDef</span></a><span class="operator">(</span><span class="cons_Var"><button class="modal-open" id="name_15_20" title="a definition with multiple references" data-urls="#name line 16_20, 16_41, 16_66, 18_27, 19_40"><span class="token sort_Id">name</span></button></span><span class="operator">,</span> <span class="cons_Var"><a href="#defs_20_31" id="defs_15_26" title="a definition with a single reference"><span class="token sort_Id">defs</span></a></span><span class="operator">)</span></span><span class="operator">)</span> <span class="operator">:-</span> <span class="operator">{</span><span class="cons_Var"><button class="modal-open" id="s_type_15_37" title="a definition with multiple references" data-urls="#s_type line 17_9, 17_17, 18_33, 19_47, 20_23"><span class="token sort_Id">s_type</span></button></span><span class="operator">}</span>
    <a href="../built-ins.stx/#builtInType_34_3" id="builtInType_16_5" title="a reference to a single-file definition"><span class="token sort_Id">builtInType</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_15_9" id="s_16_17" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#name_15_20" id="name_16_20" title="a reference to a single-file definition"><span class="token sort_Id">name</span></a></span><span class="operator">)</span> <span class="operator">==</span> <span class="cons_Op"><a href="../../webdsl-types.stx/#BUILTINTYPE_40_5" id="BUILTINTYPE_16_29" title="a reference to a single-file definition"><span class="token sort_Id">BUILTINTYPE</span></a><span class="operator">(</span><span class="cons_Var"><a href="#name_15_20" id="name_16_41" title="a reference to a single-file definition"><span class="token sort_Id">name</span></a></span><span class="operator">,</span> <span class="operator">_)</span></span> <span class="operator">|</span> <span class="keyword">error</span> <span class="operator">$[</span><span class="cons_Text">Type </span><span class="operator">[</span><span class="cons_Var"><a href="#name_15_20" id="name_16_66" title="a reference to a single-file definition"><span class="token sort_Id">name</span></a></span><span class="operator">]</span><span class="cons_Text"> is not a built-in type</span><span class="operator">],</span>
    <span class="keyword">new</span> <span class="cons_Var"><a href="#s_type_15_37" id="s_type_17_9" title="a reference to a single-file definition"><span class="token sort_Id">s_type</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#s_type_15_37" id="s_type_17_17" title="a reference to a single-file definition"><span class="token sort_Id">s_type</span></a></span> <span class="operator">-</span><span class="cons_Label"><a href="../../webdsl.stx/#DEF_49_7" id="DEF_17_25" title="a reference to a single-file definition"><span class="token sort_Id">DEF</span></a></span><span class="operator">-&gt;</span> <span class="cons_Var"><a href="#s_15_9" id="s_17_31" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">,</span>
    <a href="../../webdsl.stx/#declareExtendScope_133_3" id="declareExtendScope_18_5" title="a reference to a single-file definition"><span class="token sort_Id">declareExtendScope</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_15_9" id="s_18_24" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#name_15_20" id="name_18_27" title="a reference to a single-file definition"><span class="token sort_Id">name</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#s_type_15_37" id="s_type_18_33" title="a reference to a single-file definition"><span class="token sort_Id">s_type</span></a></span><span class="operator">),</span> <span class="layout">// declare s_type to be linked to other scopes from type name</span>
    <a href="../../webdsl-entities.stx/#extendScopes_56_3" id="extendScopes_19_5" title="a reference to a single-file definition"><span class="token sort_Id">extendScopes</span></a><span class="operator">(</span><a href="../../webdsl.stx/#resolveExtendScope_137_3" id="resolveExtendScope_19_18" title="a reference to a single-file definition"><span class="token sort_Id">resolveExtendScope</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_15_9" id="s_19_37" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#name_15_20" id="name_19_40" title="a reference to a single-file definition"><span class="token sort_Id">name</span></a></span><span class="operator">),</span> <span class="cons_Var"><a href="#s_type_15_37" id="s_type_19_47" title="a reference to a single-file definition"><span class="token sort_Id">s_type</span></a></span><span class="operator">),</span>
    <a href="#typeElementsOk_22_3" id="typeElementsOk_20_5" title="a reference to a single-file definition"><span class="token sort_Id">typeElementsOk</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_15_9" id="s_20_20" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#s_type_15_37" id="s_type_20_23" title="a reference to a single-file definition"><span class="token sort_Id">s_type</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#defs_15_26" id="defs_20_31" title="a reference to a single-file definition"><span class="token sort_Id">defs</span></a></span><span class="operator">).</span>

  <a href="#typeElementsOk_20_5" id="typeElementsOk_22_3" title="a definition with a single reference"><span class="token sort_Id">typeElementsOk</span></a> <span class="keyword">maps</span> <a href="#typeElementOk_23_3" id="typeElementOk_22_23" title="a reference to a single-file definition"><span class="token sort_Id">typeElementOk</span></a><span class="operator">(*,</span> <span class="operator">*,</span> <span class="keyword">list</span><span class="operator">(*))</span>
  <button class="modal-open" id="typeElementOk_23_3" title="a definition with multiple references" data-urls="#typeElementOk line 22_23, 24_3, 27_3"><span class="token sort_Id">typeElementOk</span></button> <span class="operator">:</span> <span class="cons_ScopeSort"><span class="keyword">scope</span></span> <span class="operator">*</span> <span class="cons_ScopeSort"><span class="keyword">scope</span></span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="../../../../src-gen/statix/signatures/WebDSL-Type-sig.stx/#TypeElement_13_5" id="TypeElement_23_35" title="a reference to a single-file definition"><span class="token sort_Id">TypeElement</span></a></span>
  <a href="#typeElementOk_23_3" id="typeElementOk_24_3" title="a reference to a single-file definition"><span class="token sort_Id">typeElementOk</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_25_27" id="s_24_17" title="a definition with a single reference"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#s_type_25_30" id="s_type_24_20" title="a definition with a single reference"><span class="token sort_Id">s_type</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../../../../src-gen/statix/signatures/WebDSL-Type-sig.stx/#TypeFunction_23_5" id="TypeFunction_24_28" title="a reference to a single-file definition"><span class="token sort_Id">TypeFunction</span></a><span class="operator">(</span><span class="cons_Var"><a href="#function_25_38" id="function_24_41" title="a definition with a single reference"><span class="token sort_Id">function</span></a></span><span class="operator">)</span></span><span class="operator">)</span> <span class="operator">:-</span>
    <a href="../../webdsl-native.stx/#nativeClassFunctionOk_83_3" id="nativeClassFunctionOk_25_5" title="a reference to a single-file definition"><span class="token sort_Id">nativeClassFunctionOk</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_24_17" id="s_25_27" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#s_type_24_20" id="s_type_25_30" title="a reference to a single-file definition"><span class="token sort_Id">s_type</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#function_24_41" id="function_25_38" title="a reference to a single-file definition"><span class="token sort_Id">function</span></a></span><span class="operator">).</span>

  <a href="#typeElementOk_23_3" id="typeElementOk_27_3" title="a reference to a single-file definition"><span class="token sort_Id">typeElementOk</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_28_27" id="s_27_17" title="a definition with a single reference"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#s_type_28_30" id="s_type_27_20" title="a definition with a single reference"><span class="token sort_Id">s_type</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../../../../src-gen/statix/signatures/WebDSL-Type-sig.stx/#TypeFunctionFromStatic_24_5" id="TypeFunctionFromStatic_27_28" title="a reference to a single-file definition"><span class="token sort_Id">TypeFunctionFromStatic</span></a><span class="operator">(</span><span class="cons_Op"><a href="../../../../src-gen/statix/signatures/WebDSL-Native-sig.stx/#NCFunctionFromStatic_46_5" id="NCFunctionFromStatic_27_51" title="a reference to a single-file definition"><span class="token sort_Id">NCFunctionFromStatic</span></a><span class="operator">(_,</span> <span class="cons_Var"><a href="#function_28_38" id="function_27_75" title="a definition with a single reference"><span class="token sort_Id">function</span></a></span><span class="operator">)</span></span><span class="operator">)</span></span><span class="operator">)</span> <span class="operator">:-</span>
    <a href="../../webdsl-native.stx/#nativeClassFunctionOk_83_3" id="nativeClassFunctionOk_28_5" title="a reference to a single-file definition"><span class="token sort_Id">nativeClassFunctionOk</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_27_17" id="s_28_27" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#s_type_27_20" id="s_type_28_30" title="a reference to a single-file definition"><span class="token sort_Id">s_type</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#function_27_75" id="function_28_38" title="a reference to a single-file definition"><span class="token sort_Id">function</span></a></span><span class="operator">).</span>

<span class="keyword">rules</span> <span class="layout">// typing of expressions</span>

  <a href="../../actions/functions.stx/#typeOfCall_41_3" id="typeOfCall_32_3" title="a reference to a single-file definition"><span class="token sort_Id">typeOfCall</span></a><span class="operator">(</span><span class="cons_Var">s</span><span class="operator">,</span> <span class="cons_Op"><a href="../../webdsl-types.stx/#BUILTINTYPE_40_5" id="BUILTINTYPE_32_17" title="a reference to a single-file definition"><span class="token sort_Id">BUILTINTYPE</span></a><span class="operator">(_,</span> <span class="cons_Var"><a href="#s_type_33_38" id="s_type_32_32" title="a definition with a single reference"><span class="token sort_Id">s_type</span></a></span><span class="operator">)</span></span><span class="operator">,</span> <span class="cons_Var">f</span><span class="operator">,</span> <span class="cons_Var">args</span><span class="operator">)</span> <span class="operator">=</span> <a href="../../actions/functions.stx/#typeOfFunctionCallInternal_51_3" id="typeOfFunctionCallInternal_32_52" title="a reference to a single-file definition"><span class="token sort_Id">typeOfFunctionCallInternal</span></a><span class="operator">(</span><span class="cons_Var"><span id="s_32_79" title="a definition with no references"><span class="token sort_Id">s</span></span></span><span class="operator">,</span> <span class="cons_Var"><a href="#f_33_46" id="f_32_82" title="a definition with a single reference"><span class="token sort_Id">f</span></a></span><span class="operator">,</span> <span class="cons_Var"><span id="args_32_85" title="a definition with no references"><span class="token sort_Id">args</span></span></span><span class="operator">,</span> <span class="cons_Var"><a href="#funSigs_33_5" id="funSigs_32_91" title="a definition with a single reference"><span class="token sort_Id">funSigs</span></a></span><span class="operator">)</span> <span class="operator">:-</span>
    <span class="cons_Var"><a href="#funSigs_32_91" id="funSigs_33_5" title="a reference to a single-file definition"><span class="token sort_Id">funSigs</span></a></span> <span class="operator">==</span> <a href="../../webdsl.stx/#resolveEntityFunction_234_3" id="resolveEntityFunction_33_16" title="a reference to a single-file definition"><span class="token sort_Id">resolveEntityFunction</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_type_32_32" id="s_type_33_38" title="a reference to a single-file definition"><span class="token sort_Id">s_type</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#f_32_82" id="f_33_46" title="a reference to a single-file definition"><span class="token sort_Id">f</span></a></span><span class="operator">).</span>

  <a href="../../actions/functions.stx/#typeOfCall_41_3" id="typeOfCall_35_3" title="a reference to a single-file definition"><span class="token sort_Id">typeOfCall</span></a><span class="operator">(</span><span class="cons_Var"><span id="s_35_14" title="a definition with no references"><span class="token sort_Id">s</span></span></span><span class="operator">,</span> <span class="cons_Op"><a href="../../webdsl-types.stx/#STATICBUILTINTYPE_41_5" id="STATICBUILTINTYPE_35_17" title="a reference to a single-file definition"><span class="token sort_Id">STATICBUILTINTYPE</span></a><span class="operator">(_,</span> <span class="cons_Var"><a href="#s_type_36_44" id="s_type_35_38" title="a definition with a single reference"><span class="token sort_Id">s_type</span></a></span><span class="operator">)</span></span><span class="operator">,</span> <span class="cons_Var"><a href="#f_36_52" id="f_35_47" title="a definition with a single reference"><span class="token sort_Id">f</span></a></span><span class="operator">,</span> <span class="cons_Var"><span id="args_35_50" title="a definition with no references"><span class="token sort_Id">args</span></span></span><span class="operator">)</span> <span class="operator">=</span> <a href="../../actions/functions.stx/#typeOfFunctionCallInternal_51_3" id="typeOfFunctionCallInternal_35_58" title="a reference to a single-file definition"><span class="token sort_Id">typeOfFunctionCallInternal</span></a><span class="operator">(</span><span class="cons_Var">s</span><span class="operator">,</span> <span class="cons_Var">f</span><span class="operator">,</span> <span class="cons_Var">args</span><span class="operator">,</span> <span class="cons_Var"><a href="#funSigs_36_5" id="funSigs_35_97" title="a definition with a single reference"><span class="token sort_Id">funSigs</span></a></span><span class="operator">)</span> <span class="operator">:-</span>
    <span class="cons_Var"><a href="#funSigs_35_97" id="funSigs_36_5" title="a reference to a single-file definition"><span class="token sort_Id">funSigs</span></a></span> <span class="operator">==</span> <a href="../../webdsl.stx/#resolveStaticEntityFunction_245_3" id="resolveStaticEntityFunction_36_16" title="a reference to a single-file definition"><span class="token sort_Id">resolveStaticEntityFunction</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_type_35_38" id="s_type_36_44" title="a reference to a single-file definition"><span class="token sort_Id">s_type</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#f_35_47" id="f_36_52" title="a reference to a single-file definition"><span class="token sort_Id">f</span></a></span><span class="operator">).</span>

</code></pre></td></tr></tbody></table></div>

<div id="modal">
  <div id="modal-content">
    <span id="modal-close">&times;</span>
    <h2 id="modal-h2"></h2>
    <p  id="modal-p"></p>
    <ul id="modal-ul"></ul>
  </div>
</div>
