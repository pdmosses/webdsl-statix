---
title: webdsl-search.stx
hide:
  - toc
---

# `webdsl-search.stx`

:simple-github: [pdmosses/webdsl-statix/webdslstatix/trans/static-semantics/webdsl-search.stx]

[pdmosses/webdsl-statix/webdslstatix/trans/static-semantics/webdsl-search.stx]: https://github.com/pdmosses/webdsl-statix/blob/master/webdslstatix/trans/static-semantics/webdsl-search.stx "The source file on GitHub"

<div class="stx"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
</pre></div></td>
<td class="code"><pre><code><span class="keyword">module</span> <a href="../webdsl.stx/#static-semantics/webdsl-search_518_548" id="static-semantics/webdsl-search_7_37" title="Referenced at ../webdsl.stx line 21"><span class="token sort_Id">static-semantics/webdsl-search</span></a>

<span class="keyword">imports</span>
  <a href="../types/built-ins.stx/#static-semantics/types/built-ins_7_39" id="static-semantics/types/built-ins_49_81" title="Defined at ../types/built-ins.stx line 1"><span class="token sort_Id">static-semantics/types/built-ins</span></a>

  <a href="../webdsl.stx/#static-semantics/webdsl_7_30" id="static-semantics/webdsl_85_108" title="Defined at ../webdsl.stx line 1"><span class="token sort_Id">static-semantics/webdsl</span></a>
  <a href="../webdsl-types.stx/#static-semantics/webdsl-types_7_36" id="static-semantics/webdsl-types_111_140" title="Defined at ../webdsl-types.stx line 1"><span class="token sort_Id">static-semantics/webdsl-types</span></a>

<span class="keyword">signature</span>

  <span class="keyword">relations</span>
    <span class="cons_Label"><a href="#searcher_2798_2806" id="searcher_169_177" title="Referenced at line 76, 82, 87, 105"><span class="token sort_Id">searcher</span></a></span> <span class="operator">:</span> <span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_StringSort">string</span>

<span class="keyword">rules</span> <span class="layout">// definition</span>

  <a href="../webdsl.stx/#defOk_15473_15478" id="defOk_220_225" title="Defined at ../webdsl.stx line 356"><span class="token sort_Id">defOk</span></a><span class="operator">(_,</span> <span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-Search-sig.stx/#FullTextAnalyzer_3539_3555" id="FullTextAnalyzer_229_245" title="Defined at ../../../src-gen/statix/signatures/WebDSL-Search-sig.stx line 137"><span class="token sort_Id">FullTextAnalyzer</span></a>(_, _, _)</span><span class="operator">)</span> <span class="operator">:-</span> <span class="keyword">try</span> <span class="operator">{</span> <span class="keyword">false</span> <span class="operator">}</span> <span class="operator">|</span> <span class="token sort_Id">warning</span> <span class="operator">$[</span><span class="cons_Text">This definition is not yet implemented</span><span class="operator">].</span>
  <a href="../webdsl.stx/#defOk_15473_15478" id="defOk_328_333" title="Defined at ../webdsl.stx line 356"><span class="token sort_Id">defOk</span></a><span class="operator">(_,</span> <span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-Search-sig.stx/#SearchMapping_5109_5122" id="SearchMapping_337_350" title="Defined at ../../../src-gen/statix/signatures/WebDSL-Search-sig.stx line 167"><span class="token sort_Id">SearchMapping</span></a>(_, _)</span><span class="operator">)</span> <span class="operator">:-</span> <span class="keyword">try</span> <span class="operator">{</span> <span class="keyword">false</span> <span class="operator">}</span> <span class="operator">|</span> <span class="token sort_Id">warning</span> <span class="operator">$[</span><span class="cons_Text">This definition is not yet implemented</span><span class="operator">].</span>

<span class="keyword">rules</span> <span class="layout">// search retrieval expressions</span>

  <a href="../webdsl.stx/#typeOfExp_16579_16588" id="typeOfExp_470_479" title="Defined at ../webdsl.stx line 388"><span class="token sort_Id">typeOfExp</span></a><span class="operator">(</span><span class="cons_Var"><span id="s_480_481" title="Not referenced locally, nor via imports"><span class="token sort_Id">s</span></span></span><span class="operator">,</span> <span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-Search-sig.stx/#RetrievalExp_9503_9515" id="RetrievalExp_483_495" title="Defined at ../../../src-gen/statix/signatures/WebDSL-Search-sig.stx line 254"><span class="token sort_Id">RetrievalExp</span></a><span class="operator">(</span><span class="cons_Var">exp</span>)</span><span class="operator">)</span> <span class="operator">=</span> <a href="#typeOfRetrievalExp_535_553" id="typeOfRetrievalExp_504_522" title="Defined at line 23"><span class="token sort_Id">typeOfRetrievalExp</span></a><span class="operator">(</span><span class="cons_Var">s</span><span class="operator">,</span> <span class="cons_Var"><span id="exp_526_529" title="Not referenced locally, nor via imports"><span class="token sort_Id">exp</span></span></span><span class="operator">).</span>

  <a href="#typeOfRetrievalExp_504_522" id="typeOfRetrievalExp_535_553" title="Referenced at line 21, 24, 27, 30, 35, 38, 41, 44"><span class="token sort_Id">typeOfRetrievalExp</span></a> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="../../../src-gen/statix/signatures/WebDSL-Search-sig.stx/#RetrievalExp_1123_1135" id="RetrievalExp_564_576" title="Defined at ../../../src-gen/statix/signatures/WebDSL-Search-sig.stx line 63"><span class="token sort_Id">RetrievalExp</span></a></span> <span class="operator">-&gt;</span> <span class="cons_SimpleSort"><a href="../webdsl.stx/#TYPE_669_673" id="TYPE_580_584" title="Defined at ../webdsl.stx line 29"><span class="token sort_Id">TYPE</span></a></span>
  <a href="#typeOfRetrievalExp_535_553" id="typeOfRetrievalExp_587_605" title="Defined at line 23"><span class="token sort_Id">typeOfRetrievalExp</span></a><span class="operator">(</span><span class="cons_Var">s</span><span class="operator">,</span> <span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-Search-sig.stx/#Highlight_9030_9039" id="Highlight_609_618" title="Defined at ../../../src-gen/statix/signatures/WebDSL-Search-sig.stx line 245"><span class="token sort_Id">Highlight</span></a><span class="operator">(_,</span> <span class="operator">_,</span> <span class="operator">_,</span> <span class="cons_Var"><a href="#searcherExp_694_705" id="searcherExp_628_639" title="Referenced at line 25"><span class="token sort_Id">searcherExp</span></a></span>)</span><span class="operator">)</span> <span class="operator">=</span> <a href="../types/built-ins.stx/#string_1822_1828" id="string_644_650" title="Defined at ../types/built-ins.stx line 48"><span class="keyword">string</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_678_679" id="s_651_652" title="Referenced at line 25, 25"><span class="token sort_Id">s</span></a></span><span class="operator">)</span> <span class="operator">:-</span>
    <a href="#isEntitySearcher_2500_2516" id="isEntitySearcher_661_677" title="Defined at line 69"><span class="token sort_Id">isEntitySearcher</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_651_652" id="s_678_679" title="Defined at line 24"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <a href="../webdsl.stx/#typeOfExp_16579_16588" id="typeOfExp_681_690" title="Defined at ../webdsl.stx line 388"><span class="token sort_Id">typeOfExp</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_651_652" id="s_691_692" title="Defined at line 24"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#searcherExp_628_639" id="searcherExp_694_705" title="Defined at line 24"><span class="token sort_Id">searcherExp</span></a></span><span class="operator">)).</span>

  <a href="#typeOfRetrievalExp_535_553" id="typeOfRetrievalExp_712_730" title="Defined at line 23"><span class="token sort_Id">typeOfRetrievalExp</span></a><span class="operator">(</span><span class="cons_Var">s</span><span class="operator">,</span> <span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-Search-sig.stx/#HighlightTags_9098_9111" id="HighlightTags_734_747" title="Defined at ../../../src-gen/statix/signatures/WebDSL-Search-sig.stx line 246"><span class="token sort_Id">HighlightTags</span></a><span class="operator">(_,</span> <span class="operator">_,</span> <span class="operator">_,</span> <span class="cons_Var"><a href="#searcherExp_829_840" id="searcherExp_757_768" title="Referenced at line 28"><span class="token sort_Id">searcherExp</span></a></span>, _, _)</span><span class="operator">)</span> <span class="operator">=</span> <a href="../types/built-ins.stx/#string_1822_1828" id="string_779_785" title="Defined at ../types/built-ins.stx line 48"><span class="keyword">string</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_813_814" id="s_786_787" title="Referenced at line 28, 28"><span class="token sort_Id">s</span></a></span><span class="operator">)</span> <span class="operator">:-</span>
    <a href="#isEntitySearcher_2500_2516" id="isEntitySearcher_796_812" title="Defined at line 69"><span class="token sort_Id">isEntitySearcher</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_786_787" id="s_813_814" title="Defined at line 27"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <a href="../webdsl.stx/#typeOfExp_16579_16588" id="typeOfExp_816_825" title="Defined at ../webdsl.stx line 388"><span class="token sort_Id">typeOfExp</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_786_787" id="s_826_827" title="Defined at line 27"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#searcherExp_757_768" id="searcherExp_829_840" title="Defined at line 27"><span class="token sort_Id">searcherExp</span></a></span><span class="operator">)).</span>

  <a href="#typeOfRetrievalExp_535_553" id="typeOfRetrievalExp_847_865" title="Defined at line 23"><span class="token sort_Id">typeOfRetrievalExp</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_949_950" id="s_866_867" title="Referenced at line 31, 32, 33"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-Search-sig.stx/#SearchResults_9182_9195" id="SearchResults_869_882" title="Defined at ../../../src-gen/statix/signatures/WebDSL-Search-sig.stx line 247"><span class="token sort_Id">SearchResults</span></a><span class="operator">(</span><span class="cons_Var"><a href="#exp_952_955" id="exp_883_886" title="Referenced at line 31"><span class="token sort_Id">exp</span></a></span>)</span><span class="operator">)</span> <span class="operator">=</span> <span class="cons_Op"><a href="../webdsl-types.stx/#LIST_891_895" id="LIST_891_895" title="Defined at ../webdsl-types.stx line 35"><span class="token sort_Id">LIST</span></a><span class="operator">(</span><span class="cons_Var"><a href="#t_1070_1071" id="t_896_897" title="Referenced at line 33"><span class="token sort_Id">t</span></a></span>)</span> <span class="operator">:-</span> <span class="operator">{</span> <span class="cons_Var"><a href="#searcherType_923_935" id="searcherType_904_916" title="Referenced at line 31, 32, 32, 33, 33"><span class="token sort_Id">searcherType</span></a></span> <span class="operator">}</span>
    <span class="cons_Var"><a href="#searcherType_904_916" id="searcherType_923_935" title="Defined at line 30"><span class="token sort_Id">searcherType</span></a></span> <span class="operator">==</span> <a href="../webdsl.stx/#typeOfExp_16579_16588" id="typeOfExp_939_948" title="Defined at ../webdsl.stx line 388"><span class="token sort_Id">typeOfExp</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_866_867" id="s_949_950" title="Defined at line 30"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#exp_883_886" id="exp_952_955" title="Defined at line 30"><span class="token sort_Id">exp</span></a></span><span class="operator">),</span>
    <a href="#isEntitySearcher_2500_2516" id="isEntitySearcher_962_978" title="Defined at line 69"><span class="token sort_Id">isEntitySearcher</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_866_867" id="s_979_980" title="Defined at line 30"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#searcherType_904_916" id="searcherType_982_994" title="Defined at line 30"><span class="token sort_Id">searcherType</span></a></span><span class="operator">)</span> <span class="operator">|</span> <span class="keyword">error</span> <span class="operator">$[</span><span class="cons_Text">Expression must be an entity searcher, got </span><span class="operator">[</span><span class="cons_Var"><a href="#searcherType_904_916" id="searcherType_1050_1062" title="Defined at line 30"><span class="token sort_Id">searcherType</span></a></span><span class="operator">]],</span>
    <span class="cons_Var"><a href="#t_896_897" id="t_1070_1071" title="Defined at line 30"><span class="token sort_Id">t</span></a></span> <span class="operator">==</span> <a href="#entityOfSearcher_3608_3624" id="entityOfSearcher_1075_1091" title="Defined at line 95"><span class="token sort_Id">entityOfSearcher</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_866_867" id="s_1092_1093" title="Defined at line 30"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#searcherType_904_916" id="searcherType_1095_1107" title="Defined at line 30"><span class="token sort_Id">searcherType</span></a></span><span class="operator">)</span> <span class="operator">|</span> <span class="keyword">error</span> <span class="operator">$[</span><span class="cons_Text">Cannot resolve entity of searcher with type </span><span class="operator">[</span><span class="cons_Var"><a href="#searcherType_904_916" id="searcherType_1164_1176" title="Defined at line 30"><span class="token sort_Id">searcherType</span></a></span><span class="operator">]].</span>

  <a href="#typeOfRetrievalExp_535_553" id="typeOfRetrievalExp_1183_1201" title="Defined at line 23"><span class="token sort_Id">typeOfRetrievalExp</span></a><span class="operator">(</span><span class="cons_Var">s</span><span class="operator">,</span> <span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-Search-sig.stx/#FacetResults_9222_9234" id="FacetResults_1205_1217" title="Defined at ../../../src-gen/statix/signatures/WebDSL-Search-sig.stx line 248"><span class="token sort_Id">FacetResults</span></a><span class="operator">(_,</span> <span class="cons_Var"><a href="#searcherExp_1315_1326" id="searcherExp_1221_1232" title="Referenced at line 36"><span class="token sort_Id">searcherExp</span></a></span>)</span><span class="operator">)</span> <span class="operator">=</span> <span class="cons_Op"><a href="../webdsl-types.stx/#LIST_891_895" id="LIST_1237_1241" title="Defined at ../webdsl-types.stx line 35"><span class="token sort_Id">LIST</span></a><span class="operator">(</span><a href="../webdsl-types.stx/#definedTypeIfExists_8506_8525" id="definedTypeIfExists_1242_1261" title="Defined at ../webdsl-types.stx line 232"><span class="token sort_Id">definedTypeIfExists</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_1299_1300" id="s_1262_1263" title="Referenced at line 36, 36"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Str"><span class="operator">"</span>Facet"</span>))</span> <span class="operator">:-</span>
    <a href="#isEntitySearcher_2500_2516" id="isEntitySearcher_1282_1298" title="Defined at line 69"><span class="token sort_Id">isEntitySearcher</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_1262_1263" id="s_1299_1300" title="Defined at line 35"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <a href="../webdsl.stx/#typeOfExp_16579_16588" id="typeOfExp_1302_1311" title="Defined at ../webdsl.stx line 388"><span class="token sort_Id">typeOfExp</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_1262_1263" id="s_1312_1313" title="Defined at line 35"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#searcherExp_1221_1232" id="searcherExp_1315_1326" title="Defined at line 35"><span class="token sort_Id">searcherExp</span></a></span><span class="operator">)).</span>

  <a href="#typeOfRetrievalExp_535_553" id="typeOfRetrievalExp_1333_1351" title="Defined at line 23"><span class="token sort_Id">typeOfRetrievalExp</span></a><span class="operator">(</span><span class="cons_Var">s</span><span class="operator">,</span> <span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-Search-sig.stx/#SearchResultsSize_9275_9292" id="SearchResultsSize_1355_1372" title="Defined at ../../../src-gen/statix/signatures/WebDSL-Search-sig.stx line 249"><span class="token sort_Id">SearchResultsSize</span></a><span class="operator">(</span><span class="cons_Var"><a href="#exp_1428_1431" id="exp_1373_1376" title="Referenced at line 39"><span class="token sort_Id">exp</span></a></span>)</span><span class="operator">)</span> <span class="operator">=</span> <a href="../types/built-ins.stx/#int_1638_1641" id="int_1381_1384" title="Defined at ../types/built-ins.stx line 41"><span class="token sort_Id">int</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_1412_1413" id="s_1385_1386" title="Referenced at line 39, 39"><span class="token sort_Id">s</span></a></span><span class="operator">)</span> <span class="operator">:-</span>
    <a href="#isEntitySearcher_2500_2516" id="isEntitySearcher_1395_1411" title="Defined at line 69"><span class="token sort_Id">isEntitySearcher</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_1385_1386" id="s_1412_1413" title="Defined at line 38"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <a href="../webdsl.stx/#typeOfExp_16579_16588" id="typeOfExp_1415_1424" title="Defined at ../webdsl.stx line 388"><span class="token sort_Id">typeOfExp</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_1385_1386" id="s_1425_1426" title="Defined at line 38"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#exp_1373_1376" id="exp_1428_1431" title="Defined at line 38"><span class="token sort_Id">exp</span></a></span><span class="operator">)).</span>

  <a href="#typeOfRetrievalExp_535_553" id="typeOfRetrievalExp_1438_1456" title="Defined at line 23"><span class="token sort_Id">typeOfRetrievalExp</span></a><span class="operator">(</span><span class="cons_Var">s</span><span class="operator">,</span> <span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-Search-sig.stx/#SearchTimeString_9319_9335" id="SearchTimeString_1460_1476" title="Defined at ../../../src-gen/statix/signatures/WebDSL-Search-sig.stx line 250"><span class="token sort_Id">SearchTimeString</span></a><span class="operator">(</span><span class="cons_Var"><a href="#exp_1536_1539" id="exp_1477_1480" title="Referenced at line 42"><span class="token sort_Id">exp</span></a></span>)</span><span class="operator">)</span> <span class="operator">=</span> <a href="../types/built-ins.stx/#string_1822_1828" id="string_1485_1491" title="Defined at ../types/built-ins.stx line 48"><span class="keyword">string</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_1520_1521" id="s_1492_1493" title="Referenced at line 42, 42"><span class="token sort_Id">s</span></a></span><span class="operator">)</span> <span class="operator">:-</span> 
    <a href="#isEntitySearcher_2500_2516" id="isEntitySearcher_1503_1519" title="Defined at line 69"><span class="token sort_Id">isEntitySearcher</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_1492_1493" id="s_1520_1521" title="Defined at line 41"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <a href="../webdsl.stx/#typeOfExp_16579_16588" id="typeOfExp_1523_1532" title="Defined at ../webdsl.stx line 388"><span class="token sort_Id">typeOfExp</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_1492_1493" id="s_1533_1534" title="Defined at line 41"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#exp_1477_1480" id="exp_1536_1539" title="Defined at line 41"><span class="token sort_Id">exp</span></a></span><span class="operator">)).</span>

  <a href="#typeOfRetrievalExp_535_553" id="typeOfRetrievalExp_1546_1564" title="Defined at line 23"><span class="token sort_Id">typeOfRetrievalExp</span></a><span class="operator">(</span><span class="cons_Var">s</span><span class="operator">,</span> <span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-Search-sig.stx/#Suggest_9362_9369" id="Suggest_1568_1575" title="Defined at ../../../src-gen/statix/signatures/WebDSL-Search-sig.stx line 251"><span class="token sort_Id">Suggest</span></a>(_, _, _)</span><span class="operator">)</span> <span class="operator">=</span> <span class="cons_Op"><a href="../webdsl-types.stx/#LIST_891_895" id="LIST_1588_1592" title="Defined at ../webdsl-types.stx line 35"><span class="token sort_Id">LIST</span></a><span class="operator">(</span><a href="../types/built-ins.stx/#string_1822_1828" id="string_1593_1599" title="Defined at ../types/built-ins.stx line 48"><span class="keyword">string</span></a><span class="operator">(</span><span class="cons_Var"><span id="s_1600_1601" title="Not referenced locally, nor via imports"><span class="token sort_Id">s</span></span></span>))</span><span class="operator">.</span>

<span class="keyword">rules</span> <span class="layout">// search initialization expressions</span>

  <a href="../webdsl.stx/#typeOfExp_16579_16588" id="typeOfExp_1652_1661" title="Defined at ../webdsl.stx line 388"><span class="token sort_Id">typeOfExp</span></a><span class="operator">(</span><span class="cons_Var">s</span><span class="operator">,</span> <span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-Search-sig.stx/#SearcherDef_6336_6347" id="SearcherDef_1665_1676" title="Defined at ../../../src-gen/statix/signatures/WebDSL-Search-sig.stx line 187"><span class="token sort_Id">SearcherDef</span></a><span class="operator">(</span><span class="cons_Var">def</span>)</span><span class="operator">)</span> <span class="operator">=</span> <a href="#typeOfSearcherDef_1715_1732" id="typeOfSearcherDef_1685_1702" title="Defined at line 50"><span class="token sort_Id">typeOfSearcherDef</span></a><span class="operator">(</span><span class="cons_Var"><span id="s_1703_1704" title="Not referenced locally, nor via imports"><span class="token sort_Id">s</span></span></span><span class="operator">,</span> <span class="cons_Var"><span id="def_1706_1709" title="Not referenced locally, nor via imports"><span class="token sort_Id">def</span></span></span><span class="operator">).</span>

  <a href="#typeOfSearcherDef_1685_1702" id="typeOfSearcherDef_1715_1732" title="Referenced at line 48, 51, 56"><span class="token sort_Id">typeOfSearcherDef</span></a> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="../../../src-gen/statix/signatures/WebDSL-Search-sig.stx/#SearcherDef_671_682" id="SearcherDef_1743_1754" title="Defined at ../../../src-gen/statix/signatures/WebDSL-Search-sig.stx line 34"><span class="token sort_Id">SearcherDef</span></a></span> <span class="operator">-&gt;</span> <span class="cons_SimpleSort"><a href="../webdsl.stx/#TYPE_669_673" id="TYPE_1758_1762" title="Defined at ../webdsl.stx line 29"><span class="token sort_Id">TYPE</span></a></span>
  <a href="#typeOfSearcherDef_1715_1732" id="typeOfSearcherDef_1765_1782" title="Defined at line 50"><span class="token sort_Id">typeOfSearcherDef</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_1848_1849" id="s_1783_1784" title="Referenced at line 52, 53, 54"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-Search-sig.stx/#SearcherInit_6373_6385" id="SearcherInit_1786_1798" title="Defined at ../../../src-gen/statix/signatures/WebDSL-Search-sig.stx line 188"><span class="token sort_Id">SearcherInit</span></a><span class="operator">(</span><span class="cons_Var"><a href="#e_1851_1852" id="e_1799_1800" title="Referenced at line 52, 52, 52, 53, 53"><span class="token sort_Id">e</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#parts_2011_2016" id="parts_1802_1807" title="Referenced at line 54"><span class="token sort_Id">parts</span></a></span>)</span><span class="operator">)</span> <span class="operator">=</span> <span class="cons_Var"><a href="#t_1899_1900" id="t_1812_1813" title="Referenced at line 53"><span class="token sort_Id">t</span></a></span> <span class="operator">:-</span> <span class="operator">{</span> <span class="cons_Var"><a href="#ent_1829_1832" id="ent_1819_1822" title="Referenced at line 52, 53"><span class="token sort_Id">ent</span></a></span> <span class="operator">}</span>
    <span class="cons_Var"><a href="#ent_1819_1822" id="ent_1829_1832" title="Defined at line 51"><span class="token sort_Id">ent</span></a></span> <span class="operator">==</span> <a href="../webdsl-types.stx/#definedType_7911_7922" id="definedType_1836_1847" title="Defined at ../webdsl-types.stx line 218"><span class="token sort_Id">definedType</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_1783_1784" id="s_1848_1849" title="Defined at line 51"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#e_1799_1800" id="e_1851_1852" title="Defined at line 51"><span class="token sort_Id">e</span></a></span><span class="operator">)</span> <span class="operator">|</span> <span class="keyword">error</span> <span class="operator">$[</span><span class="cons_Text">Cannot resolve entity </span><span class="operator">[</span><span class="cons_Var"><a href="#e_1799_1800" id="e_1887_1888" title="Defined at line 51"><span class="token sort_Id">e</span></a></span><span class="operator">]]</span> <span class="operator">@</span><span class="cons_Var"><a href="#e_1799_1800" id="e_1892_1893" title="Defined at line 51"><span class="token sort_Id">e</span></a></span><span class="operator">,</span>
    <span class="cons_Var"><a href="#t_1812_1813" id="t_1899_1900" title="Defined at line 51"><span class="token sort_Id">t</span></a></span> <span class="operator">==</span> <a href="#searcherOfEntity_3364_3380" id="searcherOfEntity_1904_1920" title="Defined at line 89"><span class="token sort_Id">searcherOfEntity</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_1783_1784" id="s_1921_1922" title="Defined at line 51"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#ent_1819_1822" id="ent_1924_1927" title="Defined at line 51"><span class="token sort_Id">ent</span></a></span><span class="operator">)</span> <span class="operator">|</span> <span class="keyword">error</span> <span class="operator">$[</span><span class="cons_Text">Cannot resolve entity searcher for type </span><span class="operator">[</span><span class="cons_Var"><a href="#e_1799_1800" id="e_1980_1981" title="Defined at line 51"><span class="token sort_Id">e</span></a></span><span class="operator">]]</span> <span class="operator">@</span><span class="cons_Var"><a href="#e_1799_1800" id="e_1985_1986" title="Defined at line 51"><span class="token sort_Id">e</span></a></span><span class="operator">,</span>
    <a href="#searcherPartsOk_2261_2276" id="searcherPartsOk_1992_2007" title="Defined at line 63"><span class="token sort_Id">searcherPartsOk</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_1783_1784" id="s_2008_2009" title="Defined at line 51"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#parts_1802_1807" id="parts_2011_2016" title="Defined at line 51"><span class="token sort_Id">parts</span></a></span><span class="operator">).</span>

  <a href="#typeOfSearcherDef_1715_1732" id="typeOfSearcherDef_2022_2039" title="Defined at line 50"><span class="token sort_Id">typeOfSearcherDef</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_2097_2098" id="s_2040_2041" title="Referenced at line 57, 58, 59"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-Search-sig.stx/#SearcherRefMod_6442_6456" id="SearcherRefMod_2043_2057" title="Defined at ../../../src-gen/statix/signatures/WebDSL-Search-sig.stx line 189"><span class="token sort_Id">SearcherRefMod</span></a><span class="operator">(</span><span class="cons_Var"><a href="#exp_2100_2103" id="exp_2058_2061" title="Referenced at line 57, 58"><span class="token sort_Id">exp</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#parts_2225_2230" id="parts_2063_2068" title="Referenced at line 59"><span class="token sort_Id">parts</span></a></span>)</span><span class="operator">)</span> <span class="operator">=</span> <span class="cons_Var"><a href="#t_2082_2083" id="t_2073_2074" title="Referenced at line 57, 58, 58"><span class="token sort_Id">t</span></a></span> <span class="operator">:-</span>
    <span class="cons_Var"><a href="#t_2073_2074" id="t_2082_2083" title="Defined at line 56"><span class="token sort_Id">t</span></a></span> <span class="operator">==</span> <a href="../webdsl.stx/#typeOfExp_16579_16588" id="typeOfExp_2087_2096" title="Defined at ../webdsl.stx line 388"><span class="token sort_Id">typeOfExp</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_2040_2041" id="s_2097_2098" title="Defined at line 56"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#exp_2058_2061" id="exp_2100_2103" title="Defined at line 56"><span class="token sort_Id">exp</span></a></span><span class="operator">),</span>
    <a href="#isEntitySearcher_2500_2516" id="isEntitySearcher_2110_2126" title="Defined at line 69"><span class="token sort_Id">isEntitySearcher</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_2040_2041" id="s_2127_2128" title="Defined at line 56"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#t_2073_2074" id="t_2130_2131" title="Defined at line 56"><span class="token sort_Id">t</span></a></span><span class="operator">)</span> <span class="operator">|</span> <span class="keyword">error</span> <span class="operator">$[</span><span class="cons_Text">Expression must be an entity searcher, got type </span><span class="operator">[</span><span class="cons_Var"><a href="#t_2073_2074" id="t_2192_2193" title="Defined at line 56"><span class="token sort_Id">t</span></a></span><span class="operator">]]</span> <span class="operator">@</span><span class="cons_Var"><a href="#exp_2058_2061" id="exp_2197_2200" title="Defined at line 56"><span class="token sort_Id">exp</span></a></span><span class="operator">,</span>
    <a href="#searcherPartsOk_2261_2276" id="searcherPartsOk_2206_2221" title="Defined at line 63"><span class="token sort_Id">searcherPartsOk</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_2040_2041" id="s_2222_2223" title="Defined at line 56"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#parts_2063_2068" id="parts_2225_2230" title="Defined at line 56"><span class="token sort_Id">parts</span></a></span><span class="operator">).</span>

<span class="keyword">rules</span> <span class="layout">// searcher parts</span>

  <a href="#searcherPartsOk_1992_2007" id="searcherPartsOk_2261_2276" title="Referenced at line 54, 59"><span class="token sort_Id">searcherPartsOk</span></a> <span class="keyword">maps</span> <a href="#searcherPartOk_2311_2325" id="searcherPartOk_2282_2296" title="Defined at line 64"><span class="token sort_Id">searcherPartOk</span></a><span class="operator">(*,</span> <span class="keyword">list</span><span class="operator">(*))</span>
  <a href="#searcherPartOk_2282_2296" id="searcherPartOk_2311_2325" title="Referenced at line 63, 65"><span class="token sort_Id">searcherPartOk</span></a> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="../../../src-gen/statix/signatures/WebDSL-Search-sig.stx/#SearcherPart_687_699" id="SearcherPart_2336_2348" title="Defined at ../../../src-gen/statix/signatures/WebDSL-Search-sig.stx line 35"><span class="token sort_Id">SearcherPart</span></a></span>
  <a href="#searcherPartOk_2311_2325" id="searcherPartOk_2351_2365" title="Defined at line 64"><span class="token sort_Id">searcherPartOk</span></a><span class="operator">(_,</span> <span class="cons_Var"><a href="#part_2419_2423" id="part_2369_2373" title="Referenced at line 65"><span class="token sort_Id">part</span></a></span><span class="operator">)</span> <span class="operator">:-</span> <span class="keyword">try</span> <span class="operator">{</span> <span class="keyword">false</span> <span class="operator">}</span> <span class="operator">|</span> <span class="token sort_Id">warning</span> <span class="operator">$[</span><span class="cons_Text">Searcher part </span><span class="operator">[</span><span class="cons_Var"><a href="#part_2369_2373" id="part_2419_2423" title="Defined at line 65"><span class="token sort_Id">part</span></a></span><span class="operator">]</span><span class="cons_Text"> is not yet implemented</span><span class="operator">].</span>

<span class="keyword">rules</span> <span class="layout">// entity name to searcher name mapping</span>

  <a href="#isEntitySearcher_661_677" id="isEntitySearcher_2500_2516" title="Referenced at line 25, 28, 32, 36, 39, 42, 58, 70, 71"><span class="token sort_Id">isEntitySearcher</span></a> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="../webdsl.stx/#TYPE_669_673" id="TYPE_2527_2531" title="Defined at ../webdsl.stx line 29"><span class="token sort_Id">TYPE</span></a></span>
  <a href="#isEntitySearcher_2500_2516" id="isEntitySearcher_2534_2550" title="Defined at line 69"><span class="token sort_Id">isEntitySearcher</span></a><span class="operator">(</span><span class="cons_Var"><span id="s_2551_2552" title="Not referenced locally, nor via imports"><span class="token sort_Id">s</span></span></span><span class="operator">,</span> <span class="cons_Var"><span id="t_2554_2555" title="Not referenced locally, nor via imports"><span class="token sort_Id">t</span></span></span><span class="operator">)</span> <span class="operator">:-</span> <span class="keyword">false</span><span class="operator">.</span>
  <a href="#isEntitySearcher_2500_2516" id="isEntitySearcher_2569_2585" title="Defined at line 69"><span class="token sort_Id">isEntitySearcher</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_2648_2649" id="s_2586_2587" title="Referenced at line 72"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../webdsl-types.stx/#NATIVECLASS_529_540" id="NATIVECLASS_2589_2600" title="Defined at ../webdsl-types.stx line 23"><span class="token sort_Id">NATIVECLASS</span></a><span class="operator">(</span><span class="cons_Var"><a href="#name_2651_2655" id="name_2601_2605" title="Referenced at line 72"><span class="token sort_Id">name</span></a></span>, _)</span><span class="operator">)</span> <span class="operator">:-</span>
    <a href="#resolveSearcherMappingInverse_2942_2971" id="resolveSearcherMappingInverse_2618_2647" title="Defined at line 80"><span class="token sort_Id">resolveSearcherMappingInverse</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_2586_2587" id="s_2648_2649" title="Defined at line 71"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#name_2601_2605" id="name_2651_2655" title="Defined at line 71"><span class="token sort_Id">name</span></a></span><span class="operator">)</span> <span class="operator">==</span> <span class="operator">[_].</span>

  <a href="#resolveSearcherMapping_2746_2768" id="resolveSearcherMapping_2668_2690" title="Referenced at line 75, 92"><span class="token sort_Id">resolveSearcherMapping</span></a> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_StringSort">string</span> <span class="operator">-&gt;</span> <span class="keyword">list</span><span class="operator">((</span><span class="cons_PathSort">path</span> <span class="operator">*</span> <span class="operator">(</span><span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_StringSort">string</span><span class="operator">)))</span>
  <a href="#resolveSearcherMapping_2668_2690" id="resolveSearcherMapping_2746_2768" title="Defined at line 74"><span class="token sort_Id">resolveSearcherMapping</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_2929_2930" id="s_2769_2770" title="Referenced at line 78"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#entity_2902_2908" id="entity_2772_2778" title="Referenced at line 77"><span class="token sort_Id">entity</span></a></span><span class="operator">)</span> <span class="operator">=</span> <span class="cons_Var"><a href="#ps_2935_2937" id="ps_2782_2784" title="Referenced at line 78"><span class="token sort_Id">ps</span></a></span> <span class="operator">:-</span>
    <span class="keyword">query</span> <span class="cons_Label"><a href="#searcher_169_177" id="searcher_2798_2806" title="Defined at line 12"><span class="token sort_Id">searcher</span></a></span> <span class="keyword">filter</span> <span class="cons_Closure"><span class="cons_Label"><a href="../webdsl.stx/#P_1226_1227" id="P_2814_2815" title="Defined at ../webdsl.stx line 45"><span class="token sort_Id">P</span></a></span>*</span> <span class="cons_Closure"><span class="cons_Label"><a href="../webdsl.stx/#F_1290_1291" id="F_2817_2818" title="Defined at ../webdsl.stx line 46"><span class="token sort_Id">F</span></a></span>*</span> <span class="operator">((</span><span class="cons_Label"><a href="../webdsl.stx/#EXTEND_1385_1391" id="EXTEND_2822_2828" title="Defined at ../webdsl.stx line 47"><span class="token sort_Id">EXTEND</span></a></span><span class="operator">?</span> <span class="cons_Closure"><span class="cons_Label"><a href="../webdsl.stx/#INHERIT_1445_1452" id="INHERIT_2830_2837" title="Defined at ../webdsl.stx line 48"><span class="token sort_Id">INHERIT</span></a></span>*</span><span class="operator">)</span> <span class="operator">|</span> <span class="operator">(</span><span class="cons_Label"><a href="../webdsl.stx/#DEF_1498_1501" id="DEF_2843_2846" title="Defined at ../webdsl.stx line 49"><span class="token sort_Id">DEF</span></a></span><span class="operator">?</span> <span class="operator">(</span><span class="cons_Label"><a href="../webdsl.stx/#IMPORT_1595_1601" id="IMPORT_2849_2855" title="Defined at ../webdsl.stx line 50"><span class="token sort_Id">IMPORT</span></a></span> <span class="operator">|</span> <span class="cons_Label"><a href="../webdsl.stx/#IMPORTLIB_1661_1670" id="IMPORTLIB_2858_2867" title="Defined at ../webdsl.stx line 51"><span class="token sort_Id">IMPORTLIB</span></a></span><span class="operator">)?))</span>
           <span class="keyword">and</span> <span class="operator">{</span> <span class="cons_Var"><a href="#e'_2895_2897" id="e'_2889_2891" title="Referenced at line 77"><span class="token sort_Id">e'</span></a></span> <span class="operator">:-</span> <span class="cons_Var"><a href="#e'_2889_2891" id="e'_2895_2897" title="Defined at line 77"><span class="token sort_Id">e'</span></a></span> <span class="operator">==</span> <span class="operator">(</span><span class="cons_Var"><a href="#entity_2772_2778" id="entity_2902_2908" title="Defined at line 75"><span class="token sort_Id">entity</span></a></span><span class="operator">,</span> <span class="operator">_)</span> <span class="operator">}</span>
           <span class="keyword">in</span> <span class="cons_Var"><a href="#s_2769_2770" id="s_2929_2930" title="Defined at line 75"><span class="token sort_Id">s</span></a></span> <span class="operator">|-&gt;</span> <span class="cons_Var"><a href="#ps_2782_2784" id="ps_2935_2937" title="Defined at line 75"><span class="token sort_Id">ps</span></a></span><span class="operator">.</span>

  <a href="#resolveSearcherMappingInverse_2618_2647" id="resolveSearcherMappingInverse_2942_2971" title="Referenced at line 72, 81, 98"><span class="token sort_Id">resolveSearcherMappingInverse</span></a> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_StringSort">string</span> <span class="operator">-&gt;</span> <span class="keyword">list</span><span class="operator">((</span><span class="cons_PathSort">path</span> <span class="operator">*</span> <span class="operator">(</span><span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_StringSort">string</span><span class="operator">)))</span>
  <a href="#resolveSearcherMappingInverse_2942_2971" id="resolveSearcherMappingInverse_3027_3056" title="Defined at line 80"><span class="token sort_Id">resolveSearcherMappingInverse</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_3221_3222" id="s_3057_3058" title="Referenced at line 84"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#searcher_3195_3203" id="searcher_3060_3068" title="Referenced at line 83"><span class="token sort_Id">searcher</span></a></span><span class="operator">)</span> <span class="operator">=</span> <span class="cons_Var"><a href="#ps_3227_3229" id="ps_3072_3074" title="Referenced at line 84"><span class="token sort_Id">ps</span></a></span> <span class="operator">:-</span>
    <span class="keyword">query</span> <span class="cons_Label"><a href="#searcher_169_177" id="searcher_3088_3096" title="Defined at line 12"><span class="token sort_Id">searcher</span></a></span> <span class="keyword">filter</span> <span class="cons_Closure"><span class="cons_Label"><a href="../webdsl.stx/#P_1226_1227" id="P_3104_3105" title="Defined at ../webdsl.stx line 45"><span class="token sort_Id">P</span></a></span>*</span> <span class="cons_Closure"><span class="cons_Label"><a href="../webdsl.stx/#F_1290_1291" id="F_3107_3108" title="Defined at ../webdsl.stx line 46"><span class="token sort_Id">F</span></a></span>*</span> <span class="operator">((</span><span class="cons_Label"><a href="../webdsl.stx/#EXTEND_1385_1391" id="EXTEND_3112_3118" title="Defined at ../webdsl.stx line 47"><span class="token sort_Id">EXTEND</span></a></span><span class="operator">?</span> <span class="cons_Closure"><span class="cons_Label"><a href="../webdsl.stx/#INHERIT_1445_1452" id="INHERIT_3120_3127" title="Defined at ../webdsl.stx line 48"><span class="token sort_Id">INHERIT</span></a></span>*</span><span class="operator">)</span> <span class="operator">|</span> <span class="operator">(</span><span class="cons_Label"><a href="../webdsl.stx/#DEF_1498_1501" id="DEF_3133_3136" title="Defined at ../webdsl.stx line 49"><span class="token sort_Id">DEF</span></a></span><span class="operator">?</span> <span class="operator">(</span><span class="cons_Label"><a href="../webdsl.stx/#IMPORT_1595_1601" id="IMPORT_3139_3145" title="Defined at ../webdsl.stx line 50"><span class="token sort_Id">IMPORT</span></a></span> <span class="operator">|</span> <span class="cons_Label"><a href="../webdsl.stx/#IMPORTLIB_1661_1670" id="IMPORTLIB_3148_3157" title="Defined at ../webdsl.stx line 51"><span class="token sort_Id">IMPORTLIB</span></a></span><span class="operator">)?))</span>
           <span class="keyword">and</span> <span class="operator">{</span> <span class="cons_Var"><a href="#e'_3185_3187" id="e'_3179_3181" title="Referenced at line 83"><span class="token sort_Id">e'</span></a></span> <span class="operator">:-</span> <span class="cons_Var"><a href="#e'_3179_3181" id="e'_3185_3187" title="Defined at line 83"><span class="token sort_Id">e'</span></a></span> <span class="operator">==</span> <span class="operator">(_,</span> <span class="cons_Var"><a href="#searcher_3060_3068" id="searcher_3195_3203" title="Defined at line 81"><span class="token sort_Id">searcher</span></a></span><span class="operator">)</span> <span class="operator">}</span>
           <span class="keyword">in</span> <span class="cons_Var"><a href="#s_3057_3058" id="s_3221_3222" title="Defined at line 81"><span class="token sort_Id">s</span></a></span> <span class="operator">|-&gt;</span> <span class="cons_Var"><a href="#ps_3072_3074" id="ps_3227_3229" title="Defined at line 81"><span class="token sort_Id">ps</span></a></span><span class="operator">.</span>

  <a href="../webdsl.stx/#defOk_15473_15478" id="defOk_3234_3239" title="Defined at ../webdsl.stx line 356"><span class="token sort_Id">defOk</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_3358_3359" id="s_3240_3241" title="Referenced at line 87"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-Generated-sig.stx/#GeneratedDefinition_288_307" id="GeneratedDefinition_3243_3262" title="Defined at ../../../src-gen/statix/signatures/WebDSL-Generated-sig.stx line 19"><span class="token sort_Id">GeneratedDefinition</span></a><span class="operator">(</span><span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-Generated-sig.stx/#Generated_243_252" id="Generated_3263_3272" title="Defined at ../../../src-gen/statix/signatures/WebDSL-Generated-sig.stx line 18"><span class="token sort_Id">Generated</span></a><span class="operator">([</span><span class="cons_Str"><span class="operator">"</span>entitySearcherMapping"</span><span class="operator">,</span> <span class="cons_Var"><a href="#entity_3337_3343" id="entity_3299_3305" title="Referenced at line 87"><span class="token sort_Id">entity</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#searcher_3345_3353" id="searcher_3307_3315" title="Referenced at line 87"><span class="token sort_Id">searcher</span></a></span>])</span>)</span><span class="operator">)</span> <span class="operator">:-</span>
    <span class="operator">!</span><span class="cons_Label"><a href="#searcher_169_177" id="searcher_3328_3336" title="Defined at line 12"><span class="token sort_Id">searcher</span></a></span><span class="operator">[</span><span class="cons_Var"><a href="#entity_3299_3305" id="entity_3337_3343" title="Defined at line 86"><span class="token sort_Id">entity</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#searcher_3307_3315" id="searcher_3345_3353" title="Defined at line 86"><span class="token sort_Id">searcher</span></a></span><span class="operator">]</span> <span class="keyword">in</span> <span class="cons_Var"><a href="#s_3240_3241" id="s_3358_3359" title="Defined at line 86"><span class="token sort_Id">s</span></a></span><span class="operator">.</span>

  <a href="#searcherOfEntity_1904_1920" id="searcherOfEntity_3364_3380" title="Referenced at line 53, 90, 91"><span class="token sort_Id">searcherOfEntity</span></a> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="../webdsl.stx/#TYPE_669_673" id="TYPE_3391_3395" title="Defined at ../webdsl.stx line 29"><span class="token sort_Id">TYPE</span></a></span> <span class="operator">-&gt;</span> <span class="cons_SimpleSort"><a href="../webdsl.stx/#TYPE_669_673" id="TYPE_3399_3403" title="Defined at ../webdsl.stx line 29"><span class="token sort_Id">TYPE</span></a></span>
  <a href="#searcherOfEntity_3364_3380" id="searcherOfEntity_3406_3422" title="Defined at line 89"><span class="token sort_Id">searcherOfEntity</span></a><span class="operator">(_,</span> <span class="operator">_)</span> <span class="operator">=</span> <span class="cons_Op"><a href="../webdsl-types.stx/#UNTYPED_1251_1258" id="UNTYPED_3431_3438" title="Defined at ../webdsl-types.stx line 49"><span class="token sort_Id">UNTYPED</span></a>()</span> <span class="operator">:-</span> <span class="keyword">false</span><span class="operator">.</span>
  <a href="#searcherOfEntity_3364_3380" id="searcherOfEntity_3453_3469" title="Defined at line 89"><span class="token sort_Id">searcherOfEntity</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_3534_3535" id="s_3470_3471" title="Referenced at line 92, 93"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../webdsl-types.stx/#ENTITY_444_450" id="ENTITY_3473_3479" title="Defined at ../webdsl-types.stx line 20"><span class="token sort_Id">ENTITY</span></a><span class="operator">(</span><span class="cons_Var"><a href="#e_3537_3538" id="e_3480_3481" title="Referenced at line 92"><span class="token sort_Id">e</span></a></span>, _)</span><span class="operator">)</span> <span class="operator">=</span> <span class="cons_Var"><a href="#t_3569_3570" id="t_3489_3490" title="Referenced at line 93"><span class="token sort_Id">t</span></a></span> <span class="operator">:-</span> <span class="operator">{</span> <span class="cons_Var"><a href="#searcher_3552_3560" id="searcher_3496_3504" title="Referenced at line 92, 93"><span class="token sort_Id">searcher</span></a></span> <span class="operator">}</span>
    <a href="#resolveSearcherMapping_2668_2690" id="resolveSearcherMapping_3511_3533" title="Defined at line 74"><span class="token sort_Id">resolveSearcherMapping</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_3470_3471" id="s_3534_3535" title="Defined at line 91"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#e_3480_3481" id="e_3537_3538" title="Defined at line 91"><span class="token sort_Id">e</span></a></span><span class="operator">)</span> <span class="operator">==</span> <span class="operator">[(_,</span> <span class="operator">(_,</span> <span class="cons_Var"><a href="#searcher_3496_3504" id="searcher_3552_3560" title="Defined at line 91"><span class="token sort_Id">searcher</span></a></span><span class="operator">))],</span>
    <span class="cons_Var"><a href="#t_3489_3490" id="t_3569_3570" title="Defined at line 91"><span class="token sort_Id">t</span></a></span> <span class="operator">==</span> <a href="../webdsl-types.stx/#definedTypeNoRef_8308_8324" id="definedTypeNoRef_3574_3590" title="Defined at ../webdsl-types.stx line 228"><span class="token sort_Id">definedTypeNoRef</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_3470_3471" id="s_3591_3592" title="Defined at line 91"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#searcher_3496_3504" id="searcher_3594_3602" title="Defined at line 91"><span class="token sort_Id">searcher</span></a></span><span class="operator">).</span>

  <a href="#entityOfSearcher_1075_1091" id="entityOfSearcher_3608_3624" title="Referenced at line 33, 96, 97"><span class="token sort_Id">entityOfSearcher</span></a> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="../webdsl.stx/#TYPE_669_673" id="TYPE_3635_3639" title="Defined at ../webdsl.stx line 29"><span class="token sort_Id">TYPE</span></a></span> <span class="operator">-&gt;</span> <span class="cons_SimpleSort"><a href="../webdsl.stx/#TYPE_669_673" id="TYPE_3643_3647" title="Defined at ../webdsl.stx line 29"><span class="token sort_Id">TYPE</span></a></span>
  <a href="#entityOfSearcher_3608_3624" id="entityOfSearcher_3650_3666" title="Defined at line 95"><span class="token sort_Id">entityOfSearcher</span></a><span class="operator">(_,</span> <span class="operator">_)</span> <span class="operator">=</span> <span class="cons_Op"><a href="../webdsl-types.stx/#UNTYPED_1251_1258" id="UNTYPED_3675_3682" title="Defined at ../webdsl-types.stx line 49"><span class="token sort_Id">UNTYPED</span></a>()</span> <span class="operator">:-</span> <span class="keyword">false</span><span class="operator">.</span>
  <a href="#entityOfSearcher_3608_3624" id="entityOfSearcher_3697_3713" title="Defined at line 95"><span class="token sort_Id">entityOfSearcher</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_3795_3796" id="s_3714_3715" title="Referenced at line 98, 99"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../webdsl-types.stx/#NATIVECLASS_529_540" id="NATIVECLASS_3717_3728" title="Defined at ../webdsl-types.stx line 23"><span class="token sort_Id">NATIVECLASS</span></a><span class="operator">(</span><span class="cons_Var"><a href="#searcher_3798_3806" id="searcher_3729_3737" title="Referenced at line 98"><span class="token sort_Id">searcher</span></a></span>, _)</span><span class="operator">)</span> <span class="operator">=</span> <span class="cons_Var"><a href="#t_3835_3836" id="t_3745_3746" title="Referenced at line 99"><span class="token sort_Id">t</span></a></span> <span class="operator">:-</span> <span class="operator">{</span> <span class="cons_Var"><a href="#entity_3817_3823" id="entity_3752_3758" title="Referenced at line 98, 99"><span class="token sort_Id">entity</span></a></span> <span class="operator">}</span>
    <a href="#resolveSearcherMappingInverse_2942_2971" id="resolveSearcherMappingInverse_3765_3794" title="Defined at line 80"><span class="token sort_Id">resolveSearcherMappingInverse</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_3714_3715" id="s_3795_3796" title="Defined at line 97"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#searcher_3729_3737" id="searcher_3798_3806" title="Defined at line 97"><span class="token sort_Id">searcher</span></a></span><span class="operator">)</span> <span class="operator">==</span> <span class="operator">[(_,</span> <span class="operator">(</span><span class="cons_Var"><a href="#entity_3752_3758" id="entity_3817_3823" title="Defined at line 97"><span class="token sort_Id">entity</span></a></span><span class="operator">,</span> <span class="operator">_))],</span>
    <span class="cons_Var"><a href="#t_3745_3746" id="t_3835_3836" title="Defined at line 97"><span class="token sort_Id">t</span></a></span> <span class="operator">==</span> <a href="../webdsl-types.stx/#definedTypeNoRef_8308_8324" id="definedTypeNoRef_3840_3856" title="Defined at ../webdsl-types.stx line 228"><span class="token sort_Id">definedTypeNoRef</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_3714_3715" id="s_3857_3858" title="Defined at line 97"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#entity_3752_3758" id="entity_3860_3866" title="Defined at line 97"><span class="token sort_Id">entity</span></a></span><span class="operator">).</span>

<span class="keyword">rules</span> <span class="layout">// built in</span>

  <a href="#declareSearchBuiltIns_3923_3944" id="declareSearchBuiltIns_3891_3912" title="Referenced at line 104; ../webdsl.stx line 380"><span class="token sort_Id">declareSearchBuiltIns</span></a> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span>
  <a href="#declareSearchBuiltIns_3891_3912" id="declareSearchBuiltIns_3923_3944" title="Defined at line 103"><span class="token sort_Id">declareSearchBuiltIns</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_3990_3991" id="s_3945_3946" title="Referenced at line 105"><span class="token sort_Id">s</span></a></span><span class="operator">)</span> <span class="operator">:-</span>
    <span class="operator">!</span><span class="cons_Label"><a href="#searcher_169_177" id="searcher_3956_3964" title="Defined at line 12"><span class="token sort_Id">searcher</span></a></span><span class="operator">[</span><span class="cons_Str"><span class="operator">"</span>Entity"</span><span class="operator">,</span> <span class="cons_Str"><span class="operator">"</span>Searcher"</span><span class="operator">]</span> <span class="keyword">in</span> <span class="cons_Var"><a href="#s_3945_3946" id="s_3990_3991" title="Defined at line 104"><span class="token sort_Id">s</span></a></span><span class="operator">.</span> <span class="layout">// abstract searcher results in entity type</span>

</code></pre></td></tr></tbody></table></div>