---
title: webdsl.stx
hide:
  - toc
---

# `webdsl.stx`

:simple-github: [pdmosses/webdsl-statix/webdslstatix/trans/static-semantics/webdsl.stx]

[pdmosses/webdsl-statix/webdslstatix/trans/static-semantics/webdsl.stx]: https://github.com/pdmosses/webdsl-statix/blob/master/webdslstatix/trans/static-semantics/webdsl.stx "The source file on GitHub"

<div class="stx"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
483
484
485
486
487
488
489
490
491
492
493
</pre></div></td>
<td class="code"><pre><code><span class="keyword">module</span> <button class="modal-open" id="static-semantics/webdsl_1_8" title="Multi-file references" data-urls="../webdsl-ac.stx/#static-semantics/webdsl_16_3 line 16; ../webdsl-actions.stx/#static-semantics/webdsl_15_3 line 15; ../webdsl-built-ins.stx/#static-semantics/webdsl_6_3 line 6; ../webdsl-entities.stx/#static-semantics/webdsl_14_3 line 14; ../webdsl-expand.stx/#static-semantics/webdsl_8_3 line 8; ../webdsl-hql.stx/#static-semantics/webdsl_6_3 line 6; ../webdsl-modules.stx/#static-semantics/webdsl_6_3 line 6; ../webdsl-native.stx/#static-semantics/webdsl_11_3 line 11; ../webdsl-regex.stx/#static-semantics/webdsl_6_3 line 6; ../webdsl-search.stx/#static-semantics/webdsl_6_3 line 6; ../webdsl-services.stx/#static-semantics/webdsl_8_3 line 8; ../webdsl-types.stx/#static-semantics/webdsl_9_3 line 9; ../webdsl-ui.stx/#static-semantics/webdsl_18_3 line 18; ../../statics.stx/#static-semantics/webdsl_4_3 line 4; ../actions/binops.stx/#static-semantics/webdsl_7_3 line 7; ../actions/built-ins.stx/#static-semantics/webdsl_7_3 line 7; ../actions/emails.stx/#static-semantics/webdsl_6_3 line 6; ../actions/functions.stx/#static-semantics/webdsl_9_3 line 9; ../entities/annotations.stx/#static-semantics/webdsl_9_3 line 9; ../entities/built-ins.stx/#static-semantics/webdsl_10_3 line 10; ../entities/generated-functions.stx/#static-semantics/webdsl_8_3 line 8; ../types/built-ins.stx/#static-semantics/webdsl_11_3 line 11; ../types/type-extensions.stx/#static-semantics/webdsl_11_3 line 11; ../ui/actions.stx/#static-semantics/webdsl_15_3 line 15; ../ui/ajax.stx/#static-semantics/webdsl_9_3 line 9; ../ui/attributes.stx/#static-semantics/webdsl_7_3 line 7; ../ui/built-ins.stx/#static-semantics/webdsl_8_3 line 8; ../ui/template-calls.stx/#static-semantics/webdsl_16_3 line 16"><span class="token sort_Id">static-semantics/webdsl</span></button>

<span class="keyword">imports</span>
  <a href="../../../src-gen/statix/signatures/webdsl-statix-sig.stx/#signatures/webdsl-statix-sig_1_8" id="signatures/webdsl-statix-sig_4_3" title="Defined at ../../../src-gen/statix/signatures/webdsl-statix-sig.stx line 1"><span class="token sort_Id">signatures/webdsl-statix-sig</span></a>

  <a href="../actions/built-ins.stx/#static-semantics/actions/built-ins_1_8" id="static-semantics/actions/built-ins_6_3" title="Defined at ../actions/built-ins.stx line 1"><span class="token sort_Id">static-semantics/actions/built-ins</span></a>
  <a href="../entities/built-ins.stx/#static-semantics/entities/built-ins_1_8" id="static-semantics/entities/built-ins_7_3" title="Defined at ../entities/built-ins.stx line 1"><span class="token sort_Id">static-semantics/entities/built-ins</span></a>
  <a href="../types/built-ins.stx/#static-semantics/types/built-ins_1_8" id="static-semantics/types/built-ins_8_3" title="Defined at ../types/built-ins.stx line 1"><span class="token sort_Id">static-semantics/types/built-ins</span></a>
  <a href="../ui/built-ins.stx/#static-semantics/ui/built-ins_1_8" id="static-semantics/ui/built-ins_9_3" title="Defined at ../ui/built-ins.stx line 1"><span class="token sort_Id">static-semantics/ui/built-ins</span></a>

  <a href="../entities/annotations.stx/#static-semantics/entities/annotations_1_8" id="static-semantics/entities/annotations_11_3" title="Defined at ../entities/annotations.stx line 1"><span class="token sort_Id">static-semantics/entities/annotations</span></a>

  <a href="../webdsl-ac.stx/#static-semantics/webdsl-ac_1_8" id="static-semantics/webdsl-ac_13_3" title="Defined at ../webdsl-ac.stx line 1"><span class="token sort_Id">static-semantics/webdsl-ac</span></a>
  <a href="../webdsl-actions.stx/#static-semantics/webdsl-actions_1_8" id="static-semantics/webdsl-actions_14_3" title="Defined at ../webdsl-actions.stx line 1"><span class="token sort_Id">static-semantics/webdsl-actions</span></a>
  <a href="../webdsl-entities.stx/#static-semantics/webdsl-entities_1_8" id="static-semantics/webdsl-entities_15_3" title="Defined at ../webdsl-entities.stx line 1"><span class="token sort_Id">static-semantics/webdsl-entities</span></a>
  <a href="../webdsl-expand.stx/#static-semantics/webdsl-expand_1_8" id="static-semantics/webdsl-expand_16_3" title="Defined at ../webdsl-expand.stx line 1"><span class="token sort_Id">static-semantics/webdsl-expand</span></a>
  <a href="../webdsl-hql.stx/#static-semantics/webdsl-hql_1_8" id="static-semantics/webdsl-hql_17_3" title="Defined at ../webdsl-hql.stx line 1"><span class="token sort_Id">static-semantics/webdsl-hql</span></a>
  <a href="../webdsl-modules.stx/#static-semantics/webdsl-modules_1_8" id="static-semantics/webdsl-modules_18_3" title="Defined at ../webdsl-modules.stx line 1"><span class="token sort_Id">static-semantics/webdsl-modules</span></a>
  <a href="../webdsl-native.stx/#static-semantics/webdsl-native_1_8" id="static-semantics/webdsl-native_19_3" title="Defined at ../webdsl-native.stx line 1"><span class="token sort_Id">static-semantics/webdsl-native</span></a>
  <a href="../webdsl-regex.stx/#static-semantics/webdsl-regex_1_8" id="static-semantics/webdsl-regex_20_3" title="Defined at ../webdsl-regex.stx line 1"><span class="token sort_Id">static-semantics/webdsl-regex</span></a>
  <a href="../webdsl-search.stx/#static-semantics/webdsl-search_1_8" id="static-semantics/webdsl-search_21_3" title="Defined at ../webdsl-search.stx line 1"><span class="token sort_Id">static-semantics/webdsl-search</span></a>
  <a href="../webdsl-services.stx/#static-semantics/webdsl-services_1_8" id="static-semantics/webdsl-services_22_3" title="Defined at ../webdsl-services.stx line 1"><span class="token sort_Id">static-semantics/webdsl-services</span></a>
  <a href="../webdsl-types.stx/#static-semantics/webdsl-types_1_8" id="static-semantics/webdsl-types_23_3" title="Defined at ../webdsl-types.stx line 1"><span class="token sort_Id">static-semantics/webdsl-types</span></a>
  <a href="../webdsl-ui.stx/#static-semantics/webdsl-ui_1_8" id="static-semantics/webdsl-ui_24_3" title="Defined at ../webdsl-ui.stx line 1"><span class="token sort_Id">static-semantics/webdsl-ui</span></a>

<span class="keyword">signature</span>

  <span class="keyword">sorts</span>
    <span class="cons_SortDecl"><button class="modal-open" id="TYPE_29_5" title="Multi-file references" data-urls="#TYPE_39_26 line 39, 69, 100, 105, 113, 118, 123, 127, 151, 154, 157, 163, 169, 172, 175, 183, 186, 191, 196, 204, 209, 217, 220, 223, 228, 234, 245, 257, 265, 270, 281, 289, 294, 301, 306, 314, 320, 326, 332, 361, 363, 388, 390, 395, 398, 401, 408, 411, 436, 463, 468, 471, 476, 484, 488; ../webdsl-ac.stx/#TYPE_75_39 line 75, 79, 88, 176, 202, 216, 244, 256, 266, 271, 278; ../webdsl-actions.stx/#TYPE_100_51 line 100, 113, 120, 200, 260, 300, 308, 324; ../webdsl-built-ins.stx/#TYPE_10_50 line 10, 13; ../webdsl-entities.stx/#TYPE_83_25 line 83, 88, 102, 139, 150, 183, 194; ../webdsl-expand.stx/#TYPE_46_30 line 46; ../webdsl-hql.stx/#TYPE_18_36 line 18, 27, 35, 41, 45, 48, 53, 57, 123, 127, 138; ../webdsl-native.stx/#TYPE_32_29 line 32, 57, 118; ../webdsl-search.stx/#TYPE_23_48 line 23, 50, 69, 89, 95; ../webdsl-types.stx/#TYPE_17_30 line 17, 18, 20, 21, 23, 24, 26, 29, 32, 33, 35, 36, 37, 40, 41, 43, 45, 46, 47, 48, 49, 67, 127, 130, 137, 140, 154, 160, 198, 201, 218, 223, 228, 232, 235, 239, 244, 250, 255, 260, 267, 273, 279, 286, 289, 292, 298; ../webdsl-ui.stx/#TYPE_44_49 line 44, 114, 118, 126, 131, 250, 286, 292, 315, 320; ../actions/binops.stx/#TYPE_19_36 line 19, 143, 148; ../actions/functions.stx/#TYPE_37_53 line 37, 41, 51, 59, 128, 133, 139, 146, 150, 156, 165, 173, 180, 188, 194, 202, 208, 214, 221, 226, 253, 262, 267, 273; ../entities/annotations.stx/#TYPE_76_35 line 76, 118, 171, 215, 231, 251, 254, 258, 262, 265; ../entities/generated-functions.stx/#TYPE_23_82 line 23, 50; ../types/built-ins.stx/#TYPE_34_35 line 34, 41, 43, 45, 48, 50, 52, 54, 56, 58, 60, 62, 65, 67, 69, 72, 74, 76, 78, 81, 84; ../ui/actions.stx/#TYPE_54_69 line 54, 125, 131, 138, 188; ../ui/ajax.stx/#TYPE_89_70 line 89; ../ui/template-calls.stx/#TYPE_48_52 line 48, 128, 132"><span class="token sort_Id">TYPE</span></button></span>   <span class="layout">// semantic type</span>
    <span class="cons_SortDecl"><button class="modal-open" id="BOOL_30_5" title="Multi-file references" data-urls="#BOOL_34_12 line 34, 35, 157, 175, 186, 223, 257, 401, 411, 417, 419, 424, 428, 432, 436; ../webdsl-ac.stx/#BOOL_189_56 line 189, 202; ../webdsl-actions.stx/#BOOL_120_19 line 120; ../webdsl-built-ins.stx/#BOOL_13_68 line 13; ../webdsl-entities.stx/#BOOL_206_31 line 206, 213, 225; ../webdsl-modules.stx/#BOOL_40_39 line 40, 75, 79, 102, 109, 115; ../webdsl-native.stx/#BOOL_57_60 line 57; ../webdsl-types.stx/#BOOL_17_45 line 17, 29, 130, 140, 201, 292; ../webdsl-ui.stx/#BOOL_44_57 line 44, 98, 103, 108, 114, 118, 267; ../actions/functions.stx/#BOOL_104_41 line 104, 133, 180, 188; ../entities/annotations.stx/#BOOL_220_31 line 220, 223, 240, 258, 262, 265, 270; ../entities/generated-functions.stx/#BOOL_23_89 line 23, 50; ../ui/actions.stx/#BOOL_45_83 line 45, 54; ../ui/template-calls.stx/#BOOL_30_60 line 30, 37"><span class="token sort_Id">BOOL</span></button></span>   <span class="layout">// used as return values of functional rules</span>
    <span class="cons_SortDecl"><button class="modal-open" id="ORIGIN_31_5" title="Multi-file references" data-urls="#ORIGIN_37_41 line 37, 38, 39, 40, 41, 65, 123, 217, 220, 223, 265; ../webdsl-ac.stx/#ORIGIN_202_36 line 202; ../actions/functions.stx/#ORIGIN_128_41 line 128, 133"><span class="token sort_Id">ORIGIN</span></button></span> <span class="layout">// dummy data: used to guide scope graph differ</span>

  <span class="keyword">constructors</span>
    <span class="cons_OpDecl"><button class="modal-open" id="TRUE_34_5" title="Multi-file references" data-urls="#TRUE_155_71 line 155, 173, 181, 221, 246, 259, 402, 409, 413, 418, 421, 422, 426, 433, 434, 437; ../webdsl-ac.stx/#TRUE_47_51 line 47, 184, 185, 203; ../webdsl-actions.stx/#TRUE_121_19 line 121; ../webdsl-entities.stx/#TRUE_113_86 line 113, 215; ../webdsl-modules.stx/#TRUE_38_35 line 38, 42, 77, 80, 81, 103, 104, 117; ../webdsl-native.stx/#TRUE_18_61 line 18, 59; ../webdsl-regex.stx/#TRUE_17_38 line 17, 22, 27, 32, 37; ../webdsl-types.stx/#TRUE_98_68 line 98, 99, 119, 122, 123, 128, 132, 133, 134, 135, 138, 142, 143, 144, 145, 146, 147, 148, 149, 150, 199, 203, 290, 293; ../webdsl-ui.stx/#TRUE_46_42 line 46, 101, 106, 110, 111, 112, 116, 277; ../actions/functions.stx/#TRUE_134_50 line 134, 182; ../entities/annotations.stx/#TRUE_242_43 line 242, 246, 267, 271; ../entities/generated-functions.stx/#TRUE_27_91 line 27, 52; ../ui/actions.stx/#TRUE_56_43 line 56, 63, 74; ../ui/template-calls.stx/#TRUE_24_77 line 24, 88"><span class="token sort_Id">TRUE</span></button> <span class="operator">:</span> <span class="cons_SimpleSort"><a href="#BOOL_30_5" id="BOOL_34_12" title="Defined at line 30"><span class="token sort_Id">BOOL</span></a></span></span>
    <span class="cons_OpDecl"><button class="modal-open" id="FALSE_35_5" title="Multi-file references" data-urls="#FALSE_152_67 line 152, 170, 176, 181, 184, 218, 229, 235, 260, 403, 404, 412, 420, 422, 425, 433, 434, 438; ../webdsl-ac.stx/#FALSE_186_100 line 186, 204; ../webdsl-actions.stx/#FALSE_122_14 line 122; ../webdsl-entities.stx/#FALSE_112_80 line 112, 116, 214; ../webdsl-modules.stx/#FALSE_41_33 line 41, 76, 82, 105, 116; ../webdsl-native.stx/#FALSE_58_29 line 58; ../webdsl-types.stx/#FALSE_131_55 line 131, 141, 202, 287, 294; ../webdsl-ui.stx/#FALSE_40_43 line 40, 41, 45, 73, 95, 99, 104, 109, 111, 115, 128, 272, 276; ../actions/functions.stx/#FALSE_135_50 line 135, 161, 183; ../entities/annotations.stx/#FALSE_227_76 line 227, 241, 249, 268, 272; ../entities/generated-functions.stx/#FALSE_24_55 line 24, 51; ../types/built-ins.stx/#FALSE_122_63 line 122, 125, 126, 127, 128, 132, 133, 134, 135, 136, 139, 140, 141, 142, 143; ../ui/actions.stx/#FALSE_55_39 line 55, 78; ../ui/template-calls.stx/#FALSE_27_73 line 27, 67"><span class="token sort_Id">FALSE</span></button> <span class="operator">:</span> <span class="cons_SimpleSort"><a href="#BOOL_30_5" id="BOOL_35_13" title="Defined at line 30"><span class="token sort_Id">BOOL</span></a></span></span>

    <span class="cons_OpDecl"><button class="modal-open" id="FUNCTION_ORIGIN_37_5" title="Multi-file references" data-urls="../webdsl-ac.stx/#FUNCTION_ORIGIN_199_25 line 199; ../actions/functions.stx/#FUNCTION_ORIGIN_102_39 line 102, 112; ../ui/actions.stx/#FUNCTION_ORIGIN_56_74 line 56"><span class="token sort_Id">FUNCTION_ORIGIN</span></button><span class="operator">:</span> <span class="keyword">list</span><span class="operator">(</span><span class="cons_SimpleSort"><a href="../../../src-gen/statix/signatures/WebDSL-Core-sig.stx/#FormalArg_11_5" id="FormalArg_37_27" title="Defined at ../../../src-gen/statix/signatures/WebDSL-Core-sig.stx line 11"><span class="token sort_Id">FormalArg</span></a></span><span class="operator">)</span> <span class="operator">-&gt;</span> <span class="cons_SimpleSort"><a href="#ORIGIN_31_5" id="ORIGIN_37_41" title="Defined at line 31"><span class="token sort_Id">ORIGIN</span></a></span></span>
    <span class="cons_OpDecl"><a href="../webdsl-native.stx/#NATIVE_FUNCTION_ORIGIN_87_39" id="NATIVE_FUNCTION_ORIGIN_38_5" title="Referenced at ../webdsl-native.stx line 87, 92, 101, 105"><span class="token sort_Id">NATIVE_FUNCTION_ORIGIN</span></a><span class="operator">:</span> <span class="keyword">list</span><span class="operator">(</span><span class="cons_SimpleSort"><a href="../../../src-gen/statix/signatures/WebDSL-Native-sig.stx/#NativeType_13_5" id="NativeType_38_34" title="Defined at ../../../src-gen/statix/signatures/WebDSL-Native-sig.stx line 13"><span class="token sort_Id">NativeType</span></a></span><span class="operator">)</span> <span class="operator">-&gt;</span> <span class="cons_SimpleSort"><a href="#ORIGIN_31_5" id="ORIGIN_38_49" title="Defined at line 31"><span class="token sort_Id">ORIGIN</span></a></span></span>
    <span class="cons_OpDecl"><a href="../webdsl-built-ins.stx/#BUILTIN_ORIGIN_11_71" id="BUILTIN_ORIGIN_39_5" title="Referenced at ../webdsl-built-ins.stx line 11, 15"><span class="token sort_Id">BUILTIN_ORIGIN</span></a><span class="operator">:</span> <span class="keyword">list</span><span class="operator">(</span><span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_39_26" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">)</span> <span class="operator">-&gt;</span> <span class="cons_SimpleSort"><a href="#ORIGIN_31_5" id="ORIGIN_39_35" title="Defined at line 31"><span class="token sort_Id">ORIGIN</span></a></span></span>
    <span class="cons_OpDecl"><a href="../entities/generated-functions.stx/#PROP_ORIGIN_53_40" id="PROP_ORIGIN_40_5" title="Referenced at ../entities/generated-functions.stx line 53, 54"><span class="token sort_Id">PROP_ORIGIN</span></a><span class="operator">:</span> <span class="cons_SimpleSort"><a href="#ORIGIN_31_5" id="ORIGIN_40_18" title="Defined at line 31"><span class="token sort_Id">ORIGIN</span></a></span></span> <span class="layout">// prop names should be unique. TODO: how about non-unique properties in incorrect programs?</span>
    <span class="cons_OpDecl"><a href="../entities/generated-functions.stx/#GENERATED_ORIGIN_25_34" id="GENERATED_ORIGIN_41_5" title="Referenced at ../entities/generated-functions.stx line 25, 32, 33, 34, 35, 36"><span class="token sort_Id">GENERATED_ORIGIN</span></a><span class="operator">:</span> <span class="cons_IntSort">int</span> <span class="operator">-&gt;</span> <span class="cons_SimpleSort"><a href="#ORIGIN_31_5" id="ORIGIN_41_30" title="Defined at line 31"><span class="token sort_Id">ORIGIN</span></a></span></span>  <span class="layout">// unary identity-derived function</span>

  <span class="keyword">name-resolution</span>
    <span class="keyword">labels</span>
      <span class="cons_Label"><button class="modal-open" id="P_45_7" title="Multi-file references" data-urls="#P_107_23 line 107, 109, 139, 141, 142, 177, 198, 211, 230, 272, 283, 308, 310, 366, 367; ../webdsl-ac.stx/#P_122_25 line 122, 129; ../webdsl-actions.stx/#P_46_23 line 46, 88, 151, 153, 172, 180, 187, 196, 211, 326, 335; ../webdsl-search.stx/#P_76_27 line 76, 82; ../webdsl-services.stx/#P_18_25 line 18; ../webdsl-ui.stx/#P_37_23 line 37, 38, 69, 70, 86, 93, 94, 145, 218, 227, 235, 245, 258, 302; ../actions/functions.stx/#P_24_25 line 24, 29, 34, 100, 110; ../entities/annotations.stx/#P_42_29 line 42, 44, 49, 51, 56, 58, 59, 111, 126, 139; ../ui/actions.stx/#P_47_23 line 47, 50, 149, 159, 168, 179, 193; ../ui/ajax.stx/#P_86_25 line 86; ../ui/attributes.stx/#P_23_14 line 23"><span class="token sort_Id">P</span></button></span>         <span class="layout">// parent edge label for consecutive statements</span>
      <span class="cons_Label"><button class="modal-open" id="F_46_7" title="Multi-file references" data-urls="#F_107_26 line 107, 109, 139, 141, 142, 143, 177, 198, 211, 230, 308, 310; ../webdsl-ac.stx/#F_100_25 line 100, 111, 192; ../webdsl-actions.stx/#F_346_25 line 346; ../webdsl-search.stx/#F_76_30 line 76, 82; ../webdsl-services.stx/#F_15_37 line 15; ../webdsl-ui.stx/#F_34_25 line 34, 64; ../actions/functions.stx/#F_97_33 line 97, 107; ../entities/annotations.stx/#F_42_32 line 42, 44, 49, 51, 56, 58, 59, 60; ../ui/attributes.stx/#F_23_17 line 23"><span class="token sort_Id">F</span></button></span>         <span class="layout">// function edge label for embedding functions, templates and pages in a scope</span>
      <span class="cons_Label"><button class="modal-open" id="EXTEND_47_7" title="Multi-file references" data-urls="#EXTEND_107_31 line 107, 109, 177, 198, 211, 230, 236, 238, 247, 249, 308, 310, 316, 322, 328; ../webdsl-entities.stx/#EXTEND_60_8 line 60, 227, 229; ../webdsl-search.stx/#EXTEND_76_35 line 76, 82; ../actions/functions.stx/#EXTEND_158_27 line 158; ../entities/annotations.stx/#EXTEND_42_35 line 42, 44, 49, 51, 56, 58, 59, 60, 61; ../ui/attributes.stx/#EXTEND_23_22 line 23"><span class="token sort_Id">EXTEND</span></button></span>    <span class="layout">// extend edge label for extending entities</span>
      <span class="cons_Label"><button class="modal-open" id="INHERIT_48_7" title="Multi-file references" data-urls="#INHERIT_107_39 line 107, 109, 177, 198, 211, 230, 236, 238, 247, 249, 308, 310, 316, 328; ../webdsl-entities.stx/#INHERIT_25_29 line 25, 36, 78, 79, 95, 208, 210, 219, 220, 227, 229; ../webdsl-native.stx/#INHERIT_39_27 line 39; ../webdsl-search.stx/#INHERIT_76_43 line 76, 82; ../entities/annotations.stx/#INHERIT_56_43 line 56, 58, 59, 60, 61; ../entities/built-ins.stx/#INHERIT_17_23 line 17, 30, 34; ../types/built-ins.stx/#INHERIT_18_25 line 18, 27; ../ui/attributes.stx/#INHERIT_23_30 line 23"><span class="token sort_Id">INHERIT</span></button></span>   <span class="layout">// inherit edge label for subclasses</span>
      <span class="cons_Label"><button class="modal-open" id="DEF_49_7" title="Multi-file references" data-urls="#DEF_107_52 line 107, 109, 139, 141, 142, 143, 144, 177, 198, 211, 230, 308, 310; ../webdsl-actions.stx/#DEF_20_25 line 20; ../webdsl-entities.stx/#DEF_25_58 line 25, 36, 42, 71, 95; ../webdsl-native.stx/#DEF_39_55 line 39, 52; ../webdsl-search.stx/#DEF_76_56 line 76, 82; ../entities/built-ins.stx/#DEF_16_29 line 16; ../types/built-ins.stx/#DEF_18_53 line 18, 27; ../types/type-extensions.stx/#DEF_17_25 line 17; ../ui/attributes.stx/#DEF_23_43 line 23"><span class="token sort_Id">DEF</span></button></span>       <span class="layout">// definition edge label for embedding top-level definitions in the module scope</span>
      <span class="cons_Label"><button class="modal-open" id="IMPORT_50_7" title="Multi-file references" data-urls="#IMPORT_107_58 line 107, 109, 139, 141, 142, 143, 144, 145, 177, 198, 211, 230, 308, 310; ../webdsl-modules.stx/#IMPORT_17_23 line 17, 26, 43, 80, 94; ../webdsl-search.stx/#IMPORT_76_62 line 76, 82; ../ui/attributes.stx/#IMPORT_23_49 line 23"><span class="token sort_Id">IMPORT</span></button></span>    <span class="layout">// import edge label for importing another module</span>
      <span class="cons_Label"><button class="modal-open" id="IMPORTLIB_51_7" title="Multi-file references" data-urls="#IMPORTLIB_107_67 line 107, 109, 139, 141, 142, 143, 144, 145, 177, 198, 211, 230, 308, 310; ../webdsl-modules.stx/#IMPORTLIB_103_64 line 103; ../webdsl-search.stx/#IMPORTLIB_76_71 line 76, 82; ../ui/attributes.stx/#IMPORTLIB_23_58 line 23"><span class="token sort_Id">IMPORTLIB</span></button></span> <span class="layout">// import edge label for importing statix libraries such as the built-in.app library</span>
      <span class="cons_Label"><button class="modal-open" id="GLOBAL_52_7" title="Multi-file references" data-urls="#GLOBAL_139_63 line 139, 141, 142, 143, 144, 145; ../webdsl-modules.stx/#GLOBAL_17_52 line 17, 26, 43"><span class="token sort_Id">GLOBAL</span></button></span>    <span class="layout">// global edge label for edges from global scope to other modules</span>

  <span class="keyword">relations</span>
    <span class="cons_Label"><a href="#mod_75_6" id="mod_55_5" title="Referenced at line 75, 80, 86"><span class="token sort_Id">mod</span></a></span> <span class="operator">:</span> <span class="keyword">list</span><span class="operator">(</span><span class="cons_StringSort">string</span><span class="operator">)</span> <span class="operator">*</span> <span class="cons_ScopeSort">scope</span>

    <span class="cons_Label"><a href="#type_102_6" id="type_57_5" title="Referenced at line 102, 107"><span class="token sort_Id">type</span></a></span> <span class="operator">:</span> <span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_ScopeSort">scope</span>

    <span class="cons_Label"><a href="#extendscope_135_6" id="extendscope_59_5" title="Referenced at line 135, 139"><span class="token sort_Id">extendscope</span></a></span> <span class="operator">:</span> <span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_ScopeSort">scope</span>

    <span class="cons_Label"><a href="#page_165_6" id="page_61_5" title="Referenced at line 165, 198"><span class="token sort_Id">page</span></a></span>     <span class="operator">:</span> <span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_ScopeSort">scope</span>
    <span class="cons_Label"><a href="#template_159_6" id="template_62_5" title="Referenced at line 159, 177"><span class="token sort_Id">template</span></a></span> <span class="operator">:</span> <span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_ScopeSort">scope</span>
    <span class="cons_Label"><a href="#ac_206_6" id="ac_63_5" title="Referenced at line 206, 211"><span class="token sort_Id">ac</span></a></span>       <span class="operator">:</span> <span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_ScopeSort">scope</span>

    <span class="cons_Label"><button class="modal-open" id="function_65_5" title="Multi-file references" data-urls="#function_226_6 line 226, 230, 236, 247, 267, 272; ../actions/functions.stx/#function_158_11 line 158"><span class="token sort_Id">function</span></button></span> <span class="operator">:</span> <span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#ORIGIN_31_5" id="ORIGIN_65_25" title="Defined at line 31"><span class="token sort_Id">ORIGIN</span></a></span> <span class="operator">*</span> <span class="cons_ScopeSort">scope</span>

    <span class="cons_Label"><button class="modal-open" id="var_67_5" title="Multi-file references" data-urls="#var_278_6 line 278, 283, 303, 308, 316, 322, 328; ../webdsl-ac.stx/#var_89_33 line 89; ../webdsl-actions.stx/#var_88_11 line 88"><span class="token sort_Id">var</span></button></span>      <span class="operator">:</span> <span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_ScopeSort">scope</span>

    <span class="cons_Label"><a href="#typeOf_115_13" id="typeOf_69_5" title="Referenced at line 115, 120, 125, 129"><span class="token sort_Id">typeOf</span></a></span> <span class="operator">:</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_69_14" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span>

<span class="keyword">rules</span> <span class="layout">// module declaration and resolving</span>

  <button class="modal-open" id="declareMod_73_3" title="Multi-file references" data-urls="#declareMod_74_3 line 74; ../webdsl-modules.stx/#declareMod_19_5 line 19, 27, 45"><span class="token sort_Id">declareMod</span></button> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="keyword">list</span><span class="operator">(</span><span class="cons_StringSort">string</span><span class="operator">)</span> <span class="operator">*</span> <span class="cons_ScopeSort">scope</span>
  <a href="#declareMod_73_3" id="declareMod_74_3" title="Defined at line 73"><span class="token sort_Id">declareMod</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_75_23" id="s_74_14" title="Referenced at line 75, 76"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#m_75_10" id="m_74_17" title="Referenced at line 75, 76"><span class="token sort_Id">m</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#s_mod_75_13" id="s_mod_74_20" title="Referenced at line 75"><span class="token sort_Id">s_mod</span></a></span><span class="operator">)</span> <span class="operator">:-</span>
    <span class="operator">!</span><span class="cons_Label"><a href="#mod_55_5" id="mod_75_6" title="Defined at line 55"><span class="token sort_Id">mod</span></a></span><span class="operator">[</span><span class="cons_Var"><a href="#m_74_17" id="m_75_10" title="Defined at line 74"><span class="token sort_Id">m</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#s_mod_74_20" id="s_mod_75_13" title="Defined at line 74"><span class="token sort_Id">s_mod</span></a></span><span class="operator">]</span> <span class="keyword">in</span> <span class="cons_Var"><a href="#s_74_14" id="s_75_23" title="Defined at line 74"><span class="token sort_Id">s</span></a></span><span class="operator">,</span>
    <a href="#resolveMod_78_3" id="resolveMod_76_5" title="Defined at line 78"><span class="token sort_Id">resolveMod</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_74_14" id="s_76_16" title="Defined at line 74"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#m_74_17" id="m_76_19" title="Defined at line 74"><span class="token sort_Id">m</span></a></span><span class="operator">)</span> <span class="operator">==</span> <span class="operator">[_]</span> <span class="operator">|</span> <span class="keyword">error</span> <span class="operator">$[</span><span class="cons_Text">Module </span><span class="operator">[</span><span class="cons_Var"><a href="#m_74_17" id="m_76_47" title="Defined at line 74"><span class="token sort_Id">m</span></a></span><span class="operator">]</span><span class="cons_Text"> is already declared</span><span class="operator">].</span>

  <button class="modal-open" id="resolveMod_78_3" title="Multi-file references" data-urls="#resolveMod_76_5 line 76, 79; ../webdsl-modules.stx/#resolveMod_72_5 line 72, 73, 99, 100"><span class="token sort_Id">resolveMod</span></button> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="keyword">list</span><span class="operator">(</span><span class="cons_StringSort">string</span><span class="operator">)</span> <span class="operator">-&gt;</span> <span class="keyword">list</span><span class="operator">((</span><span class="cons_PathSort">path</span> <span class="operator">*</span> <span class="operator">(</span><span class="keyword">list</span><span class="operator">(</span><span class="cons_StringSort">string</span><span class="operator">)</span> <span class="operator">*</span> <span class="cons_ScopeSort">scope</span><span class="operator">)))</span>
  <a href="#resolveMod_78_3" id="resolveMod_79_3" title="Defined at line 78"><span class="token sort_Id">resolveMod</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_82_18" id="s_79_14" title="Referenced at line 82"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#m_81_34" id="m_79_17" title="Referenced at line 81"><span class="token sort_Id">m</span></a></span><span class="operator">)</span> <span class="operator">=</span> <span class="cons_Var"><a href="#ss_82_24" id="ss_79_22" title="Referenced at line 82"><span class="token sort_Id">ss</span></a></span> <span class="operator">:-</span>
    <span class="keyword">query</span> <span class="cons_Label"><a href="#mod_55_5" id="mod_80_11" title="Defined at line 55"><span class="token sort_Id">mod</span></a></span> <span class="keyword">filter</span> <span class="token sort_Id">e</span>
              <span class="keyword">and</span> <span class="operator">{</span> <span class="cons_Var"><a href="#m'_81_27" id="m'_81_21" title="Referenced at line 81"><span class="token sort_Id">m'</span></a></span> <span class="operator">:-</span> <span class="cons_Var"><a href="#m'_81_21" id="m'_81_27" title="Defined at line 81"><span class="token sort_Id">m'</span></a></span> <span class="operator">==</span> <span class="operator">(</span><span class="cons_Var"><a href="#m_79_17" id="m_81_34" title="Defined at line 79"><span class="token sort_Id">m</span></a></span><span class="operator">,</span> <span class="operator">_)</span> <span class="operator">}</span>
              <span class="keyword">in</span> <span class="cons_Var"><a href="#s_79_14" id="s_82_18" title="Defined at line 79"><span class="token sort_Id">s</span></a></span> <span class="operator">|-&gt;</span> <span class="cons_Var"><a href="#ss_79_22" id="ss_82_24" title="Defined at line 79"><span class="token sort_Id">ss</span></a></span><span class="operator">.</span>

  <button class="modal-open" id="resolveModWildcard_84_3" title="Multi-file references" data-urls="#resolveModWildcard_85_3 line 85; ../webdsl-modules.stx/#resolveModWildcard_85_34 line 85"><span class="token sort_Id">resolveModWildcard</span></button> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="keyword">list</span><span class="operator">(</span><span class="cons_StringSort">string</span><span class="operator">)</span> <span class="operator">-&gt;</span> <span class="keyword">list</span><span class="operator">((</span><span class="cons_PathSort">path</span> <span class="operator">*</span> <span class="operator">(</span><span class="keyword">list</span><span class="operator">(</span><span class="cons_StringSort">string</span><span class="operator">)</span> <span class="operator">*</span> <span class="cons_ScopeSort">scope</span><span class="operator">)))</span>
  <a href="#resolveModWildcard_84_3" id="resolveModWildcard_85_3" title="Defined at line 84"><span class="token sort_Id">resolveModWildcard</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_88_18" id="s_85_22" title="Referenced at line 88"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#names_87_36" id="names_85_25" title="Referenced at line 87"><span class="token sort_Id">names</span></a></span><span class="operator">)</span> <span class="operator">=</span> <span class="layout">/*modsOf(*/</span> <span class="cons_Var"><a href="#ss_88_24" id="ss_85_46" title="Referenced at line 88"><span class="token sort_Id">ss</span></a></span> <span class="layout">/*)*/</span> <span class="operator">:-</span>
    <span class="keyword">query</span> <span class="cons_Label"><a href="#mod_55_5" id="mod_86_11" title="Defined at line 55"><span class="token sort_Id">mod</span></a></span> <span class="keyword">filter</span> <span class="token sort_Id">e</span>
              <span class="keyword">and</span> <span class="operator">{</span> <span class="cons_Var"><a href="#m'_87_43" id="m'_87_21" title="Referenced at line 87"><span class="token sort_Id">m'</span></a></span> <span class="operator">:-</span> <a href="#isPrefix_90_3" id="isPrefix_87_27" title="Defined at line 90"><span class="token sort_Id">isPrefix</span></a><span class="operator">(</span><span class="cons_Var"><a href="#names_85_25" id="names_87_36" title="Defined at line 85"><span class="token sort_Id">names</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#m'_87_21" id="m'_87_43" title="Defined at line 87"><span class="token sort_Id">m'</span></a></span><span class="operator">)</span> <span class="operator">}</span>
              <span class="keyword">in</span> <span class="cons_Var"><a href="#s_85_22" id="s_88_18" title="Defined at line 85"><span class="token sort_Id">s</span></a></span> <span class="operator">|-&gt;</span> <span class="cons_Var"><a href="#ss_85_46" id="ss_88_24" title="Defined at line 85"><span class="token sort_Id">ss</span></a></span><span class="operator">.</span>

  <a href="#isPrefix_87_27" id="isPrefix_90_3" title="Referenced at line 87, 91"><span class="token sort_Id">isPrefix</span></a> <span class="operator">:</span> <span class="keyword">list</span><span class="operator">(</span><span class="cons_StringSort">string</span><span class="operator">)</span> <span class="operator">*</span> <span class="operator">(</span><span class="keyword">list</span><span class="operator">(</span><span class="cons_StringSort">string</span><span class="operator">)</span> <span class="operator">*</span> <span class="cons_ScopeSort">scope</span><span class="operator">)</span>
  <a href="#isPrefix_90_3" id="isPrefix_91_3" title="Defined at line 90"><span class="token sort_Id">isPrefix</span></a><span class="operator">(</span><span class="cons_Var"><a href="#names_91_53" id="names_91_12" title="Referenced at line 91"><span class="token sort_Id">names</span></a></span><span class="operator">,</span> <span class="operator">(</span><span class="cons_Var"><a href="#names'_91_60" id="names'_91_20" title="Referenced at line 91"><span class="token sort_Id">names'</span></a></span><span class="operator">,</span> <span class="operator">_))</span> <span class="operator">:-</span> <a href="#isPrefix_internal_93_3" id="isPrefix_internal_91_35" title="Defined at line 93"><span class="token sort_Id">isPrefix_internal</span></a><span class="operator">(</span><span class="cons_Var"><a href="#names_91_12" id="names_91_53" title="Defined at line 91"><span class="token sort_Id">names</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#names'_91_20" id="names'_91_60" title="Defined at line 91"><span class="token sort_Id">names'</span></a></span><span class="operator">).</span>

  <a href="#isPrefix_internal_91_35" id="isPrefix_internal_93_3" title="Referenced at line 91, 94, 95, 96"><span class="token sort_Id">isPrefix_internal</span></a> <span class="operator">:</span> <span class="keyword">list</span><span class="operator">(</span><span class="cons_StringSort">string</span><span class="operator">)</span> <span class="operator">*</span> <span class="keyword">list</span><span class="operator">(</span><span class="cons_StringSort">string</span><span class="operator">)</span>
  <a href="#isPrefix_internal_93_3" id="isPrefix_internal_94_3" title="Defined at line 93"><span class="token sort_Id">isPrefix_internal</span></a><span class="operator">([],</span> <span class="operator">_).</span>
  <a href="#isPrefix_internal_93_3" id="isPrefix_internal_95_3" title="Defined at line 93"><span class="token sort_Id">isPrefix_internal</span></a><span class="operator">([</span><span class="cons_Var"><span id="x_95_22" title="Not referenced"><span class="token sort_Id">x</span></span></span> <span class="operator">|</span> <span class="cons_Var"><a href="#xs_95_62" id="xs_95_26" title="Referenced at line 95"><span class="token sort_Id">xs</span></a></span><span class="operator">],</span> <span class="operator">[</span><span class="cons_Var">x</span> <span class="operator">|</span> <span class="cons_Var"><a href="#ys_95_66" id="ys_95_36" title="Referenced at line 95"><span class="token sort_Id">ys</span></a></span><span class="operator">])</span> <span class="operator">:-</span> <a href="#isPrefix_internal_93_3" id="isPrefix_internal_95_44" title="Defined at line 93"><span class="token sort_Id">isPrefix_internal</span></a><span class="operator">(</span><span class="cons_Var"><a href="#xs_95_26" id="xs_95_62" title="Defined at line 95"><span class="token sort_Id">xs</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#ys_95_36" id="ys_95_66" title="Defined at line 95"><span class="token sort_Id">ys</span></a></span><span class="operator">).</span>
  <a href="#isPrefix_internal_93_3" id="isPrefix_internal_96_3" title="Defined at line 93"><span class="token sort_Id">isPrefix_internal</span></a><span class="operator">(_,</span> <span class="operator">_)</span> <span class="operator">:-</span> <span class="keyword">false</span><span class="operator">.</span>

<span class="keyword">rules</span> <span class="layout">// type declaration and resolving</span>

  <button class="modal-open" id="declareType_100_3" title="Multi-file references" data-urls="#declareType_101_3 line 101; ../webdsl-ac.stx/#declareType_29_5 line 29; ../webdsl-entities.stx/#declareType_52_5 line 52, 98; ../webdsl-native.stx/#declareType_42_5 line 42; ../entities/built-ins.stx/#declareType_18_5 line 18, 19, 31, 35; ../types/built-ins.stx/#declareType_21_5 line 21, 31"><span class="token sort_Id">declareType</span></button> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_100_34" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span>
  <a href="#declareType_100_3" id="declareType_101_3" title="Defined at line 100"><span class="token sort_Id">declareType</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_102_33" id="s_101_15" title="Referenced at line 102, 103"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#name_102_11" id="name_101_18" title="Referenced at line 102, 103"><span class="token sort_Id">name</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#t_102_26" id="t_101_24" title="Referenced at line 102, 103"><span class="token sort_Id">t</span></a></span><span class="operator">)</span> <span class="operator">:-</span>
    <span class="operator">!</span><span class="cons_Label"><a href="#type_57_5" id="type_102_6" title="Defined at line 57"><span class="token sort_Id">type</span></a></span><span class="operator">[</span><span class="cons_Var"><a href="#name_101_18" id="name_102_11" title="Defined at line 101"><span class="token sort_Id">name</span></a></span><span class="operator">,</span> <a href="#withType_113_3" id="withType_102_17" title="Defined at line 113"><span class="token sort_Id">withType</span></a><span class="operator">(</span><span class="cons_Var"><a href="#t_101_24" id="t_102_26" title="Defined at line 101"><span class="token sort_Id">t</span></a></span><span class="operator">)]</span> <span class="keyword">in</span> <span class="cons_Var"><a href="#s_101_15" id="s_102_33" title="Defined at line 101"><span class="token sort_Id">s</span></a></span><span class="operator">,</span>
    <a href="#resolveType_105_3" id="resolveType_103_5" title="Defined at line 105"><span class="token sort_Id">resolveType</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_101_15" id="s_103_17" title="Defined at line 101"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#name_101_18" id="name_103_20" title="Defined at line 101"><span class="token sort_Id">name</span></a></span><span class="operator">)</span> <span class="operator">==</span> <span class="operator">[(_,</span> <span class="operator">(_,</span> <span class="cons_Var"><a href="#t_101_24" id="t_103_38" title="Defined at line 101"><span class="token sort_Id">t</span></a></span><span class="operator">))]</span> <span class="operator">|</span> <span class="keyword">error</span> <span class="operator">$[</span><span class="cons_Text">Type </span><span class="operator">[</span><span class="cons_Var"><a href="#name_101_18" id="name_103_59" title="Defined at line 101"><span class="token sort_Id">name</span></a></span><span class="operator">]</span><span class="cons_Text"> is defined multiple times</span><span class="operator">]</span> <span class="operator">@</span><span class="cons_Var"><a href="#name_101_18" id="name_103_93" title="Defined at line 101"><span class="token sort_Id">name</span></a></span><span class="operator">.</span>

  <button class="modal-open" id="resolveType_105_3" title="Multi-file references" data-urls="#resolveType_103_5 line 103, 106; ../webdsl-ac.stx/#resolveType_268_5 line 268, 273; ../webdsl-entities.stx/#resolveType_24_5 line 24, 70; ../webdsl-native.stx/#resolveType_27_5 line 27, 51; ../webdsl-types.stx/#resolveType_220_5 line 220, 225, 230, 233; ../entities/annotations.stx/#resolveType_174_5 line 174; ../entities/generated-functions.stx/#resolveType_20_5 line 20, 46; ../types/built-ins.stx/#resolveType_36_5 line 36"><span class="token sort_Id">resolveType</span></button> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_StringSort">string</span> <span class="operator">-&gt;</span> <span class="keyword">list</span><span class="operator">((</span><span class="cons_PathSort">path</span> <span class="operator">*</span> <span class="operator">(</span><span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_105_58" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">)))</span>
  <a href="#resolveType_105_3" id="resolveType_106_3" title="Defined at line 105"><span class="token sort_Id">resolveType</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_111_19" id="s_106_15" title="Referenced at line 111"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#name_108_35" id="name_106_18" title="Referenced at line 108"><span class="token sort_Id">name</span></a></span><span class="operator">)</span> <span class="operator">=</span> <a href="#typesOf_117_3" id="typesOf_106_26" title="Defined at line 117"><span class="token sort_Id">typesOf</span></a><span class="operator">(</span><span class="cons_Var"><a href="#ts_111_25" id="ts_106_34" title="Referenced at line 111"><span class="token sort_Id">ts</span></a></span><span class="operator">)</span> <span class="operator">:-</span>
    <span class="keyword">query</span> <span class="cons_Label"><a href="#type_57_5" id="type_107_11" title="Defined at line 57"><span class="token sort_Id">type</span></a></span> <span class="keyword">filter</span> <span class="cons_Closure"><span class="cons_Label"><a href="#P_45_7" id="P_107_23" title="Defined at line 45"><span class="token sort_Id">P</span></a></span>*</span> <span class="cons_Closure"><span class="cons_Label"><a href="#F_46_7" id="F_107_26" title="Defined at line 46"><span class="token sort_Id">F</span></a></span>*</span> <span class="operator">((</span><span class="cons_Label"><a href="#EXTEND_47_7" id="EXTEND_107_31" title="Defined at line 47"><span class="token sort_Id">EXTEND</span></a></span><span class="operator">?</span> <span class="cons_Closure"><span class="cons_Label"><a href="#INHERIT_48_7" id="INHERIT_107_39" title="Defined at line 48"><span class="token sort_Id">INHERIT</span></a></span>*</span><span class="operator">)</span> <span class="operator">|</span> <span class="operator">(</span><span class="cons_Label"><a href="#DEF_49_7" id="DEF_107_52" title="Defined at line 49"><span class="token sort_Id">DEF</span></a></span><span class="operator">?</span> <span class="operator">(</span><span class="cons_Label"><a href="#IMPORT_50_7" id="IMPORT_107_58" title="Defined at line 50"><span class="token sort_Id">IMPORT</span></a></span> <span class="operator">|</span> <span class="cons_Label"><a href="#IMPORTLIB_51_7" id="IMPORTLIB_107_67" title="Defined at line 51"><span class="token sort_Id">IMPORTLIB</span></a></span><span class="operator">)?))</span>
               <span class="keyword">and</span> <span class="operator">{</span> <span class="cons_Var"><a href="#e'_108_28" id="e'_108_22" title="Referenced at line 108"><span class="token sort_Id">e'</span></a></span> <span class="operator">:-</span> <span class="cons_Var"><a href="#e'_108_22" id="e'_108_28" title="Defined at line 108"><span class="token sort_Id">e'</span></a></span> <span class="operator">==</span> <span class="operator">(</span><span class="cons_Var"><a href="#name_106_18" id="name_108_35" title="Defined at line 106"><span class="token sort_Id">name</span></a></span><span class="operator">,</span> <span class="operator">_)</span> <span class="operator">}</span>
               <span class="keyword">min</span> <span class="operator">$</span> <span class="operator">&lt;</span> <span class="cons_Label"><a href="#IMPORTLIB_51_7" id="IMPORTLIB_109_24" title="Defined at line 51"><span class="token sort_Id">IMPORTLIB</span></a></span><span class="operator">,</span> <span class="cons_Label"><a href="#P_45_7" id="P_109_35" title="Defined at line 45"><span class="token sort_Id">P</span></a></span> <span class="operator">&lt;</span> <span class="cons_Label"><a href="#IMPORTLIB_51_7" id="IMPORTLIB_109_39" title="Defined at line 51"><span class="token sort_Id">IMPORTLIB</span></a></span><span class="operator">,</span> <span class="cons_Label"><a href="#F_46_7" id="F_109_50" title="Defined at line 46"><span class="token sort_Id">F</span></a></span> <span class="operator">&lt;</span> <span class="cons_Label"><a href="#IMPORTLIB_51_7" id="IMPORTLIB_109_54" title="Defined at line 51"><span class="token sort_Id">IMPORTLIB</span></a></span><span class="operator">,</span> <span class="cons_Label"><a href="#EXTEND_47_7" id="EXTEND_109_65" title="Defined at line 47"><span class="token sort_Id">EXTEND</span></a></span> <span class="operator">&lt;</span> <span class="cons_Label"><a href="#IMPORTLIB_51_7" id="IMPORTLIB_109_74" title="Defined at line 51"><span class="token sort_Id">IMPORTLIB</span></a></span><span class="operator">,</span> <span class="cons_Label"><a href="#INHERIT_48_7" id="INHERIT_109_85" title="Defined at line 48"><span class="token sort_Id">INHERIT</span></a></span> <span class="operator">&lt;</span> <span class="cons_Label"><a href="#IMPORTLIB_51_7" id="IMPORTLIB_109_95" title="Defined at line 51"><span class="token sort_Id">IMPORTLIB</span></a></span><span class="operator">,</span> <span class="cons_Label"><a href="#DEF_49_7" id="DEF_109_106" title="Defined at line 49"><span class="token sort_Id">DEF</span></a></span> <span class="operator">&lt;</span> <span class="cons_Label"><a href="#IMPORTLIB_51_7" id="IMPORTLIB_109_112" title="Defined at line 51"><span class="token sort_Id">IMPORTLIB</span></a></span><span class="operator">,</span> <span class="cons_Label"><a href="#IMPORT_50_7" id="IMPORT_109_123" title="Defined at line 50"><span class="token sort_Id">IMPORT</span></a></span> <span class="operator">&lt;</span> <span class="cons_Label"><a href="#IMPORTLIB_51_7" id="IMPORTLIB_109_132" title="Defined at line 51"><span class="token sort_Id">IMPORTLIB</span></a></span>
               <span class="keyword">and</span> <span class="keyword">true</span>
               <span class="keyword">in</span> <span class="cons_Var"><a href="#s_106_15" id="s_111_19" title="Defined at line 106"><span class="token sort_Id">s</span></a></span> <span class="operator">|-&gt;</span> <span class="cons_Var"><a href="#ts_106_34" id="ts_111_25" title="Defined at line 106"><span class="token sort_Id">ts</span></a></span><span class="operator">.</span>

  <button class="modal-open" id="withType_113_3" title="Multi-file references" data-urls="#withType_102_17 line 102, 114, 159, 165, 206, 225, 267, 278, 303; ../webdsl-ac.stx/#withType_89_53 line 89"><span class="token sort_Id">withType</span></button> <span class="operator">:</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_113_14" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span> <span class="operator">-&gt;</span> <span class="cons_ScopeSort">scope</span>
  <a href="#withType_113_3" id="withType_114_3" title="Defined at line 113"><span class="token sort_Id">withType</span></a><span class="operator">(</span><span class="cons_Var"><a href="#t_115_20" id="t_114_12" title="Referenced at line 115"><span class="token sort_Id">t</span></a></span><span class="operator">)</span> <span class="operator">=</span> <span class="cons_Var"><a href="#s_115_9" id="s_114_17" title="Referenced at line 115"><span class="token sort_Id">s</span></a></span> <span class="operator">:-</span>
    <span class="keyword">new</span> <span class="cons_Var"><a href="#s_114_17" id="s_115_9" title="Defined at line 114"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="operator">!</span><span class="cons_Label"><a href="#typeOf_69_5" id="typeOf_115_13" title="Defined at line 69"><span class="token sort_Id">typeOf</span></a></span><span class="operator">[</span><span class="cons_Var"><a href="#t_114_12" id="t_115_20" title="Defined at line 114"><span class="token sort_Id">t</span></a></span><span class="operator">]</span> <span class="keyword">in</span> <span class="cons_Var"><a href="#s_114_17" id="s_115_26" title="Defined at line 114"><span class="token sort_Id">s</span></a></span><span class="operator">.</span>

  <a href="#typesOf_106_26" id="typesOf_117_3" title="Referenced at line 106, 176, 197, 210, 286, 307, 315, 321, 327"><span class="token sort_Id">typesOf</span></a> <span class="keyword">maps</span> <a href="#typeOf_118_3" id="typeOf_117_16" title="Defined at line 118"><span class="token sort_Id">typeOf</span></a><span class="operator">(</span><span class="keyword">list</span><span class="operator">(*))</span> <span class="operator">=</span> <span class="keyword">list</span><span class="operator">(*)</span>
  <a href="#typeOf_117_16" id="typeOf_118_3" title="Referenced at line 117, 119"><span class="token sort_Id">typeOf</span></a> <span class="operator">:</span> <span class="operator">(</span><span class="cons_PathSort">path</span> <span class="operator">*</span> <span class="operator">(</span><span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_ScopeSort">scope</span><span class="operator">))</span> <span class="operator">-&gt;</span> <span class="operator">(</span><span class="cons_PathSort">path</span> <span class="operator">*</span> <span class="operator">(</span><span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_118_59" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">))</span>
  <a href="#typeOf_118_3" id="typeOf_119_3" title="Defined at line 118"><span class="token sort_Id">typeOf</span></a><span class="operator">((</span><span class="cons_Var"><span id="p_119_11" title="Not referenced"><span class="token sort_Id">p</span></span></span><span class="operator">,</span> <span class="operator">(</span><span class="cons_Var"><span id="x_119_15" title="Not referenced"><span class="token sort_Id">x</span></span></span><span class="operator">,</span> <span class="cons_Var"><a href="#s_120_30" id="s_119_18" title="Referenced at line 120"><span class="token sort_Id">s</span></a></span><span class="operator">)))</span> <span class="operator">=</span> <span class="operator">(</span><span class="cons_Var">p</span><span class="operator">,</span> <span class="operator">(</span><span class="cons_Var">x</span><span class="operator">,</span> <span class="cons_Var"><a href="#t_120_41" id="t_119_33" title="Referenced at line 120"><span class="token sort_Id">t</span></a></span><span class="operator">))</span> <span class="operator">:-</span>
    <span class="keyword">query</span> <span class="cons_Label"><a href="#typeOf_69_5" id="typeOf_120_11" title="Defined at line 69"><span class="token sort_Id">typeOf</span></a></span> <span class="keyword">filter</span> <span class="token sort_Id">e</span> <span class="keyword">in</span> <span class="cons_Var"><a href="#s_119_18" id="s_120_30" title="Defined at line 119"><span class="token sort_Id">s</span></a></span> <span class="operator">|-&gt;</span> <span class="operator">[(_,</span> <span class="cons_Var"><a href="#t_119_33" id="t_120_41" title="Defined at line 119"><span class="token sort_Id">t</span></a></span><span class="operator">)].</span>

  <button class="modal-open" id="typesOfStripOrigin_122_3" title="Multi-file references" data-urls="#typesOfStripOrigin_229_49 line 229, 235, 246, 271; ../actions/functions.stx/#typesOfStripOrigin_161_52 line 161"><span class="token sort_Id">typesOfStripOrigin</span></button> <span class="keyword">maps</span> <a href="#typeOfStripOrigin_123_3" id="typeOfStripOrigin_122_27" title="Defined at line 123"><span class="token sort_Id">typeOfStripOrigin</span></a><span class="operator">(</span><span class="keyword">list</span><span class="operator">(*))</span> <span class="operator">=</span> <span class="keyword">list</span><span class="operator">(*)</span>
  <a href="#typeOfStripOrigin_122_27" id="typeOfStripOrigin_123_3" title="Referenced at line 122, 124"><span class="token sort_Id">typeOfStripOrigin</span></a> <span class="operator">:</span> <span class="operator">(</span><span class="cons_PathSort">path</span> <span class="operator">*</span> <span class="operator">(</span><span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#ORIGIN_31_5" id="ORIGIN_123_41" title="Defined at line 31"><span class="token sort_Id">ORIGIN</span></a></span> <span class="operator">*</span> <span class="cons_ScopeSort">scope</span><span class="operator">))</span> <span class="operator">-&gt;</span> <span class="operator">(</span><span class="cons_PathSort">path</span> <span class="operator">*</span> <span class="operator">(</span><span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_123_79" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">))</span>
  <a href="#typeOfStripOrigin_123_3" id="typeOfStripOrigin_124_3" title="Defined at line 123"><span class="token sort_Id">typeOfStripOrigin</span></a><span class="operator">((</span><span class="cons_Var">p</span><span class="operator">,</span> <span class="operator">(</span><span class="cons_Var">x</span><span class="operator">,</span> <span class="operator">_,</span> <span class="cons_Var"><a href="#s_125_30" id="s_124_32" title="Referenced at line 125"><span class="token sort_Id">s</span></a></span><span class="operator">)))</span> <span class="operator">=</span> <span class="operator">(</span><span class="cons_Var"><span id="p_124_40" title="Not referenced"><span class="token sort_Id">p</span></span></span><span class="operator">,</span> <span class="operator">(</span><span class="cons_Var"><span id="x_124_44" title="Not referenced"><span class="token sort_Id">x</span></span></span><span class="operator">,</span> <span class="cons_Var"><a href="#t_125_41" id="t_124_47" title="Referenced at line 125"><span class="token sort_Id">t</span></a></span><span class="operator">))</span> <span class="operator">:-</span>
    <span class="keyword">query</span> <span class="cons_Label"><a href="#typeOf_69_5" id="typeOf_125_11" title="Defined at line 69"><span class="token sort_Id">typeOf</span></a></span> <span class="keyword">filter</span> <span class="token sort_Id">e</span> <span class="keyword">in</span> <span class="cons_Var"><a href="#s_124_32" id="s_125_30" title="Defined at line 124"><span class="token sort_Id">s</span></a></span> <span class="operator">|-&gt;</span> <span class="operator">[(_,</span> <span class="cons_Var"><a href="#t_124_47" id="t_125_41" title="Defined at line 124"><span class="token sort_Id">t</span></a></span><span class="operator">)].</span>

  <a href="#simpleTypeOf_128_3" id="simpleTypeOf_127_3" title="Referenced at line 128, 240, 241, 251, 252"><span class="token sort_Id">simpleTypeOf</span></a> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">-&gt;</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_127_27" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span>
  <a href="#simpleTypeOf_127_3" id="simpleTypeOf_128_3" title="Defined at line 127"><span class="token sort_Id">simpleTypeOf</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_129_30" id="s_128_16" title="Referenced at line 129"><span class="token sort_Id">s</span></a></span><span class="operator">)</span> <span class="operator">=</span> <span class="cons_Var"><a href="#t_129_41" id="t_128_21" title="Referenced at line 129"><span class="token sort_Id">t</span></a></span> <span class="operator">:-</span>
    <span class="keyword">query</span> <span class="cons_Label"><a href="#typeOf_69_5" id="typeOf_129_11" title="Defined at line 69"><span class="token sort_Id">typeOf</span></a></span> <span class="keyword">filter</span> <span class="token sort_Id">e</span> <span class="keyword">in</span> <span class="cons_Var"><a href="#s_128_16" id="s_129_30" title="Defined at line 128"><span class="token sort_Id">s</span></a></span> <span class="operator">|-&gt;</span> <span class="operator">[(_,</span> <span class="cons_Var"><a href="#t_128_21" id="t_129_41" title="Defined at line 128"><span class="token sort_Id">t</span></a></span><span class="operator">)].</span>

<span class="keyword">rules</span> <span class="layout">// extend entity declaration</span>

  <button class="modal-open" id="declareExtendScope_133_3" title="Multi-file references" data-urls="#declareExtendScope_134_3 line 134; ../webdsl-ac.stx/#declareExtendScope_27_5 line 27, 85; ../webdsl-entities.stx/#declareExtendScope_49_5 line 49, 72; ../webdsl-native.stx/#declareExtendScope_40_5 line 40, 53; ../types/built-ins.stx/#declareExtendScope_19_5 line 19, 29, 121, 124, 130, 131, 138; ../types/type-extensions.stx/#declareExtendScope_18_5 line 18"><span class="token sort_Id">declareExtendScope</span></button> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_ScopeSort">scope</span>
  <a href="#declareExtendScope_133_3" id="declareExtendScope_134_3" title="Defined at line 133"><span class="token sort_Id">declareExtendScope</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_135_34" id="s_134_22" title="Referenced at line 135"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#e_135_18" id="e_134_25" title="Referenced at line 135"><span class="token sort_Id">e</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#s_extend_135_21" id="s_extend_134_28" title="Referenced at line 135"><span class="token sort_Id">s_extend</span></a></span><span class="operator">)</span> <span class="operator">:-</span>
    <span class="operator">!</span><span class="cons_Label"><a href="#extendscope_59_5" id="extendscope_135_6" title="Defined at line 59"><span class="token sort_Id">extendscope</span></a></span><span class="operator">[</span><span class="cons_Var"><a href="#e_134_25" id="e_135_18" title="Defined at line 134"><span class="token sort_Id">e</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#s_extend_134_28" id="s_extend_135_21" title="Defined at line 134"><span class="token sort_Id">s_extend</span></a></span><span class="operator">]</span> <span class="keyword">in</span> <span class="cons_Var"><a href="#s_134_22" id="s_135_34" title="Defined at line 134"><span class="token sort_Id">s</span></a></span><span class="operator">.</span>

  <button class="modal-open" id="resolveExtendScope_137_3" title="Multi-file references" data-urls="#resolveExtendScope_138_3 line 138; ../webdsl-ac.stx/#resolveExtendScope_28_18 line 28, 86; ../webdsl-entities.stx/#resolveExtendScope_50_18 line 50, 73; ../webdsl-native.stx/#resolveExtendScope_41_18 line 41, 54; ../types/built-ins.stx/#resolveExtendScope_20_18 line 20, 30; ../types/type-extensions.stx/#resolveExtendScope_19_18 line 19"><span class="token sort_Id">resolveExtendScope</span></button> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_StringSort">string</span> <span class="operator">-&gt;</span> <span class="keyword">list</span><span class="operator">((</span><span class="cons_PathSort">path</span> <span class="operator">*</span> <span class="operator">(</span><span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_ScopeSort">scope</span><span class="operator">)))</span>
  <a href="#resolveExtendScope_137_3" id="resolveExtendScope_138_3" title="Defined at line 137"><span class="token sort_Id">resolveExtendScope</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_147_26" id="s_138_22" title="Referenced at line 147"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#x_140_42" id="x_138_25" title="Referenced at line 140"><span class="token sort_Id">x</span></a></span><span class="operator">)</span> <span class="operator">=</span> <span class="cons_Var"><a href="#ps_147_32" id="ps_138_30" title="Referenced at line 147"><span class="token sort_Id">ps</span></a></span> <span class="operator">:-</span>
    <span class="keyword">query</span> <span class="cons_Label"><a href="#extendscope_59_5" id="extendscope_139_11" title="Defined at line 59"><span class="token sort_Id">extendscope</span></a></span> <span class="keyword">filter</span> <span class="cons_Closure"><span class="cons_Label"><a href="#P_45_7" id="P_139_30" title="Defined at line 45"><span class="token sort_Id">P</span></a></span>*</span> <span class="cons_Closure"><span class="cons_Label"><a href="#F_46_7" id="F_139_33" title="Defined at line 46"><span class="token sort_Id">F</span></a></span>*</span> <span class="cons_Label"><a href="#DEF_49_7" id="DEF_139_36" title="Defined at line 49"><span class="token sort_Id">DEF</span></a></span><span class="operator">?</span> <span class="operator">(</span><span class="cons_Label"><a href="#IMPORT_50_7" id="IMPORT_139_42" title="Defined at line 50"><span class="token sort_Id">IMPORT</span></a></span> <span class="operator">|</span> <span class="cons_Label"><a href="#IMPORTLIB_51_7" id="IMPORTLIB_139_51" title="Defined at line 51"><span class="token sort_Id">IMPORTLIB</span></a></span><span class="operator">)?</span> <span class="cons_Label"><a href="#GLOBAL_52_7" id="GLOBAL_139_63" title="Defined at line 52"><span class="token sort_Id">GLOBAL</span></a></span><span class="operator">?</span>
                      <span class="keyword">and</span> <span class="operator">{</span> <span class="cons_Var"><a href="#e'_140_35" id="e'_140_29" title="Referenced at line 140"><span class="token sort_Id">e'</span></a></span> <span class="operator">:-</span> <span class="cons_Var"><a href="#e'_140_29" id="e'_140_35" title="Defined at line 140"><span class="token sort_Id">e'</span></a></span> <span class="operator">==</span> <span class="operator">(</span><span class="cons_Var"><a href="#x_138_25" id="x_140_42" title="Defined at line 138"><span class="token sort_Id">x</span></a></span><span class="operator">,</span> <span class="operator">_)</span> <span class="operator">}</span>
                      <span class="keyword">min</span> <span class="operator">$</span> <span class="operator">&lt;</span> <span class="cons_Label"><a href="#P_45_7" id="P_141_31" title="Defined at line 45"><span class="token sort_Id">P</span></a></span><span class="operator">,</span> <span class="operator">$</span> <span class="operator">&lt;</span> <span class="cons_Label"><a href="#F_46_7" id="F_141_38" title="Defined at line 46"><span class="token sort_Id">F</span></a></span><span class="operator">,</span> <span class="operator">$</span> <span class="operator">&lt;</span> <span class="cons_Label"><a href="#DEF_49_7" id="DEF_141_45" title="Defined at line 49"><span class="token sort_Id">DEF</span></a></span><span class="operator">,</span> <span class="operator">$</span> <span class="operator">&lt;</span> <span class="cons_Label"><a href="#IMPORT_50_7" id="IMPORT_141_54" title="Defined at line 50"><span class="token sort_Id">IMPORT</span></a></span><span class="operator">,</span> <span class="operator">$</span> <span class="operator">&lt;</span> <span class="cons_Label"><a href="#IMPORTLIB_51_7" id="IMPORTLIB_141_66" title="Defined at line 51"><span class="token sort_Id">IMPORTLIB</span></a></span><span class="operator">,</span> <span class="operator">$</span> <span class="operator">&lt;</span> <span class="cons_Label"><a href="#GLOBAL_52_7" id="GLOBAL_141_81" title="Defined at line 52"><span class="token sort_Id">GLOBAL</span></a></span><span class="operator">,</span>
                          <span class="cons_Label"><a href="#P_45_7" id="P_142_27" title="Defined at line 45"><span class="token sort_Id">P</span></a></span> <span class="operator">&lt;</span> <span class="cons_Label"><a href="#F_46_7" id="F_142_31" title="Defined at line 46"><span class="token sort_Id">F</span></a></span><span class="operator">,</span> <span class="cons_Label"><a href="#P_45_7" id="P_142_34" title="Defined at line 45"><span class="token sort_Id">P</span></a></span> <span class="operator">&lt;</span> <span class="cons_Label"><a href="#DEF_49_7" id="DEF_142_38" title="Defined at line 49"><span class="token sort_Id">DEF</span></a></span><span class="operator">,</span> <span class="cons_Label"><a href="#P_45_7" id="P_142_43" title="Defined at line 45"><span class="token sort_Id">P</span></a></span> <span class="operator">&lt;</span> <span class="cons_Label"><a href="#IMPORT_50_7" id="IMPORT_142_47" title="Defined at line 50"><span class="token sort_Id">IMPORT</span></a></span><span class="operator">,</span> <span class="cons_Label"><a href="#P_45_7" id="P_142_55" title="Defined at line 45"><span class="token sort_Id">P</span></a></span> <span class="operator">&lt;</span> <span class="cons_Label"><a href="#IMPORTLIB_51_7" id="IMPORTLIB_142_59" title="Defined at line 51"><span class="token sort_Id">IMPORTLIB</span></a></span><span class="operator">,</span> <span class="cons_Label"><a href="#P_45_7" id="P_142_70" title="Defined at line 45"><span class="token sort_Id">P</span></a></span> <span class="operator">&lt;</span> <span class="cons_Label"><a href="#GLOBAL_52_7" id="GLOBAL_142_74" title="Defined at line 52"><span class="token sort_Id">GLOBAL</span></a></span><span class="operator">,</span>
                          <span class="cons_Label"><a href="#F_46_7" id="F_143_27" title="Defined at line 46"><span class="token sort_Id">F</span></a></span> <span class="operator">&lt;</span> <span class="cons_Label"><a href="#DEF_49_7" id="DEF_143_31" title="Defined at line 49"><span class="token sort_Id">DEF</span></a></span><span class="operator">,</span> <span class="cons_Label"><a href="#F_46_7" id="F_143_36" title="Defined at line 46"><span class="token sort_Id">F</span></a></span> <span class="operator">&lt;</span> <span class="cons_Label"><a href="#IMPORT_50_7" id="IMPORT_143_40" title="Defined at line 50"><span class="token sort_Id">IMPORT</span></a></span><span class="operator">,</span> <span class="cons_Label"><a href="#F_46_7" id="F_143_48" title="Defined at line 46"><span class="token sort_Id">F</span></a></span> <span class="operator">&lt;</span> <span class="cons_Label"><a href="#IMPORTLIB_51_7" id="IMPORTLIB_143_52" title="Defined at line 51"><span class="token sort_Id">IMPORTLIB</span></a></span><span class="operator">,</span> <span class="cons_Label"><a href="#F_46_7" id="F_143_63" title="Defined at line 46"><span class="token sort_Id">F</span></a></span> <span class="operator">&lt;</span> <span class="cons_Label"><a href="#GLOBAL_52_7" id="GLOBAL_143_67" title="Defined at line 52"><span class="token sort_Id">GLOBAL</span></a></span><span class="operator">,</span>
                          <span class="cons_Label"><a href="#DEF_49_7" id="DEF_144_27" title="Defined at line 49"><span class="token sort_Id">DEF</span></a></span> <span class="operator">&lt;</span> <span class="cons_Label"><a href="#IMPORT_50_7" id="IMPORT_144_33" title="Defined at line 50"><span class="token sort_Id">IMPORT</span></a></span><span class="operator">,</span> <span class="cons_Label"><a href="#DEF_49_7" id="DEF_144_41" title="Defined at line 49"><span class="token sort_Id">DEF</span></a></span> <span class="operator">&lt;</span> <span class="cons_Label"><a href="#IMPORTLIB_51_7" id="IMPORTLIB_144_47" title="Defined at line 51"><span class="token sort_Id">IMPORTLIB</span></a></span><span class="operator">,</span> <span class="cons_Label"><a href="#DEF_49_7" id="DEF_144_58" title="Defined at line 49"><span class="token sort_Id">DEF</span></a></span> <span class="operator">&lt;</span> <span class="cons_Label"><a href="#GLOBAL_52_7" id="GLOBAL_144_64" title="Defined at line 52"><span class="token sort_Id">GLOBAL</span></a></span><span class="operator">,</span>
                          <span class="cons_Label"><a href="#IMPORT_50_7" id="IMPORT_145_27" title="Defined at line 50"><span class="token sort_Id">IMPORT</span></a></span> <span class="operator">&lt;</span> <span class="cons_Label"><a href="#GLOBAL_52_7" id="GLOBAL_145_36" title="Defined at line 52"><span class="token sort_Id">GLOBAL</span></a></span><span class="operator">,</span> <span class="cons_Label"><a href="#IMPORTLIB_51_7" id="IMPORTLIB_145_44" title="Defined at line 51"><span class="token sort_Id">IMPORTLIB</span></a></span> <span class="operator">&lt;</span> <span class="cons_Label"><a href="#GLOBAL_52_7" id="GLOBAL_145_56" title="Defined at line 52"><span class="token sort_Id">GLOBAL</span></a></span>
                      <span class="keyword">and</span> <span class="operator">{</span> <span class="operator">(</span><span class="cons_Var">entity</span><span class="operator">,</span> <span class="cons_Var">entity_scope</span><span class="operator">),</span> <span class="operator">(</span><span class="cons_Var"><span id="entity_146_54" title="Not referenced"><span class="token sort_Id">entity</span></span></span><span class="operator">,</span> <span class="cons_Var"><span id="entity_scope_146_62" title="Not referenced"><span class="token sort_Id">entity_scope</span></span></span><span class="operator">)</span> <span class="operator">}</span>
                      <span class="keyword">in</span> <span class="cons_Var"><a href="#s_138_22" id="s_147_26" title="Defined at line 138"><span class="token sort_Id">s</span></a></span> <span class="operator">|-&gt;</span> <span class="cons_Var"><a href="#ps_138_30" id="ps_147_32" title="Defined at line 138"><span class="token sort_Id">ps</span></a></span><span class="operator">.</span>

<span class="keyword">rules</span> <span class="layout">// ui declaration and resolving</span>

  <button class="modal-open" id="declareTemplate_151_3" title="Multi-file references" data-urls="#declareTemplate_152_3 line 152, 342; ../webdsl-ac.stx/#declareTemplate_36_5 line 36, 37, 38; ../webdsl-ui.stx/#declareTemplate_295_5 line 295; ../ui/built-ins.stx/#declareTemplate_15_5 line 15, 16, 17, 18, 19, 21, 22, 23, 24, 25, 33, 35, 36, 37, 38, 39, 41"><span class="token sort_Id">declareTemplate</span></button> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="keyword">list</span><span class="operator">(</span><span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_151_43" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">)</span>
  <a href="#declareTemplate_151_3" id="declareTemplate_152_3" title="Defined at line 151"><span class="token sort_Id">declareTemplate</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_152_57" id="s_152_19" title="Referenced at line 152"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#t_152_60" id="t_152_22" title="Referenced at line 152"><span class="token sort_Id">t</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#ts_152_63" id="ts_152_25" title="Referenced at line 152"><span class="token sort_Id">ts</span></a></span><span class="operator">)</span> <span class="operator">:-</span> <a href="#declareTemplate_internal_157_3" id="declareTemplate_internal_152_32" title="Defined at line 157"><span class="token sort_Id">declareTemplate_internal</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_152_19" id="s_152_57" title="Defined at line 152"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#t_152_22" id="t_152_60" title="Defined at line 152"><span class="token sort_Id">t</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#ts_152_25" id="ts_152_63" title="Defined at line 152"><span class="token sort_Id">ts</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="#FALSE_35_5" id="FALSE_152_67" title="Defined at line 35"><span class="token sort_Id">FALSE</span></a>()</span><span class="operator">).</span>

  <a href="#declareAjaxTemplate_155_3" id="declareAjaxTemplate_154_3" title="Referenced at line 155"><span class="token sort_Id">declareAjaxTemplate</span></a> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="keyword">list</span><span class="operator">(</span><span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_154_47" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">)</span>
  <a href="#declareAjaxTemplate_154_3" id="declareAjaxTemplate_155_3" title="Defined at line 154"><span class="token sort_Id">declareAjaxTemplate</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_155_61" id="s_155_23" title="Referenced at line 155"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#t_155_64" id="t_155_26" title="Referenced at line 155"><span class="token sort_Id">t</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#ts_155_67" id="ts_155_29" title="Referenced at line 155"><span class="token sort_Id">ts</span></a></span><span class="operator">)</span> <span class="operator">:-</span> <a href="#declareTemplate_internal_157_3" id="declareTemplate_internal_155_36" title="Defined at line 157"><span class="token sort_Id">declareTemplate_internal</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_155_23" id="s_155_61" title="Defined at line 155"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#t_155_26" id="t_155_64" title="Defined at line 155"><span class="token sort_Id">t</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#ts_155_29" id="ts_155_67" title="Defined at line 155"><span class="token sort_Id">ts</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="#TRUE_34_5" id="TRUE_155_71" title="Defined at line 34"><span class="token sort_Id">TRUE</span></a>()</span><span class="operator">).</span>

  <button class="modal-open" id="declareTemplate_internal_157_3" title="Multi-file references" data-urls="#declareTemplate_internal_152_32 line 152, 155, 158; ../webdsl-ui.stx/#declareTemplate_internal_120_5 line 120"><span class="token sort_Id">declareTemplate_internal</span></button> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="keyword">list</span><span class="operator">(</span><span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_157_52" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">)</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#BOOL_30_5" id="BOOL_157_60" title="Defined at line 30"><span class="token sort_Id">BOOL</span></a></span>
  <a href="#declareTemplate_internal_157_3" id="declareTemplate_internal_158_3" title="Defined at line 157"><span class="token sort_Id">declareTemplate_internal</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_159_54" id="s_158_28" title="Referenced at line 159, 160, 161"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#t_159_15" id="t_158_31" title="Referenced at line 159, 160, 161"><span class="token sort_Id">t</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#ts_159_39" id="ts_158_34" title="Referenced at line 159, 161"><span class="token sort_Id">ts</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#ajax_159_43" id="ajax_158_38" title="Referenced at line 159"><span class="token sort_Id">ajax</span></a></span><span class="operator">)</span> <span class="operator">:-</span>
    <span class="operator">!</span><span class="cons_Label"><a href="#template_62_5" id="template_159_6" title="Defined at line 62"><span class="token sort_Id">template</span></a></span><span class="operator">[</span><span class="cons_Var"><a href="#t_158_31" id="t_159_15" title="Defined at line 158"><span class="token sort_Id">t</span></a></span><span class="operator">,</span> <a href="#withType_113_3" id="withType_159_18" title="Defined at line 113"><span class="token sort_Id">withType</span></a><span class="operator">(</span><span class="cons_Op"><a href="../webdsl-types.stx/#TEMPLATE_29_5" id="TEMPLATE_159_27" title="Defined at ../webdsl-types.stx line 29"><span class="token sort_Id">TEMPLATE</span></a><span class="operator">(</span><span class="cons_Var"><a href="#t_158_31" id="t_159_36" title="Defined at line 158"><span class="token sort_Id">t</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#ts_158_34" id="ts_159_39" title="Defined at line 158"><span class="token sort_Id">ts</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#ajax_158_38" id="ajax_159_43" title="Defined at line 158"><span class="token sort_Id">ajax</span></a></span>)</span><span class="operator">)]</span> <span class="keyword">in</span> <span class="cons_Var"><a href="#s_158_28" id="s_159_54" title="Defined at line 158"><span class="token sort_Id">s</span></a></span><span class="operator">,</span>
    <a href="#resolvePage_196_3" id="resolvePage_160_5" title="Defined at line 196"><span class="token sort_Id">resolvePage</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_158_28" id="s_160_17" title="Defined at line 158"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#t_158_31" id="t_160_20" title="Defined at line 158"><span class="token sort_Id">t</span></a></span><span class="operator">)</span> <span class="operator">==</span> <span class="operator">[]</span> <span class="operator">|</span> <span class="keyword">error</span> <span class="operator">$[</span><span class="cons_Text">Multiple page/template definitions with name </span><span class="operator">[</span><span class="cons_Var"><a href="#t_158_31" id="t_160_85" title="Defined at line 158"><span class="token sort_Id">t</span></a></span><span class="operator">]]</span> <span class="operator">@</span><span class="cons_Var"><a href="#t_158_31" id="t_160_90" title="Defined at line 158"><span class="token sort_Id">t</span></a></span><span class="operator">,</span>
    <a href="#filterTemplateResultsArgs_191_3" id="filterTemplateResultsArgs_161_5" title="Defined at line 191"><span class="token sort_Id">filterTemplateResultsArgs</span></a><span class="operator">(</span><a href="#resolveTemplate_169_3" id="resolveTemplate_161_31" title="Defined at line 169"><span class="token sort_Id">resolveTemplate</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_158_28" id="s_161_47" title="Defined at line 158"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#t_158_31" id="t_161_50" title="Defined at line 158"><span class="token sort_Id">t</span></a></span><span class="operator">),</span> <span class="cons_Var"><a href="#ts_158_34" id="ts_161_54" title="Defined at line 158"><span class="token sort_Id">ts</span></a></span><span class="operator">)</span> <span class="operator">==</span> <span class="operator">[_]</span> <span class="operator">|</span> <span class="keyword">error</span> <span class="operator">$[</span><span class="cons_Text">Multiple page/template definitions with name </span><span class="operator">[</span><span class="cons_Var"><a href="#t_158_31" id="t_161_121" title="Defined at line 158"><span class="token sort_Id">t</span></a></span><span class="operator">]</span><span class="cons_Text"> and argument types </span><span class="operator">[</span><span class="cons_Var"><a href="#ts_158_34" id="ts_161_144" title="Defined at line 158"><span class="token sort_Id">ts</span></a></span><span class="operator">]]</span> <span class="operator">@</span><span class="cons_Var"><a href="#t_158_31" id="t_161_150" title="Defined at line 158"><span class="token sort_Id">t</span></a></span><span class="operator">.</span> <span class="layout">// correct error message for tests</span>

  <button class="modal-open" id="declarePage_163_3" title="Multi-file references" data-urls="#declarePage_164_3 line 164; ../webdsl-services.stx/#declarePage_20_5 line 20; ../webdsl-ui.stx/#declarePage_46_53 line 46; ../ui/built-ins.stx/#declarePage_43_5 line 43"><span class="token sort_Id">declarePage</span></button> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="keyword">list</span><span class="operator">(</span><span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_163_39" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">)</span>
  <a href="#declarePage_163_3" id="declarePage_164_3" title="Defined at line 163"><span class="token sort_Id">declarePage</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_165_40" id="s_164_15" title="Referenced at line 165, 166, 167"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#p_165_11" id="p_164_18" title="Referenced at line 165, 166, 167"><span class="token sort_Id">p</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#ts_165_31" id="ts_164_21" title="Referenced at line 165"><span class="token sort_Id">ts</span></a></span><span class="operator">)</span> <span class="operator">:-</span>
    <span class="operator">!</span><span class="cons_Label"><a href="#page_61_5" id="page_165_6" title="Defined at line 61"><span class="token sort_Id">page</span></a></span><span class="operator">[</span><span class="cons_Var"><a href="#p_164_18" id="p_165_11" title="Defined at line 164"><span class="token sort_Id">p</span></a></span><span class="operator">,</span> <a href="#withType_113_3" id="withType_165_14" title="Defined at line 113"><span class="token sort_Id">withType</span></a><span class="operator">(</span><span class="cons_Op"><a href="../webdsl-types.stx/#PAGE_26_5" id="PAGE_165_23" title="Defined at ../webdsl-types.stx line 26"><span class="token sort_Id">PAGE</span></a><span class="operator">(</span><span class="cons_Var"><a href="#p_164_18" id="p_165_28" title="Defined at line 164"><span class="token sort_Id">p</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#ts_164_21" id="ts_165_31" title="Defined at line 164"><span class="token sort_Id">ts</span></a></span>)</span><span class="operator">)]</span> <span class="keyword">in</span> <span class="cons_Var"><a href="#s_164_15" id="s_165_40" title="Defined at line 164"><span class="token sort_Id">s</span></a></span><span class="operator">,</span>
    <a href="#resolveTemplate_169_3" id="resolveTemplate_166_5" title="Defined at line 169"><span class="token sort_Id">resolveTemplate</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_164_15" id="s_166_21" title="Defined at line 164"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#p_164_18" id="p_166_24" title="Defined at line 164"><span class="token sort_Id">p</span></a></span><span class="operator">)</span> <span class="operator">==</span> <span class="operator">[]</span> <span class="operator">|</span> <span class="keyword">error</span> <span class="operator">$[</span><span class="cons_Text">Multiple page/template definitions with name </span><span class="operator">[</span><span class="cons_Var"><a href="#p_164_18" id="p_166_89" title="Defined at line 164"><span class="token sort_Id">p</span></a></span><span class="operator">]]</span> <span class="operator">@</span><span class="cons_Var"><a href="#p_164_18" id="p_166_94" title="Defined at line 164"><span class="token sort_Id">p</span></a></span><span class="operator">,</span> <span class="layout">// correct error message for tests</span>
    <a href="#resolvePage_196_3" id="resolvePage_167_5" title="Defined at line 196"><span class="token sort_Id">resolvePage</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_164_15" id="s_167_17" title="Defined at line 164"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#p_164_18" id="p_167_20" title="Defined at line 164"><span class="token sort_Id">p</span></a></span><span class="operator">)</span> <span class="operator">==</span> <span class="operator">[_]</span> <span class="operator">|</span> <span class="keyword">error</span> <span class="operator">$[</span><span class="cons_Text">Multiple page/template definitions with name </span><span class="operator">[</span><span class="cons_Var"><a href="#p_164_18" id="p_167_86" title="Defined at line 164"><span class="token sort_Id">p</span></a></span><span class="operator">]]</span> <span class="operator">@</span><span class="cons_Var"><a href="#p_164_18" id="p_167_91" title="Defined at line 164"><span class="token sort_Id">p</span></a></span><span class="operator">.</span> <span class="layout">// correct error message for tests</span>

  <button class="modal-open" id="resolveTemplate_169_3" title="Multi-file references" data-urls="#resolveTemplate_161_31 line 161, 166, 170; ../webdsl-ui.stx/#resolveTemplate_91_13 line 91, 121"><span class="token sort_Id">resolveTemplate</span></button> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_StringSort">string</span> <span class="operator">-&gt;</span> <span class="keyword">list</span><span class="operator">((</span><span class="cons_PathSort">path</span> <span class="operator">*</span> <span class="operator">(</span><span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_169_62" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">)))</span>
  <a href="#resolveTemplate_169_3" id="resolveTemplate_170_3" title="Defined at line 169"><span class="token sort_Id">resolveTemplate</span></a><span class="operator">(</span><span class="cons_Var"><span id="s_170_19" title="Not referenced"><span class="token sort_Id">s</span></span></span><span class="operator">,</span> <span class="cons_Var"><span id="t_170_22" title="Not referenced"><span class="token sort_Id">t</span></span></span><span class="operator">)</span> <span class="operator">=</span> <a href="#resolveTemplate_internal_175_3" id="resolveTemplate_internal_170_27" title="Defined at line 175"><span class="token sort_Id">resolveTemplate_internal</span></a><span class="operator">(</span><span class="cons_Var">s</span><span class="operator">,</span> <span class="cons_Var">t</span><span class="operator">,</span> <span class="cons_Op"><a href="#FALSE_35_5" id="FALSE_170_58" title="Defined at line 35"><span class="token sort_Id">FALSE</span></a>()</span><span class="operator">).</span>

  <button class="modal-open" id="resolveAjaxTemplate_172_3" title="Multi-file references" data-urls="#resolveAjaxTemplate_173_3 line 173; ../webdsl-ac.stx/#resolveAjaxTemplate_159_5 line 159, 163, 239; ../webdsl-ui.stx/#resolveAjaxTemplate_112_64 line 112"><span class="token sort_Id">resolveAjaxTemplate</span></button> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_StringSort">string</span> <span class="operator">-&gt;</span> <span class="keyword">list</span><span class="operator">((</span><span class="cons_PathSort">path</span> <span class="operator">*</span> <span class="operator">(</span><span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_172_66" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">)))</span>
  <a href="#resolveAjaxTemplate_172_3" id="resolveAjaxTemplate_173_3" title="Defined at line 172"><span class="token sort_Id">resolveAjaxTemplate</span></a><span class="operator">(</span><span class="cons_Var"><span id="s_173_23" title="Not referenced"><span class="token sort_Id">s</span></span></span><span class="operator">,</span> <span class="cons_Var">t</span><span class="operator">)</span> <span class="operator">=</span> <a href="#resolveTemplate_internal_175_3" id="resolveTemplate_internal_173_31" title="Defined at line 175"><span class="token sort_Id">resolveTemplate_internal</span></a><span class="operator">(</span><span class="cons_Var">s</span><span class="operator">,</span> <span class="cons_Var"><span id="t_173_59" title="Not referenced"><span class="token sort_Id">t</span></span></span><span class="operator">,</span> <span class="cons_Op"><a href="#TRUE_34_5" id="TRUE_173_62" title="Defined at line 34"><span class="token sort_Id">TRUE</span></a>()</span><span class="operator">).</span>

  <button class="modal-open" id="resolveTemplate_internal_175_3" title="Multi-file references" data-urls="#resolveTemplate_internal_170_27 line 170, 173, 176, 181, 184; ../ui/template-calls.stx/#resolveTemplate_internal_41_27 line 41"><span class="token sort_Id">resolveTemplate_internal</span></button> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#BOOL_30_5" id="BOOL_175_47" title="Defined at line 30"><span class="token sort_Id">BOOL</span></a></span> <span class="operator">-&gt;</span> <span class="keyword">list</span><span class="operator">((</span><span class="cons_PathSort">path</span> <span class="operator">*</span> <span class="operator">(</span><span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_175_78" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">)))</span>
  <a href="#resolveTemplate_internal_175_3" id="resolveTemplate_internal_176_3" title="Defined at line 175"><span class="token sort_Id">resolveTemplate_internal</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_179_23" id="s_176_28" title="Referenced at line 179"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#t_178_39" id="t_176_31" title="Referenced at line 178"><span class="token sort_Id">t</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="#FALSE_35_5" id="FALSE_176_34" title="Defined at line 35"><span class="token sort_Id">FALSE</span></a>()</span><span class="operator">)</span> <span class="operator">=</span> <a href="#typesOf_117_3" id="typesOf_176_45" title="Defined at line 117"><span class="token sort_Id">typesOf</span></a><span class="operator">(</span><span class="cons_Var"><a href="#ps_179_29" id="ps_176_53" title="Referenced at line 179"><span class="token sort_Id">ps</span></a></span><span class="operator">)</span> <span class="operator">:-</span>
    <span class="keyword">query</span> <span class="cons_Label"><a href="#template_62_5" id="template_177_11" title="Defined at line 62"><span class="token sort_Id">template</span></a></span> <span class="keyword">filter</span> <span class="cons_Closure"><span class="cons_Label"><a href="#P_45_7" id="P_177_27" title="Defined at line 45"><span class="token sort_Id">P</span></a></span>*</span> <span class="cons_Closure"><span class="cons_Label"><a href="#F_46_7" id="F_177_30" title="Defined at line 46"><span class="token sort_Id">F</span></a></span>*</span> <span class="operator">((</span><span class="cons_Label"><a href="#EXTEND_47_7" id="EXTEND_177_35" title="Defined at line 47"><span class="token sort_Id">EXTEND</span></a></span><span class="operator">?</span> <span class="cons_Closure"><span class="operator">(</span><span class="cons_Label"><a href="#INHERIT_48_7" id="INHERIT_177_44" title="Defined at line 48"><span class="token sort_Id">INHERIT</span></a></span> <span class="cons_Label"><a href="#EXTEND_47_7" id="EXTEND_177_52" title="Defined at line 47"><span class="token sort_Id">EXTEND</span></a></span>?)*</span><span class="operator">)</span> <span class="operator">|</span> <span class="operator">(</span><span class="cons_Label"><a href="#DEF_49_7" id="DEF_177_66" title="Defined at line 49"><span class="token sort_Id">DEF</span></a></span><span class="operator">?</span> <span class="operator">(</span><span class="cons_Label"><a href="#IMPORT_50_7" id="IMPORT_177_72" title="Defined at line 50"><span class="token sort_Id">IMPORT</span></a></span> <span class="operator">|</span> <span class="cons_Label"><a href="#IMPORTLIB_51_7" id="IMPORTLIB_177_81" title="Defined at line 51"><span class="token sort_Id">IMPORTLIB</span></a></span><span class="operator">)?))</span>
                   <span class="keyword">and</span> <span class="operator">{</span> <span class="cons_Var"><a href="#t'_178_32" id="t'_178_26" title="Referenced at line 178"><span class="token sort_Id">t'</span></a></span> <span class="operator">:-</span> <span class="cons_Var"><a href="#t'_178_26" id="t'_178_32" title="Defined at line 178"><span class="token sort_Id">t'</span></a></span> <span class="operator">==</span> <span class="operator">(</span><span class="cons_Var"><a href="#t_176_31" id="t_178_39" title="Defined at line 176"><span class="token sort_Id">t</span></a></span><span class="operator">,</span> <span class="operator">_)</span> <span class="operator">}</span>
                   <span class="keyword">in</span> <span class="cons_Var"><a href="#s_176_28" id="s_179_23" title="Defined at line 176"><span class="token sort_Id">s</span></a></span> <span class="operator">|-&gt;</span> <span class="cons_Var"><a href="#ps_176_53" id="ps_179_29" title="Defined at line 176"><span class="token sort_Id">ps</span></a></span><span class="operator">.</span>

  <a href="#resolveTemplate_internal_175_3" id="resolveTemplate_internal_181_3" title="Defined at line 175"><span class="token sort_Id">resolveTemplate_internal</span></a><span class="operator">(</span><span class="cons_Var"><span id="s_181_28" title="Not referenced"><span class="token sort_Id">s</span></span></span><span class="operator">,</span> <span class="cons_Var">t</span><span class="operator">,</span> <span class="cons_Op"><a href="#TRUE_34_5" id="TRUE_181_34" title="Defined at line 34"><span class="token sort_Id">TRUE</span></a>()</span><span class="operator">)</span> <span class="operator">=</span> <a href="#filterTemplateResultsAjax_186_3" id="filterTemplateResultsAjax_181_44" title="Defined at line 186"><span class="token sort_Id">filterTemplateResultsAjax</span></a><span class="operator">(</span><a href="#resolveTemplate_internal_175_3" id="resolveTemplate_internal_181_70" title="Defined at line 175"><span class="token sort_Id">resolveTemplate_internal</span></a><span class="operator">(</span><span class="cons_Var">s</span><span class="operator">,</span> <span class="cons_Var"><span id="t_181_98" title="Not referenced"><span class="token sort_Id">t</span></span></span><span class="operator">,</span> <span class="cons_Op"><a href="#FALSE_35_5" id="FALSE_181_101" title="Defined at line 35"><span class="token sort_Id">FALSE</span></a>()</span><span class="operator">),</span> <span class="cons_Op"><a href="#TRUE_34_5" id="TRUE_181_111" title="Defined at line 34"><span class="token sort_Id">TRUE</span></a>()</span><span class="operator">).</span>

  <button class="modal-open" id="resolveTemplateNoAjax_183_3" title="Multi-file references" data-urls="#resolveTemplateNoAjax_184_3 line 184; ../webdsl-ac.stx/#resolveTemplateNoAjax_150_5 line 150, 154, 234; ../webdsl-ui.stx/#resolveTemplateNoAjax_111_65 line 111"><span class="token sort_Id">resolveTemplateNoAjax</span></button> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_StringSort">string</span> <span class="operator">-&gt;</span> <span class="keyword">list</span><span class="operator">((</span><span class="cons_PathSort">path</span> <span class="operator">*</span> <span class="operator">(</span><span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_183_68" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">)))</span>
  <a href="#resolveTemplateNoAjax_183_3" id="resolveTemplateNoAjax_184_3" title="Defined at line 183"><span class="token sort_Id">resolveTemplateNoAjax</span></a><span class="operator">(</span><span class="cons_Var">s</span><span class="operator">,</span> <span class="cons_Var">t</span><span class="operator">)</span> <span class="operator">=</span> <a href="#filterTemplateResultsAjax_186_3" id="filterTemplateResultsAjax_184_33" title="Defined at line 186"><span class="token sort_Id">filterTemplateResultsAjax</span></a><span class="operator">(</span><a href="#resolveTemplate_internal_175_3" id="resolveTemplate_internal_184_59" title="Defined at line 175"><span class="token sort_Id">resolveTemplate_internal</span></a><span class="operator">(</span><span class="cons_Var"><span id="s_184_84" title="Not referenced"><span class="token sort_Id">s</span></span></span><span class="operator">,</span> <span class="cons_Var"><span id="t_184_87" title="Not referenced"><span class="token sort_Id">t</span></span></span><span class="operator">,</span> <span class="cons_Op"><a href="#FALSE_35_5" id="FALSE_184_90" title="Defined at line 35"><span class="token sort_Id">FALSE</span></a>()</span><span class="operator">),</span> <span class="cons_Op"><a href="#FALSE_35_5" id="FALSE_184_100" title="Defined at line 35"><span class="token sort_Id">FALSE</span></a>()</span><span class="operator">).</span>

  <a href="#filterTemplateResultsAjax_181_44" id="filterTemplateResultsAjax_186_3" title="Referenced at line 181, 184, 187, 188, 189"><span class="token sort_Id">filterTemplateResultsAjax</span></a> <span class="operator">:</span> <span class="keyword">list</span><span class="operator">((</span><span class="cons_PathSort">path</span> <span class="operator">*</span> <span class="operator">(</span><span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_186_54" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">)))</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#BOOL_30_5" id="BOOL_186_64" title="Defined at line 30"><span class="token sort_Id">BOOL</span></a></span> <span class="operator">-&gt;</span> <span class="keyword">list</span><span class="operator">((</span><span class="cons_PathSort">path</span> <span class="operator">*</span> <span class="operator">(</span><span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_186_95" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">)))</span>
  <a href="#filterTemplateResultsAjax_186_3" id="filterTemplateResultsAjax_187_3" title="Defined at line 186"><span class="token sort_Id">filterTemplateResultsAjax</span></a><span class="operator">([],</span> <span class="operator">_)</span> <span class="operator">=</span> <span class="operator">[].</span>
  <a href="#filterTemplateResultsAjax_186_3" id="filterTemplateResultsAjax_188_3" title="Defined at line 186"><span class="token sort_Id">filterTemplateResultsAjax</span></a><span class="operator">([</span><span class="cons_Var"><span id="t_188_30" title="Not referenced"><span class="token sort_Id">t</span></span></span><span class="operator">@(_,</span> <span class="operator">(_,</span> <span class="cons_Op"><a href="../webdsl-types.stx/#TEMPLATE_29_5" id="TEMPLATE_188_40" title="Defined at ../webdsl-types.stx line 29"><span class="token sort_Id">TEMPLATE</span></a><span class="operator">(_,</span> <span class="operator">_,</span> <span class="cons_Var">b</span>)</span><span class="operator">))</span> <span class="operator">|</span> <span class="cons_Var">ts</span><span class="operator">],</span> <span class="cons_Var"><span id="b_188_67" title="Not referenced"><span class="token sort_Id">b</span></span></span><span class="operator">)</span> <span class="operator">=</span> <span class="operator">[</span><span class="cons_Var">t</span> <span class="operator">|</span> <a href="#filterTemplateResultsAjax_186_3" id="filterTemplateResultsAjax_188_77" title="Defined at line 186"><span class="token sort_Id">filterTemplateResultsAjax</span></a><span class="operator">(</span><span class="cons_Var"><span id="ts_188_103" title="Not referenced"><span class="token sort_Id">ts</span></span></span><span class="operator">,</span> <span class="cons_Var">b</span><span class="operator">)].</span>
  <a href="#filterTemplateResultsAjax_186_3" id="filterTemplateResultsAjax_189_3" title="Defined at line 186"><span class="token sort_Id">filterTemplateResultsAjax</span></a><span class="operator">([_</span> <span class="operator">|</span> <span class="cons_Var">ts</span><span class="operator">],</span> <span class="cons_Var"><span id="b_189_39" title="Not referenced"><span class="token sort_Id">b</span></span></span><span class="operator">)</span> <span class="operator">=</span> <a href="#filterTemplateResultsAjax_186_3" id="filterTemplateResultsAjax_189_44" title="Defined at line 186"><span class="token sort_Id">filterTemplateResultsAjax</span></a><span class="operator">(</span><span class="cons_Var"><span id="ts_189_70" title="Not referenced"><span class="token sort_Id">ts</span></span></span><span class="operator">,</span> <span class="cons_Var">b</span><span class="operator">).</span>

  <a href="#filterTemplateResultsArgs_161_5" id="filterTemplateResultsArgs_191_3" title="Referenced at line 161, 192, 193, 194"><span class="token sort_Id">filterTemplateResultsArgs</span></a> <span class="operator">:</span> <span class="keyword">list</span><span class="operator">((</span><span class="cons_PathSort">path</span> <span class="operator">*</span> <span class="operator">(</span><span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_191_54" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">)))</span> <span class="operator">*</span> <span class="keyword">list</span><span class="operator">(</span><span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_191_69" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">)</span> <span class="operator">-&gt;</span> <span class="keyword">list</span><span class="operator">((</span><span class="cons_PathSort">path</span> <span class="operator">*</span> <span class="operator">(</span><span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_191_101" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">)))</span>
  <a href="#filterTemplateResultsArgs_191_3" id="filterTemplateResultsArgs_192_3" title="Defined at line 191"><span class="token sort_Id">filterTemplateResultsArgs</span></a><span class="operator">([],</span> <span class="operator">_)</span> <span class="operator">=</span> <span class="operator">[].</span>
  <a href="#filterTemplateResultsArgs_191_3" id="filterTemplateResultsArgs_193_3" title="Defined at line 191"><span class="token sort_Id">filterTemplateResultsArgs</span></a><span class="operator">([</span><span class="cons_Var"><span id="t_193_30" title="Not referenced"><span class="token sort_Id">t</span></span></span><span class="operator">@(_,</span> <span class="operator">(_,</span> <span class="cons_Op"><a href="../webdsl-types.stx/#TEMPLATE_29_5" id="TEMPLATE_193_40" title="Defined at ../webdsl-types.stx line 29"><span class="token sort_Id">TEMPLATE</span></a><span class="operator">(_,</span> <span class="cons_Var"><span id="args_193_52" title="Not referenced"><span class="token sort_Id">args</span></span></span>, _)</span><span class="operator">))</span> <span class="operator">|</span> <span class="cons_Var"><span id="ts_193_65" title="Not referenced"><span class="token sort_Id">ts</span></span></span><span class="operator">],</span> <span class="cons_Var">args</span><span class="operator">)</span> <span class="operator">=</span> <span class="operator">[</span><span class="cons_Var">t</span> <span class="operator">|</span> <a href="#filterTemplateResultsArgs_191_3" id="filterTemplateResultsArgs_193_83" title="Defined at line 191"><span class="token sort_Id">filterTemplateResultsArgs</span></a><span class="operator">(</span><span class="cons_Var">ts</span><span class="operator">,</span> <span class="cons_Var">args</span><span class="operator">)].</span>
  <a href="#filterTemplateResultsArgs_191_3" id="filterTemplateResultsArgs_194_3" title="Defined at line 191"><span class="token sort_Id">filterTemplateResultsArgs</span></a><span class="operator">([_</span> <span class="operator">|</span> <span class="cons_Var"><span id="ts_194_34" title="Not referenced"><span class="token sort_Id">ts</span></span></span><span class="operator">],</span> <span class="cons_Var"><span id="args_194_39" title="Not referenced"><span class="token sort_Id">args</span></span></span><span class="operator">)</span> <span class="operator">=</span> <a href="#filterTemplateResultsArgs_191_3" id="filterTemplateResultsArgs_194_47" title="Defined at line 191"><span class="token sort_Id">filterTemplateResultsArgs</span></a><span class="operator">(</span><span class="cons_Var">ts</span><span class="operator">,</span> <span class="cons_Var">args</span><span class="operator">).</span>

  <button class="modal-open" id="resolvePage_196_3" title="Multi-file references" data-urls="#resolvePage_160_5 line 160, 167, 197; ../webdsl-ac.stx/#resolvePage_229_5 line 229; ../webdsl-types.stx/#resolvePage_262_5 line 262; ../webdsl-ui.stx/#resolvePage_110_55 line 110, 312"><span class="token sort_Id">resolvePage</span></button> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_StringSort">string</span> <span class="operator">-&gt;</span> <span class="keyword">list</span><span class="operator">((</span><span class="cons_PathSort">path</span> <span class="operator">*</span> <span class="operator">(</span><span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_196_58" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">)))</span>
  <a href="#resolvePage_196_3" id="resolvePage_197_3" title="Defined at line 196"><span class="token sort_Id">resolvePage</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_200_19" id="s_197_15" title="Referenced at line 200"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#p_199_35" id="p_197_18" title="Referenced at line 199"><span class="token sort_Id">p</span></a></span><span class="operator">)</span> <span class="operator">=</span> <a href="#typesOf_117_3" id="typesOf_197_23" title="Defined at line 117"><span class="token sort_Id">typesOf</span></a><span class="operator">(</span><span class="cons_Var"><a href="#ps_200_25" id="ps_197_31" title="Referenced at line 200"><span class="token sort_Id">ps</span></a></span><span class="operator">)</span> <span class="operator">:-</span>
    <span class="keyword">query</span> <span class="cons_Label"><a href="#page_61_5" id="page_198_11" title="Defined at line 61"><span class="token sort_Id">page</span></a></span> <span class="keyword">filter</span> <span class="cons_Closure"><span class="cons_Label"><a href="#P_45_7" id="P_198_23" title="Defined at line 45"><span class="token sort_Id">P</span></a></span>*</span> <span class="cons_Closure"><span class="cons_Label"><a href="#F_46_7" id="F_198_26" title="Defined at line 46"><span class="token sort_Id">F</span></a></span>*</span> <span class="operator">((</span><span class="cons_Label"><a href="#EXTEND_47_7" id="EXTEND_198_31" title="Defined at line 47"><span class="token sort_Id">EXTEND</span></a></span><span class="operator">?</span> <span class="cons_Closure"><span class="operator">(</span><span class="cons_Label"><a href="#INHERIT_48_7" id="INHERIT_198_40" title="Defined at line 48"><span class="token sort_Id">INHERIT</span></a></span> <span class="cons_Label"><a href="#EXTEND_47_7" id="EXTEND_198_48" title="Defined at line 47"><span class="token sort_Id">EXTEND</span></a></span>?)*</span><span class="operator">)</span> <span class="operator">|</span> <span class="operator">(</span><span class="cons_Label"><a href="#DEF_49_7" id="DEF_198_62" title="Defined at line 49"><span class="token sort_Id">DEF</span></a></span><span class="operator">?</span> <span class="operator">(</span><span class="cons_Label"><a href="#IMPORT_50_7" id="IMPORT_198_68" title="Defined at line 50"><span class="token sort_Id">IMPORT</span></a></span> <span class="operator">|</span> <span class="cons_Label"><a href="#IMPORTLIB_51_7" id="IMPORTLIB_198_77" title="Defined at line 51"><span class="token sort_Id">IMPORTLIB</span></a></span><span class="operator">)?))</span>
               <span class="keyword">and</span> <span class="operator">{</span> <span class="cons_Var"><a href="#p'_199_28" id="p'_199_22" title="Referenced at line 199"><span class="token sort_Id">p'</span></a></span> <span class="operator">:-</span> <span class="cons_Var"><a href="#p'_199_22" id="p'_199_28" title="Defined at line 199"><span class="token sort_Id">p'</span></a></span> <span class="operator">==</span> <span class="operator">(</span><span class="cons_Var"><a href="#p_197_18" id="p_199_35" title="Defined at line 197"><span class="token sort_Id">p</span></a></span><span class="operator">,</span> <span class="operator">_)</span> <span class="operator">}</span>
               <span class="keyword">in</span> <span class="cons_Var"><a href="#s_197_15" id="s_200_19" title="Defined at line 197"><span class="token sort_Id">s</span></a></span> <span class="operator">|-&gt;</span> <span class="cons_Var"><a href="#ps_197_31" id="ps_200_25" title="Defined at line 197"><span class="token sort_Id">ps</span></a></span><span class="operator">.</span>

<span class="keyword">rules</span> <span class="layout">// ac rules</span>

  <button class="modal-open" id="declarePointcut_204_3" title="Multi-file references" data-urls="#declarePointcut_205_3 line 205; ../webdsl-ac.stx/#declarePointcut_210_5 line 210"><span class="token sort_Id">declarePointcut</span></button> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="keyword">list</span><span class="operator">(</span><span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_204_43" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">)</span>
  <a href="#declarePointcut_204_3" id="declarePointcut_205_3" title="Defined at line 204"><span class="token sort_Id">declarePointcut</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_206_42" id="s_205_19" title="Referenced at line 206, 207"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#p_206_9" id="p_205_22" title="Referenced at line 206, 207"><span class="token sort_Id">p</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#ts_206_33" id="ts_205_25" title="Referenced at line 206"><span class="token sort_Id">ts</span></a></span><span class="operator">)</span> <span class="operator">:-</span>
    <span class="operator">!</span><span class="cons_Label"><a href="#ac_63_5" id="ac_206_6" title="Defined at line 63"><span class="token sort_Id">ac</span></a></span><span class="operator">[</span><span class="cons_Var"><a href="#p_205_22" id="p_206_9" title="Defined at line 205"><span class="token sort_Id">p</span></a></span><span class="operator">,</span> <a href="#withType_113_3" id="withType_206_12" title="Defined at line 113"><span class="token sort_Id">withType</span></a><span class="operator">(</span><span class="cons_Op"><a href="../webdsl-types.stx/#POINTCUT_32_5" id="POINTCUT_206_21" title="Defined at ../webdsl-types.stx line 32"><span class="token sort_Id">POINTCUT</span></a><span class="operator">(</span><span class="cons_Var"><a href="#p_205_22" id="p_206_30" title="Defined at line 205"><span class="token sort_Id">p</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#ts_205_25" id="ts_206_33" title="Defined at line 205"><span class="token sort_Id">ts</span></a></span>)</span><span class="operator">)]</span> <span class="keyword">in</span> <span class="cons_Var"><a href="#s_205_19" id="s_206_42" title="Defined at line 205"><span class="token sort_Id">s</span></a></span><span class="operator">,</span>
    <a href="#resolvePointcut_209_3" id="resolvePointcut_207_5" title="Defined at line 209"><span class="token sort_Id">resolvePointcut</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_205_19" id="s_207_21" title="Defined at line 205"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#p_205_22" id="p_207_24" title="Defined at line 205"><span class="token sort_Id">p</span></a></span><span class="operator">)</span> <span class="operator">==</span> <span class="operator">[_]</span> <span class="operator">|</span> <span class="keyword">error</span> <span class="operator">$[</span><span class="cons_Text">Pointcut </span><span class="operator">[</span><span class="cons_Var"><a href="#p_205_22" id="p_207_54" title="Defined at line 205"><span class="token sort_Id">p</span></a></span><span class="operator">]</span><span class="cons_Text"> is defined multiple times</span><span class="operator">]</span> <span class="operator">@</span><span class="cons_Var"><a href="#p_205_22" id="p_207_85" title="Defined at line 205"><span class="token sort_Id">p</span></a></span><span class="operator">.</span>

  <button class="modal-open" id="resolvePointcut_209_3" title="Multi-file references" data-urls="#resolvePointcut_207_5 line 207, 210; ../webdsl-ac.stx/#resolvePointcut_168_5 line 168, 172"><span class="token sort_Id">resolvePointcut</span></button> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_StringSort">string</span> <span class="operator">-&gt;</span> <span class="keyword">list</span><span class="operator">((</span><span class="cons_PathSort">path</span> <span class="operator">*</span> <span class="operator">(</span><span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_209_62" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">)))</span>
  <a href="#resolvePointcut_209_3" id="resolvePointcut_210_3" title="Defined at line 209"><span class="token sort_Id">resolvePointcut</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_213_17" id="s_210_19" title="Referenced at line 213"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#p_212_33" id="p_210_22" title="Referenced at line 212"><span class="token sort_Id">p</span></a></span><span class="operator">)</span> <span class="operator">=</span> <a href="#typesOf_117_3" id="typesOf_210_27" title="Defined at line 117"><span class="token sort_Id">typesOf</span></a><span class="operator">(</span><span class="cons_Var"><a href="#ps_213_23" id="ps_210_35" title="Referenced at line 213"><span class="token sort_Id">ps</span></a></span><span class="operator">)</span> <span class="operator">:-</span>
    <span class="keyword">query</span> <span class="cons_Label"><a href="#ac_63_5" id="ac_211_11" title="Defined at line 63"><span class="token sort_Id">ac</span></a></span> <span class="keyword">filter</span> <span class="cons_Closure"><span class="cons_Label"><a href="#P_45_7" id="P_211_21" title="Defined at line 45"><span class="token sort_Id">P</span></a></span>*</span> <span class="cons_Closure"><span class="cons_Label"><a href="#F_46_7" id="F_211_24" title="Defined at line 46"><span class="token sort_Id">F</span></a></span>*</span> <span class="operator">((</span><span class="cons_Label"><a href="#EXTEND_47_7" id="EXTEND_211_29" title="Defined at line 47"><span class="token sort_Id">EXTEND</span></a></span><span class="operator">?</span> <span class="cons_Closure"><span class="operator">(</span><span class="cons_Label"><a href="#INHERIT_48_7" id="INHERIT_211_38" title="Defined at line 48"><span class="token sort_Id">INHERIT</span></a></span> <span class="cons_Label"><a href="#EXTEND_47_7" id="EXTEND_211_46" title="Defined at line 47"><span class="token sort_Id">EXTEND</span></a></span>?)*</span><span class="operator">)</span> <span class="operator">|</span> <span class="operator">(</span><span class="cons_Label"><a href="#DEF_49_7" id="DEF_211_60" title="Defined at line 49"><span class="token sort_Id">DEF</span></a></span><span class="operator">?</span> <span class="operator">(</span><span class="cons_Label"><a href="#IMPORT_50_7" id="IMPORT_211_66" title="Defined at line 50"><span class="token sort_Id">IMPORT</span></a></span> <span class="operator">|</span> <span class="cons_Label"><a href="#IMPORTLIB_51_7" id="IMPORTLIB_211_75" title="Defined at line 51"><span class="token sort_Id">IMPORTLIB</span></a></span><span class="operator">)?))</span>
             <span class="keyword">and</span> <span class="operator">{</span> <span class="cons_Var"><a href="#p'_212_26" id="p'_212_20" title="Referenced at line 212"><span class="token sort_Id">p'</span></a></span> <span class="operator">:-</span> <span class="cons_Var"><a href="#p'_212_20" id="p'_212_26" title="Defined at line 212"><span class="token sort_Id">p'</span></a></span> <span class="operator">==</span> <span class="operator">(</span><span class="cons_Var"><a href="#p_210_22" id="p_212_33" title="Defined at line 210"><span class="token sort_Id">p</span></a></span><span class="operator">,</span> <span class="operator">_)</span> <span class="operator">}</span>
             <span class="keyword">in</span> <span class="cons_Var"><a href="#s_210_19" id="s_213_17" title="Defined at line 210"><span class="token sort_Id">s</span></a></span> <span class="operator">|-&gt;</span> <span class="cons_Var"><a href="#ps_210_35" id="ps_213_23" title="Defined at line 210"><span class="token sort_Id">ps</span></a></span><span class="operator">.</span>

<span class="keyword">rules</span> <span class="layout">// function declaration and resolving</span>

  <button class="modal-open" id="declareFunction_217_3" title="Multi-file references" data-urls="#declareFunction_218_3 line 218; ../webdsl-built-ins.stx/#declareFunction_11_49 line 11; ../webdsl-native.stx/#declareFunction_92_5 line 92; ../actions/functions.stx/#declareFunction_130_5 line 130, 135; ../entities/generated-functions.stx/#declareFunction_25_5 line 25, 32, 33, 34, 35, 36, 53, 54"><span class="token sort_Id">declareFunction</span></button> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#ORIGIN_31_5" id="ORIGIN_217_38" title="Defined at line 31"><span class="token sort_Id">ORIGIN</span></a></span> <span class="operator">*</span> <span class="keyword">list</span><span class="operator">(</span><span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_217_52" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">)</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_217_60" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span>
  <a href="#declareFunction_217_3" id="declareFunction_218_3" title="Defined at line 217"><span class="token sort_Id">declareFunction</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_218_75" id="s_218_19" title="Referenced at line 218"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#f_218_78" id="f_218_22" title="Referenced at line 218"><span class="token sort_Id">f</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#origin_218_81" id="origin_218_25" title="Referenced at line 218"><span class="token sort_Id">origin</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#args_218_89" id="args_218_33" title="Referenced at line 218"><span class="token sort_Id">args</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#return_218_95" id="return_218_39" title="Referenced at line 218"><span class="token sort_Id">return</span></a></span><span class="operator">)</span> <span class="operator">:-</span> <a href="#declareFunction_internal_223_3" id="declareFunction_internal_218_50" title="Defined at line 223"><span class="token sort_Id">declareFunction_internal</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_218_19" id="s_218_75" title="Defined at line 218"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#f_218_22" id="f_218_78" title="Defined at line 218"><span class="token sort_Id">f</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#origin_218_25" id="origin_218_81" title="Defined at line 218"><span class="token sort_Id">origin</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#args_218_33" id="args_218_89" title="Defined at line 218"><span class="token sort_Id">args</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#return_218_39" id="return_218_95" title="Defined at line 218"><span class="token sort_Id">return</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="#FALSE_35_5" id="FALSE_218_103" title="Defined at line 35"><span class="token sort_Id">FALSE</span></a>()</span><span class="operator">).</span>

  <button class="modal-open" id="declareStaticFunction_220_3" title="Multi-file references" data-urls="#declareStaticFunction_221_3 line 221; ../webdsl-native.stx/#declareStaticFunction_87_5 line 87; ../actions/functions.stx/#declareStaticFunction_134_61 line 134"><span class="token sort_Id">declareStaticFunction</span></button> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#ORIGIN_31_5" id="ORIGIN_220_44" title="Defined at line 31"><span class="token sort_Id">ORIGIN</span></a></span> <span class="operator">*</span> <span class="keyword">list</span><span class="operator">(</span><span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_220_58" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">)</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_220_66" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span>
  <a href="#declareStaticFunction_220_3" id="declareStaticFunction_221_3" title="Defined at line 220"><span class="token sort_Id">declareStaticFunction</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_221_81" id="s_221_25" title="Referenced at line 221"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#f_221_84" id="f_221_28" title="Referenced at line 221"><span class="token sort_Id">f</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#origin_221_87" id="origin_221_31" title="Referenced at line 221"><span class="token sort_Id">origin</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#args_221_95" id="args_221_39" title="Referenced at line 221"><span class="token sort_Id">args</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#return_221_101" id="return_221_45" title="Referenced at line 221"><span class="token sort_Id">return</span></a></span><span class="operator">)</span> <span class="operator">:-</span> <a href="#declareFunction_internal_223_3" id="declareFunction_internal_221_56" title="Defined at line 223"><span class="token sort_Id">declareFunction_internal</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_221_25" id="s_221_81" title="Defined at line 221"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#f_221_28" id="f_221_84" title="Defined at line 221"><span class="token sort_Id">f</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#origin_221_31" id="origin_221_87" title="Defined at line 221"><span class="token sort_Id">origin</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#args_221_39" id="args_221_95" title="Defined at line 221"><span class="token sort_Id">args</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#return_221_45" id="return_221_101" title="Defined at line 221"><span class="token sort_Id">return</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="#TRUE_34_5" id="TRUE_221_109" title="Defined at line 34"><span class="token sort_Id">TRUE</span></a>()</span><span class="operator">).</span>

  <a href="#declareFunction_internal_218_50" id="declareFunction_internal_223_3" title="Referenced at line 218, 221, 224"><span class="token sort_Id">declareFunction_internal</span></a> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#ORIGIN_31_5" id="ORIGIN_223_47" title="Defined at line 31"><span class="token sort_Id">ORIGIN</span></a></span> <span class="operator">*</span> <span class="keyword">list</span><span class="operator">(</span><span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_223_61" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">)</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_223_69" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#BOOL_30_5" id="BOOL_223_76" title="Defined at line 30"><span class="token sort_Id">BOOL</span></a></span>
  <a href="#declareFunction_internal_223_3" id="declareFunction_internal_224_3" title="Defined at line 223"><span class="token sort_Id">declareFunction_internal</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_226_37" id="s_224_28" title="Referenced at line 226"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#f_225_33" id="f_224_31" title="Referenced at line 225, 226"><span class="token sort_Id">f</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#origin_226_18" id="origin_224_34" title="Referenced at line 226"><span class="token sort_Id">origin</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#args_225_36" id="args_224_42" title="Referenced at line 225"><span class="token sort_Id">args</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#return_225_42" id="return_224_48" title="Referenced at line 225"><span class="token sort_Id">return</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#static_225_50" id="static_224_56" title="Referenced at line 225"><span class="token sort_Id">static</span></a></span><span class="operator">)</span> <span class="operator">:-</span> <span class="operator">{</span> <span class="cons_Var"><a href="#s_type_225_5" id="s_type_224_69" title="Referenced at line 225, 226"><span class="token sort_Id">s_type</span></a></span> <span class="operator">}</span>
    <span class="cons_Var"><a href="#s_type_224_69" id="s_type_225_5" title="Defined at line 224"><span class="token sort_Id">s_type</span></a></span> <span class="operator">==</span> <a href="#withType_113_3" id="withType_225_15" title="Defined at line 113"><span class="token sort_Id">withType</span></a><span class="operator">(</span><span class="cons_Op"><a href="../webdsl-types.stx/#FUNCTION_17_5" id="FUNCTION_225_24" title="Defined at ../webdsl-types.stx line 17"><span class="token sort_Id">FUNCTION</span></a><span class="operator">(</span><span class="cons_Var"><a href="#f_224_31" id="f_225_33" title="Defined at line 224"><span class="token sort_Id">f</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#args_224_42" id="args_225_36" title="Defined at line 224"><span class="token sort_Id">args</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#return_224_48" id="return_225_42" title="Defined at line 224"><span class="token sort_Id">return</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#static_224_56" id="static_225_50" title="Defined at line 224"><span class="token sort_Id">static</span></a></span>)</span><span class="operator">),</span>
    <span class="operator">!</span><span class="cons_Label"><a href="#function_65_5" id="function_226_6" title="Defined at line 65"><span class="token sort_Id">function</span></a></span><span class="operator">[</span><span class="cons_Var"><a href="#f_224_31" id="f_226_15" title="Defined at line 224"><span class="token sort_Id">f</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#origin_224_34" id="origin_226_18" title="Defined at line 224"><span class="token sort_Id">origin</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#s_type_224_69" id="s_type_226_26" title="Defined at line 224"><span class="token sort_Id">s_type</span></a></span><span class="operator">]</span> <span class="keyword">in</span> <span class="cons_Var"><a href="#s_224_28" id="s_226_37" title="Defined at line 224"><span class="token sort_Id">s</span></a></span><span class="operator">.</span>

  <button class="modal-open" id="resolveFunction_228_3" title="Multi-file references" data-urls="#resolveFunction_229_3 line 229; ../actions/functions.stx/#resolveFunction_39_16 line 39, 152"><span class="token sort_Id">resolveFunction</span></button> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_StringSort">string</span> <span class="operator">-&gt;</span> <span class="keyword">list</span><span class="operator">((</span><span class="cons_PathSort">path</span> <span class="operator">*</span> <span class="operator">(</span><span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_228_62" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">)))</span>
  <a href="#resolveFunction_228_3" id="resolveFunction_229_3" title="Defined at line 228"><span class="token sort_Id">resolveFunction</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_232_23" id="s_229_19" title="Referenced at line 232"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#f_231_39" id="f_229_22" title="Referenced at line 231"><span class="token sort_Id">f</span></a></span><span class="operator">)</span> <span class="operator">=</span> <a href="#filterFunctionResults_257_3" id="filterFunctionResults_229_27" title="Defined at line 257"><span class="token sort_Id">filterFunctionResults</span></a><span class="operator">(</span><a href="#typesOfStripOrigin_122_3" id="typesOfStripOrigin_229_49" title="Defined at line 122"><span class="token sort_Id">typesOfStripOrigin</span></a><span class="operator">(</span><span class="cons_Var"><a href="#ps_232_29" id="ps_229_68" title="Referenced at line 232"><span class="token sort_Id">ps</span></a></span><span class="operator">),</span> <span class="cons_Op"><a href="#FALSE_35_5" id="FALSE_229_73" title="Defined at line 35"><span class="token sort_Id">FALSE</span></a>()</span><span class="operator">)</span> <span class="operator">:-</span>
    <span class="keyword">query</span> <span class="cons_Label"><a href="#function_65_5" id="function_230_11" title="Defined at line 65"><span class="token sort_Id">function</span></a></span> <span class="keyword">filter</span> <span class="cons_Closure"><span class="cons_Label"><a href="#P_45_7" id="P_230_27" title="Defined at line 45"><span class="token sort_Id">P</span></a></span>*</span> <span class="cons_Closure"><span class="cons_Label"><a href="#F_46_7" id="F_230_30" title="Defined at line 46"><span class="token sort_Id">F</span></a></span>*</span> <span class="operator">((</span><span class="cons_Label"><a href="#EXTEND_47_7" id="EXTEND_230_35" title="Defined at line 47"><span class="token sort_Id">EXTEND</span></a></span><span class="operator">?</span> <span class="cons_Closure"><span class="operator">(</span><span class="cons_Label"><a href="#INHERIT_48_7" id="INHERIT_230_44" title="Defined at line 48"><span class="token sort_Id">INHERIT</span></a></span> <span class="cons_Label"><a href="#EXTEND_47_7" id="EXTEND_230_52" title="Defined at line 47"><span class="token sort_Id">EXTEND</span></a></span>?)*</span><span class="operator">)</span> <span class="operator">|</span> <span class="operator">(</span><span class="cons_Label"><a href="#DEF_49_7" id="DEF_230_66" title="Defined at line 49"><span class="token sort_Id">DEF</span></a></span><span class="operator">?</span> <span class="operator">(</span><span class="cons_Label"><a href="#IMPORT_50_7" id="IMPORT_230_72" title="Defined at line 50"><span class="token sort_Id">IMPORT</span></a></span> <span class="operator">|</span> <span class="cons_Label"><a href="#IMPORTLIB_51_7" id="IMPORTLIB_230_81" title="Defined at line 51"><span class="token sort_Id">IMPORTLIB</span></a></span><span class="operator">)?))</span>
                   <span class="keyword">and</span> <span class="operator">{</span> <span class="cons_Var"><a href="#f'_231_32" id="f'_231_26" title="Referenced at line 231"><span class="token sort_Id">f'</span></a></span> <span class="operator">:-</span> <span class="cons_Var"><a href="#f'_231_26" id="f'_231_32" title="Defined at line 231"><span class="token sort_Id">f'</span></a></span> <span class="operator">==</span> <span class="operator">(</span><span class="cons_Var"><a href="#f_229_22" id="f_231_39" title="Defined at line 229"><span class="token sort_Id">f</span></a></span><span class="operator">,</span> <span class="operator">_,</span> <span class="operator">_)</span> <span class="operator">}</span>
                   <span class="keyword">in</span> <span class="cons_Var"><a href="#s_229_19" id="s_232_23" title="Defined at line 229"><span class="token sort_Id">s</span></a></span> <span class="operator">|-&gt;</span> <span class="cons_Var"><a href="#ps_229_68" id="ps_232_29" title="Defined at line 229"><span class="token sort_Id">ps</span></a></span><span class="operator">.</span>

  <button class="modal-open" id="resolveEntityFunction_234_3" title="Multi-file references" data-urls="#resolveEntityFunction_235_3 line 235; ../webdsl-native.stx/#resolveEntityFunction_110_16 line 110; ../actions/functions.stx/#resolveEntityFunction_43_16 line 43; ../types/type-extensions.stx/#resolveEntityFunction_33_16 line 33"><span class="token sort_Id">resolveEntityFunction</span></button> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_StringSort">string</span> <span class="operator">-&gt;</span> <span class="keyword">list</span><span class="operator">((</span><span class="cons_PathSort">path</span> <span class="operator">*</span> <span class="operator">(</span><span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_234_68" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">)))</span>
  <a href="#resolveEntityFunction_234_3" id="resolveEntityFunction_235_3" title="Defined at line 234"><span class="token sort_Id">resolveEntityFunction</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_243_23" id="s_235_25" title="Referenced at line 243"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#x_237_39" id="x_235_28" title="Referenced at line 237"><span class="token sort_Id">x</span></a></span><span class="operator">)</span> <span class="operator">=</span> <a href="#filterFunctionResults_257_3" id="filterFunctionResults_235_33" title="Defined at line 257"><span class="token sort_Id">filterFunctionResults</span></a><span class="operator">(</span><a href="#typesOfStripOrigin_122_3" id="typesOfStripOrigin_235_55" title="Defined at line 122"><span class="token sort_Id">typesOfStripOrigin</span></a><span class="operator">(</span><span class="cons_Var"><a href="#ps_243_29" id="ps_235_74" title="Referenced at line 243"><span class="token sort_Id">ps</span></a></span><span class="operator">),</span> <span class="cons_Op"><a href="#FALSE_35_5" id="FALSE_235_79" title="Defined at line 35"><span class="token sort_Id">FALSE</span></a>()</span><span class="operator">)</span> <span class="operator">:-</span>
    <span class="keyword">query</span> <span class="cons_Label"><a href="#function_65_5" id="function_236_11" title="Defined at line 65"><span class="token sort_Id">function</span></a></span> <span class="keyword">filter</span> <span class="cons_Label"><a href="#EXTEND_47_7" id="EXTEND_236_27" title="Defined at line 47"><span class="token sort_Id">EXTEND</span></a></span><span class="operator">?</span> <span class="cons_Closure"><span class="operator">(</span><span class="cons_Label"><a href="#INHERIT_48_7" id="INHERIT_236_36" title="Defined at line 48"><span class="token sort_Id">INHERIT</span></a></span> <span class="cons_Label"><a href="#EXTEND_47_7" id="EXTEND_236_44" title="Defined at line 47"><span class="token sort_Id">EXTEND</span></a></span>?)*</span>
                   <span class="keyword">and</span> <span class="operator">{</span> <span class="cons_Var"><a href="#x'_237_32" id="x'_237_26" title="Referenced at line 237"><span class="token sort_Id">x'</span></a></span> <span class="operator">:-</span> <span class="cons_Var"><a href="#x'_237_26" id="x'_237_32" title="Defined at line 237"><span class="token sort_Id">x'</span></a></span> <span class="operator">==</span> <span class="operator">(</span><span class="cons_Var"><a href="#x_235_28" id="x_237_39" title="Defined at line 235"><span class="token sort_Id">x</span></a></span><span class="operator">,</span> <span class="operator">_,</span> <span class="operator">_)</span> <span class="operator">}</span>
                   <span class="keyword">min</span> <span class="operator">$</span> <span class="operator">&lt;</span> <span class="cons_Label"><a href="#INHERIT_48_7" id="INHERIT_238_28" title="Defined at line 48"><span class="token sort_Id">INHERIT</span></a></span><span class="operator">,</span> <span class="cons_Label"><a href="#EXTEND_47_7" id="EXTEND_238_37" title="Defined at line 47"><span class="token sort_Id">EXTEND</span></a></span> <span class="operator">&lt;</span> <span class="cons_Label"><a href="#INHERIT_48_7" id="INHERIT_238_46" title="Defined at line 48"><span class="token sort_Id">INHERIT</span></a></span> <span class="layout">// do not shadow EXTEND with $</span>
                   <span class="keyword">and</span> <span class="operator">{</span> <span class="operator">(</span><span class="cons_Var">f</span><span class="operator">,</span> <span class="operator">_,</span> <span class="cons_Var"><a href="#T1_240_35" id="T1_239_33" title="Referenced at line 240"><span class="token sort_Id">T1</span></a></span><span class="operator">),</span> <span class="operator">(</span><span class="cons_Var"><a href="#f_240_51" id="f_239_39" title="Referenced at line 240, 241"><span class="token sort_Id">f</span></a></span><span class="operator">,</span> <span class="operator">_,</span> <span class="cons_Var"><a href="#T2_241_35" id="T2_239_45" title="Referenced at line 241"><span class="token sort_Id">T2</span></a></span><span class="operator">)</span> <span class="operator">:-</span> <span class="operator">{</span><span class="cons_Var"><a href="#args_240_54" id="args_239_53" title="Referenced at line 240, 241"><span class="token sort_Id">args</span></a></span><span class="operator">}</span>
                     <a href="#simpleTypeOf_127_3" id="simpleTypeOf_240_22" title="Defined at line 127"><span class="token sort_Id">simpleTypeOf</span></a><span class="operator">(</span><span class="cons_Var"><a href="#T1_239_33" id="T1_240_35" title="Defined at line 239"><span class="token sort_Id">T1</span></a></span><span class="operator">)</span> <span class="operator">==</span> <span class="cons_Op"><a href="../webdsl-types.stx/#FUNCTION_17_5" id="FUNCTION_240_42" title="Defined at ../webdsl-types.stx line 17"><span class="token sort_Id">FUNCTION</span></a><span class="operator">(</span><span class="cons_Var"><a href="#f_239_39" id="f_240_51" title="Defined at line 239"><span class="token sort_Id">f</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#args_239_53" id="args_240_54" title="Defined at line 239"><span class="token sort_Id">args</span></a></span>, _, _)</span><span class="operator">,</span>
                     <a href="#simpleTypeOf_127_3" id="simpleTypeOf_241_22" title="Defined at line 127"><span class="token sort_Id">simpleTypeOf</span></a><span class="operator">(</span><span class="cons_Var"><a href="#T2_239_45" id="T2_241_35" title="Defined at line 239"><span class="token sort_Id">T2</span></a></span><span class="operator">)</span> <span class="operator">==</span> <span class="cons_Op"><a href="../webdsl-types.stx/#FUNCTION_17_5" id="FUNCTION_241_42" title="Defined at ../webdsl-types.stx line 17"><span class="token sort_Id">FUNCTION</span></a><span class="operator">(</span><span class="cons_Var"><a href="#f_239_39" id="f_241_51" title="Defined at line 239"><span class="token sort_Id">f</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#args_239_53" id="args_241_54" title="Defined at line 239"><span class="token sort_Id">args</span></a></span>, _, _)</span>
                   <span class="operator">}</span> <span class="layout">// only shadow when function has the same name and argument types</span>
                   <span class="keyword">in</span> <span class="cons_Var"><a href="#s_235_25" id="s_243_23" title="Defined at line 235"><span class="token sort_Id">s</span></a></span> <span class="operator">|-&gt;</span> <span class="cons_Var"><a href="#ps_235_74" id="ps_243_29" title="Defined at line 235"><span class="token sort_Id">ps</span></a></span><span class="operator">.</span>

  <button class="modal-open" id="resolveStaticEntityFunction_245_3" title="Multi-file references" data-urls="#resolveStaticEntityFunction_246_3 line 246; ../webdsl-native.stx/#resolveStaticEntityFunction_113_16 line 113; ../actions/functions.stx/#resolveStaticEntityFunction_46_16 line 46; ../types/type-extensions.stx/#resolveStaticEntityFunction_36_16 line 36"><span class="token sort_Id">resolveStaticEntityFunction</span></button> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_StringSort">string</span> <span class="operator">-&gt;</span> <span class="keyword">list</span><span class="operator">((</span><span class="cons_PathSort">path</span> <span class="operator">*</span> <span class="operator">(</span><span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_245_74" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">)))</span>
  <a href="#resolveStaticEntityFunction_245_3" id="resolveStaticEntityFunction_246_3" title="Defined at line 245"><span class="token sort_Id">resolveStaticEntityFunction</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_254_23" id="s_246_31" title="Referenced at line 254"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#x_248_39" id="x_246_34" title="Referenced at line 248"><span class="token sort_Id">x</span></a></span><span class="operator">)</span> <span class="operator">=</span> <a href="#filterFunctionResults_257_3" id="filterFunctionResults_246_39" title="Defined at line 257"><span class="token sort_Id">filterFunctionResults</span></a><span class="operator">(</span><a href="#typesOfStripOrigin_122_3" id="typesOfStripOrigin_246_61" title="Defined at line 122"><span class="token sort_Id">typesOfStripOrigin</span></a><span class="operator">(</span><span class="cons_Var"><a href="#ps_254_29" id="ps_246_80" title="Referenced at line 254"><span class="token sort_Id">ps</span></a></span><span class="operator">),</span> <span class="cons_Op"><a href="#TRUE_34_5" id="TRUE_246_85" title="Defined at line 34"><span class="token sort_Id">TRUE</span></a>()</span><span class="operator">)</span> <span class="operator">:-</span>
    <span class="keyword">query</span> <span class="cons_Label"><a href="#function_65_5" id="function_247_11" title="Defined at line 65"><span class="token sort_Id">function</span></a></span> <span class="keyword">filter</span> <span class="cons_Label"><a href="#EXTEND_47_7" id="EXTEND_247_27" title="Defined at line 47"><span class="token sort_Id">EXTEND</span></a></span><span class="operator">?</span> <span class="cons_Closure"><span class="operator">(</span><span class="cons_Label"><a href="#INHERIT_48_7" id="INHERIT_247_36" title="Defined at line 48"><span class="token sort_Id">INHERIT</span></a></span> <span class="cons_Label"><a href="#EXTEND_47_7" id="EXTEND_247_44" title="Defined at line 47"><span class="token sort_Id">EXTEND</span></a></span>?)*</span>
                   <span class="keyword">and</span> <span class="operator">{</span> <span class="cons_Var"><a href="#x'_248_32" id="x'_248_26" title="Referenced at line 248"><span class="token sort_Id">x'</span></a></span> <span class="operator">:-</span> <span class="cons_Var"><a href="#x'_248_26" id="x'_248_32" title="Defined at line 248"><span class="token sort_Id">x'</span></a></span> <span class="operator">==</span> <span class="operator">(</span><span class="cons_Var"><a href="#x_246_34" id="x_248_39" title="Defined at line 246"><span class="token sort_Id">x</span></a></span><span class="operator">,</span> <span class="operator">_,</span> <span class="operator">_)</span> <span class="operator">}</span>
                   <span class="keyword">min</span> <span class="operator">$</span> <span class="operator">&lt;</span> <span class="cons_Label"><a href="#INHERIT_48_7" id="INHERIT_249_28" title="Defined at line 48"><span class="token sort_Id">INHERIT</span></a></span><span class="operator">,</span> <span class="cons_Label"><a href="#EXTEND_47_7" id="EXTEND_249_37" title="Defined at line 47"><span class="token sort_Id">EXTEND</span></a></span> <span class="operator">&lt;</span> <span class="cons_Label"><a href="#INHERIT_48_7" id="INHERIT_249_46" title="Defined at line 48"><span class="token sort_Id">INHERIT</span></a></span> <span class="layout">// do not shadow EXTEND with $</span>
                   <span class="keyword">and</span> <span class="operator">{</span> <span class="operator">(</span><span class="cons_Var">f</span><span class="operator">,</span> <span class="operator">_,</span> <span class="cons_Var"><a href="#T1_251_35" id="T1_250_33" title="Referenced at line 251"><span class="token sort_Id">T1</span></a></span><span class="operator">),</span> <span class="operator">(</span><span class="cons_Var"><a href="#f_251_51" id="f_250_39" title="Referenced at line 251, 252"><span class="token sort_Id">f</span></a></span><span class="operator">,</span> <span class="operator">_,</span> <span class="cons_Var"><a href="#T2_252_35" id="T2_250_45" title="Referenced at line 252"><span class="token sort_Id">T2</span></a></span><span class="operator">)</span> <span class="operator">:-</span> <span class="operator">{</span><span class="cons_Var"><a href="#args_251_54" id="args_250_53" title="Referenced at line 251, 252"><span class="token sort_Id">args</span></a></span><span class="operator">}</span>
                     <a href="#simpleTypeOf_127_3" id="simpleTypeOf_251_22" title="Defined at line 127"><span class="token sort_Id">simpleTypeOf</span></a><span class="operator">(</span><span class="cons_Var"><a href="#T1_250_33" id="T1_251_35" title="Defined at line 250"><span class="token sort_Id">T1</span></a></span><span class="operator">)</span> <span class="operator">==</span> <span class="cons_Op"><a href="../webdsl-types.stx/#FUNCTION_17_5" id="FUNCTION_251_42" title="Defined at ../webdsl-types.stx line 17"><span class="token sort_Id">FUNCTION</span></a><span class="operator">(</span><span class="cons_Var"><a href="#f_250_39" id="f_251_51" title="Defined at line 250"><span class="token sort_Id">f</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#args_250_53" id="args_251_54" title="Defined at line 250"><span class="token sort_Id">args</span></a></span>, _, _)</span><span class="operator">,</span>
                     <a href="#simpleTypeOf_127_3" id="simpleTypeOf_252_22" title="Defined at line 127"><span class="token sort_Id">simpleTypeOf</span></a><span class="operator">(</span><span class="cons_Var"><a href="#T2_250_45" id="T2_252_35" title="Defined at line 250"><span class="token sort_Id">T2</span></a></span><span class="operator">)</span> <span class="operator">==</span> <span class="cons_Op"><a href="../webdsl-types.stx/#FUNCTION_17_5" id="FUNCTION_252_42" title="Defined at ../webdsl-types.stx line 17"><span class="token sort_Id">FUNCTION</span></a><span class="operator">(</span><span class="cons_Var"><a href="#f_250_39" id="f_252_51" title="Defined at line 250"><span class="token sort_Id">f</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#args_250_53" id="args_252_54" title="Defined at line 250"><span class="token sort_Id">args</span></a></span>, _, _)</span>
                   <span class="operator">}</span> <span class="layout">// only shadow when function has the same name and argument types</span>
                   <span class="keyword">in</span> <span class="cons_Var"><a href="#s_246_31" id="s_254_23" title="Defined at line 246"><span class="token sort_Id">s</span></a></span> <span class="operator">|-&gt;</span> <span class="cons_Var"><a href="#ps_246_80" id="ps_254_29" title="Defined at line 246"><span class="token sort_Id">ps</span></a></span><span class="operator">.</span>

  <span class="layout">// last BOOL arg indiciates if only static function should be returned (TRUE()) or all functions (FALSE())</span>
  <button class="modal-open" id="filterFunctionResults_257_3" title="Multi-file references" data-urls="#filterFunctionResults_229_27 line 229, 235, 246, 258, 259, 260, 261; ../actions/functions.stx/#filterFunctionResults_161_30 line 161"><span class="token sort_Id">filterFunctionResults</span></button> <span class="operator">:</span> <span class="keyword">list</span><span class="operator">((</span><span class="cons_PathSort">path</span> <span class="operator">*</span> <span class="operator">(</span><span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_257_50" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">)))</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#BOOL_30_5" id="BOOL_257_60" title="Defined at line 30"><span class="token sort_Id">BOOL</span></a></span> <span class="operator">-&gt;</span> <span class="keyword">list</span><span class="operator">((</span><span class="cons_PathSort">path</span> <span class="operator">*</span> <span class="operator">(</span><span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_257_91" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">)))</span>
  <a href="#filterFunctionResults_257_3" id="filterFunctionResults_258_3" title="Defined at line 257"><span class="token sort_Id">filterFunctionResults</span></a><span class="operator">([],</span> <span class="operator">_)</span> <span class="operator">=</span> <span class="operator">[].</span>
  <a href="#filterFunctionResults_257_3" id="filterFunctionResults_259_3" title="Defined at line 257"><span class="token sort_Id">filterFunctionResults</span></a><span class="operator">([</span><span class="cons_Var">f</span><span class="operator">@(_,</span> <span class="operator">(_,</span> <span class="cons_Op"><a href="../webdsl-types.stx/#FUNCTION_17_5" id="FUNCTION_259_36" title="Defined at ../webdsl-types.stx line 17"><span class="token sort_Id">FUNCTION</span></a><span class="operator">(_,</span> <span class="operator">_,</span> <span class="operator">_,</span> <span class="cons_Op"><a href="#TRUE_34_5" id="TRUE_259_54" title="Defined at line 34"><span class="token sort_Id">TRUE</span></a>()</span>)</span><span class="operator">))</span> <span class="operator">|</span> <span class="cons_Var"><span id="fs_259_66" title="Not referenced"><span class="token sort_Id">fs</span></span></span><span class="operator">],</span> <span class="cons_Var">b</span><span class="operator">@</span><span class="cons_Op"><a href="#TRUE_34_5" id="TRUE_259_73" title="Defined at line 34"><span class="token sort_Id">TRUE</span></a>()</span><span class="operator">)</span> <span class="operator">=</span> <span class="operator">[</span><span class="cons_Var"><span id="f_259_84" title="Not referenced"><span class="token sort_Id">f</span></span></span> <span class="operator">|</span> <a href="#filterFunctionResults_257_3" id="filterFunctionResults_259_88" title="Defined at line 257"><span class="token sort_Id">filterFunctionResults</span></a><span class="operator">(</span><span class="cons_Var">fs</span><span class="operator">,</span> <span class="cons_Var"><span id="b_259_114" title="Not referenced"><span class="token sort_Id">b</span></span></span><span class="operator">)].</span>
  <a href="#filterFunctionResults_257_3" id="filterFunctionResults_260_3" title="Defined at line 257"><span class="token sort_Id">filterFunctionResults</span></a><span class="operator">([</span><span class="cons_Var"><span id="f_260_26" title="Not referenced"><span class="token sort_Id">f</span></span></span><span class="operator">@(_,</span> <span class="operator">(_,</span> <span class="cons_Op"><a href="../webdsl-types.stx/#FUNCTION_17_5" id="FUNCTION_260_36" title="Defined at ../webdsl-types.stx line 17"><span class="token sort_Id">FUNCTION</span></a>(_, _, _, _)</span><span class="operator">))</span> <span class="operator">|</span> <span class="cons_Var">fs</span><span class="operator">],</span> <span class="cons_Var"><span id="b_260_66" title="Not referenced"><span class="token sort_Id">b</span></span></span><span class="operator">@</span><span class="cons_Op"><a href="#FALSE_35_5" id="FALSE_260_68" title="Defined at line 35"><span class="token sort_Id">FALSE</span></a>()</span><span class="operator">)</span> <span class="operator">=</span> <span class="operator">[</span><span class="cons_Var">f</span> <span class="operator">|</span> <a href="#filterFunctionResults_257_3" id="filterFunctionResults_260_84" title="Defined at line 257"><span class="token sort_Id">filterFunctionResults</span></a><span class="operator">(</span><span class="cons_Var"><span id="fs_260_106" title="Not referenced"><span class="token sort_Id">fs</span></span></span><span class="operator">,</span> <span class="cons_Var">b</span><span class="operator">)].</span>
  <a href="#filterFunctionResults_257_3" id="filterFunctionResults_261_3" title="Defined at line 257"><span class="token sort_Id">filterFunctionResults</span></a><span class="operator">([_</span> <span class="operator">|</span> <span class="cons_Var"><span id="fs_261_30" title="Not referenced"><span class="token sort_Id">fs</span></span></span><span class="operator">],</span> <span class="cons_Var"><span id="b_261_35" title="Not referenced"><span class="token sort_Id">b</span></span></span><span class="operator">)</span> <span class="operator">=</span> <a href="#filterFunctionResults_257_3" id="filterFunctionResults_261_40" title="Defined at line 257"><span class="token sort_Id">filterFunctionResults</span></a><span class="operator">(</span><span class="cons_Var">fs</span><span class="operator">,</span> <span class="cons_Var">b</span><span class="operator">).</span>

<span class="keyword">rules</span> <span class="layout">// action and placeholder declaration and resolving</span>

  <button class="modal-open" id="declareAction_265_3" title="Multi-file references" data-urls="#declareAction_266_3 line 266; ../ui/actions.stx/#declareAction_56_54 line 56"><span class="token sort_Id">declareAction</span></button> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#ORIGIN_31_5" id="ORIGIN_265_36" title="Defined at line 31"><span class="token sort_Id">ORIGIN</span></a></span> <span class="operator">*</span> <span class="keyword">list</span><span class="operator">(</span><span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_265_50" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">)</span>
  <a href="#declareAction_265_3" id="declareAction_266_3" title="Defined at line 265"><span class="token sort_Id">declareAction</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_267_54" id="s_266_17" title="Referenced at line 267, 268"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#a_267_15" id="a_266_20" title="Referenced at line 267, 268"><span class="token sort_Id">a</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#origin_267_18" id="origin_266_23" title="Referenced at line 267"><span class="token sort_Id">origin</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#ts_267_45" id="ts_266_31" title="Referenced at line 267, 268"><span class="token sort_Id">ts</span></a></span><span class="operator">)</span> <span class="operator">:-</span>
    <span class="operator">!</span><span class="cons_Label"><a href="#function_65_5" id="function_267_6" title="Defined at line 65"><span class="token sort_Id">function</span></a></span><span class="operator">[</span><span class="cons_Var"><a href="#a_266_20" id="a_267_15" title="Defined at line 266"><span class="token sort_Id">a</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#origin_266_23" id="origin_267_18" title="Defined at line 266"><span class="token sort_Id">origin</span></a></span><span class="operator">,</span> <a href="#withType_113_3" id="withType_267_26" title="Defined at line 113"><span class="token sort_Id">withType</span></a><span class="operator">(</span><span class="cons_Op"><a href="../webdsl-types.stx/#ACTION_18_5" id="ACTION_267_35" title="Defined at ../webdsl-types.stx line 18"><span class="token sort_Id">ACTION</span></a><span class="operator">(</span><span class="cons_Var"><a href="#a_266_20" id="a_267_42" title="Defined at line 266"><span class="token sort_Id">a</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#ts_266_31" id="ts_267_45" title="Defined at line 266"><span class="token sort_Id">ts</span></a></span>)</span><span class="operator">)]</span> <span class="keyword">in</span> <span class="cons_Var"><a href="#s_266_17" id="s_267_54" title="Defined at line 266"><span class="token sort_Id">s</span></a></span><span class="operator">,</span>
    <a href="#resolveAction_270_3" id="resolveAction_268_5" title="Defined at line 270"><span class="token sort_Id">resolveAction</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_266_17" id="s_268_19" title="Defined at line 266"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#a_266_20" id="a_268_22" title="Defined at line 266"><span class="token sort_Id">a</span></a></span><span class="operator">)</span> <span class="operator">==</span> <span class="operator">[(_,</span> <span class="operator">(_,</span> <span class="cons_Op"><a href="../webdsl-types.stx/#ACTION_18_5" id="ACTION_268_37" title="Defined at ../webdsl-types.stx line 18"><span class="token sort_Id">ACTION</span></a><span class="operator">(</span><span class="cons_Var"><a href="#a_266_20" id="a_268_44" title="Defined at line 266"><span class="token sort_Id">a</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#ts_266_31" id="ts_268_47" title="Defined at line 266"><span class="token sort_Id">ts</span></a></span>)</span><span class="operator">))]</span> <span class="operator">|</span> <span class="keyword">error</span> <span class="operator">$[</span><span class="cons_Text">Action </span><span class="operator">[</span><span class="cons_Var"><a href="#a_266_20" id="a_268_72" title="Defined at line 266"><span class="token sort_Id">a</span></a></span><span class="operator">]</span><span class="cons_Text"> is defined multiple times</span><span class="operator">]</span> <span class="operator">@</span><span class="cons_Var"><a href="#a_266_20" id="a_268_103" title="Defined at line 266"><span class="token sort_Id">a</span></a></span><span class="operator">.</span>

  <button class="modal-open" id="resolveAction_270_3" title="Multi-file references" data-urls="#resolveAction_268_5 line 268, 271; ../ui/actions.stx/#resolveAction_73_5 line 73"><span class="token sort_Id">resolveAction</span></button> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_StringSort">string</span> <span class="operator">-&gt;</span> <span class="keyword">list</span><span class="operator">((</span><span class="cons_PathSort">path</span> <span class="operator">*</span> <span class="operator">(</span><span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_270_60" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">)))</span>
  <a href="#resolveAction_270_3" id="resolveAction_271_3" title="Defined at line 270"><span class="token sort_Id">resolveAction</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_274_23" id="s_271_17" title="Referenced at line 274"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#a_273_39" id="a_271_20" title="Referenced at line 273"><span class="token sort_Id">a</span></a></span><span class="operator">)</span> <span class="operator">=</span> <a href="#filterActionResults_289_3" id="filterActionResults_271_25" title="Defined at line 289"><span class="token sort_Id">filterActionResults</span></a><span class="operator">(</span><a href="#typesOfStripOrigin_122_3" id="typesOfStripOrigin_271_45" title="Defined at line 122"><span class="token sort_Id">typesOfStripOrigin</span></a><span class="operator">(</span><span class="cons_Var"><a href="#as_274_29" id="as_271_64" title="Referenced at line 274"><span class="token sort_Id">as</span></a></span><span class="operator">))</span> <span class="operator">:-</span>
    <span class="keyword">query</span> <span class="cons_Label"><a href="#function_65_5" id="function_272_11" title="Defined at line 65"><span class="token sort_Id">function</span></a></span> <span class="keyword">filter</span> <span class="cons_Closure"><span class="cons_Label"><a href="#P_45_7" id="P_272_27" title="Defined at line 45"><span class="token sort_Id">P</span></a></span>*</span>
                   <span class="keyword">and</span> <span class="operator">{</span> <span class="cons_Var"><a href="#a'_273_32" id="a'_273_26" title="Referenced at line 273"><span class="token sort_Id">a'</span></a></span> <span class="operator">:-</span> <span class="cons_Var"><a href="#a'_273_26" id="a'_273_32" title="Defined at line 273"><span class="token sort_Id">a'</span></a></span> <span class="operator">==</span> <span class="operator">(</span><span class="cons_Var"><a href="#a_271_20" id="a_273_39" title="Defined at line 271"><span class="token sort_Id">a</span></a></span><span class="operator">,</span> <span class="operator">_,</span> <span class="operator">_)</span> <span class="operator">}</span>
                   <span class="keyword">in</span> <span class="cons_Var"><a href="#s_271_17" id="s_274_23" title="Defined at line 271"><span class="token sort_Id">s</span></a></span> <span class="operator">|-&gt;</span> <span class="cons_Var"><a href="#as_271_64" id="as_274_29" title="Defined at line 271"><span class="token sort_Id">as</span></a></span><span class="operator">.</span>

  <button class="modal-open" id="declarePlaceholder_276_3" title="Multi-file references" data-urls="#declarePlaceholder_277_3 line 277; ../ui/ajax.stx/#declarePlaceholder_14_5 line 14, 22, 30, 38"><span class="token sort_Id">declarePlaceholder</span></button> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_StringSort">string</span>
  <a href="#declarePlaceholder_276_3" id="declarePlaceholder_277_3" title="Defined at line 276"><span class="token sort_Id">declarePlaceholder</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_278_35" id="s_277_22" title="Referenced at line 278, 279"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#ph_278_10" id="ph_277_25" title="Referenced at line 278, 279"><span class="token sort_Id">ph</span></a></span><span class="operator">)</span> <span class="operator">:-</span>
    <span class="operator">!</span><span class="cons_Label"><a href="#var_67_5" id="var_278_6" title="Defined at line 67"><span class="token sort_Id">var</span></a></span><span class="operator">[</span><span class="cons_Var"><a href="#ph_277_25" id="ph_278_10" title="Defined at line 277"><span class="token sort_Id">ph</span></a></span><span class="operator">,</span> <a href="#withType_113_3" id="withType_278_14" title="Defined at line 113"><span class="token sort_Id">withType</span></a><span class="operator">(</span><a href="../types/built-ins.stx/#placeholder_62_3" id="placeholder_278_23" title="Defined at ../types/built-ins.stx line 62"><span class="token sort_Id">placeholder</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_277_22" id="s_278_35" title="Defined at line 277"><span class="token sort_Id">s</span></a></span><span class="operator">))]</span> <span class="keyword">in</span> <span class="cons_Var"><a href="#s_277_22" id="s_278_43" title="Defined at line 277"><span class="token sort_Id">s</span></a></span><span class="operator">,</span>
    <a href="../webdsl-actions.stx/#noDuplicateVarDefs_86_3" id="noDuplicateVarDefs_279_5" title="Defined at ../webdsl-actions.stx line 86"><span class="token sort_Id">noDuplicateVarDefs</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_277_22" id="s_279_24" title="Defined at line 277"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#ph_277_25" id="ph_279_27" title="Defined at line 277"><span class="token sort_Id">ph</span></a></span><span class="operator">)</span> <span class="operator">|</span> <span class="keyword">error</span> <span class="operator">$[</span><span class="cons_Text">Variable </span><span class="operator">[</span><span class="cons_Var"><a href="#ph_277_25" id="ph_279_51" title="Defined at line 277"><span class="token sort_Id">ph</span></a></span><span class="operator">]</span><span class="cons_Text"> is defined multiple times</span><span class="operator">]</span> <span class="operator">@</span><span class="cons_Var"><a href="#ph_277_25" id="ph_279_83" title="Defined at line 277"><span class="token sort_Id">ph</span></a></span><span class="operator">.</span>

  <button class="modal-open" id="resolvePlaceholder_281_3" title="Multi-file references" data-urls="#resolvePlaceholder_282_3 line 282; ../ui/ajax.stx/#resolvePlaceholder_85_5 line 85"><span class="token sort_Id">resolvePlaceholder</span></button> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_StringSort">string</span> <span class="operator">-&gt;</span> <span class="keyword">list</span><span class="operator">((</span><span class="cons_PathSort">path</span> <span class="operator">*</span> <span class="operator">(</span><span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_281_65" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">)))</span>
  <a href="#resolvePlaceholder_281_3" id="resolvePlaceholder_282_3" title="Defined at line 281"><span class="token sort_Id">resolvePlaceholder</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_285_18" id="s_282_22" title="Referenced at line 285"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#ph_284_36" id="ph_282_25" title="Referenced at line 284"><span class="token sort_Id">ph</span></a></span><span class="operator">)</span> <span class="operator">=</span> <span class="cons_Var"><a href="#result_287_5" id="result_282_31" title="Referenced at line 287"><span class="token sort_Id">result</span></a></span> <span class="operator">:-</span> <span class="operator">{</span> <span class="cons_Var"><a href="#ph_scopes_285_24" id="ph_scopes_282_43" title="Referenced at line 285, 286"><span class="token sort_Id">ph_scopes</span></a></span> <span class="cons_Var"><a href="#phs_286_5" id="phs_282_53" title="Referenced at line 286, 287"><span class="token sort_Id">phs</span></a></span> <span class="operator">}</span>
    <span class="keyword">query</span> <span class="cons_Label"><a href="#var_67_5" id="var_283_11" title="Defined at line 67"><span class="token sort_Id">var</span></a></span> <span class="keyword">filter</span> <span class="cons_Closure"><span class="cons_Label"><a href="#P_45_7" id="P_283_22" title="Defined at line 45"><span class="token sort_Id">P</span></a></span>*</span>
              <span class="keyword">and</span> <span class="operator">{</span> <span class="cons_Var"><a href="#ph'_284_28" id="ph'_284_21" title="Referenced at line 284"><span class="token sort_Id">ph'</span></a></span> <span class="operator">:-</span> <span class="cons_Var"><a href="#ph'_284_21" id="ph'_284_28" title="Defined at line 284"><span class="token sort_Id">ph'</span></a></span> <span class="operator">==</span> <span class="operator">(</span><span class="cons_Var"><a href="#ph_282_25" id="ph_284_36" title="Defined at line 282"><span class="token sort_Id">ph</span></a></span><span class="operator">,</span> <span class="operator">_)</span> <span class="operator">}</span>
              <span class="keyword">in</span> <span class="cons_Var"><a href="#s_282_22" id="s_285_18" title="Defined at line 282"><span class="token sort_Id">s</span></a></span> <span class="operator">|-&gt;</span> <span class="cons_Var"><a href="#ph_scopes_282_43" id="ph_scopes_285_24" title="Defined at line 282"><span class="token sort_Id">ph_scopes</span></a></span><span class="operator">,</span>
    <span class="cons_Var"><a href="#phs_282_53" id="phs_286_5" title="Defined at line 282"><span class="token sort_Id">phs</span></a></span> <span class="operator">==</span> <a href="#typesOf_117_3" id="typesOf_286_12" title="Defined at line 117"><span class="token sort_Id">typesOf</span></a><span class="operator">(</span><span class="cons_Var"><a href="#ph_scopes_282_43" id="ph_scopes_286_20" title="Defined at line 282"><span class="token sort_Id">ph_scopes</span></a></span><span class="operator">),</span>
    <span class="cons_Var"><a href="#result_282_31" id="result_287_5" title="Defined at line 282"><span class="token sort_Id">result</span></a></span> <span class="operator">==</span> <a href="#filterPlaceholderResults_294_3" id="filterPlaceholderResults_287_15" title="Defined at line 294"><span class="token sort_Id">filterPlaceholderResults</span></a><span class="operator">(</span><span class="cons_Var"><a href="#phs_282_53" id="phs_287_40" title="Defined at line 282"><span class="token sort_Id">phs</span></a></span><span class="operator">).</span>

  <a href="#filterActionResults_271_25" id="filterActionResults_289_3" title="Referenced at line 271, 290, 291, 292"><span class="token sort_Id">filterActionResults</span></a> <span class="operator">:</span> <span class="keyword">list</span><span class="operator">((</span><span class="cons_PathSort">path</span> <span class="operator">*</span> <span class="operator">(</span><span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_289_48" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">)))</span> <span class="operator">-&gt;</span> <span class="keyword">list</span><span class="operator">((</span><span class="cons_PathSort">path</span> <span class="operator">*</span> <span class="operator">(</span><span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_289_82" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">)))</span>
  <a href="#filterActionResults_289_3" id="filterActionResults_290_3" title="Defined at line 289"><span class="token sort_Id">filterActionResults</span></a><span class="operator">([])</span> <span class="operator">=</span> <span class="operator">[].</span>
  <a href="#filterActionResults_289_3" id="filterActionResults_291_3" title="Defined at line 289"><span class="token sort_Id">filterActionResults</span></a><span class="operator">([</span><span class="cons_Var">a</span><span class="operator">@(_,</span> <span class="operator">(_,</span> <span class="cons_Op"><a href="../webdsl-types.stx/#ACTION_18_5" id="ACTION_291_34" title="Defined at ../webdsl-types.stx line 18"><span class="token sort_Id">ACTION</span></a>(_, _)</span><span class="operator">))</span> <span class="operator">|</span> <span class="cons_Var"><span id="as_291_51" title="Not referenced"><span class="token sort_Id">as</span></span></span><span class="operator">])</span> <span class="operator">=</span> <span class="operator">[</span><span class="cons_Var"><span id="a_291_59" title="Not referenced"><span class="token sort_Id">a</span></span></span> <span class="operator">|</span> <a href="#filterActionResults_289_3" id="filterActionResults_291_63" title="Defined at line 289"><span class="token sort_Id">filterActionResults</span></a><span class="operator">(</span><span class="cons_Var">as</span><span class="operator">)].</span>
  <a href="#filterActionResults_289_3" id="filterActionResults_292_3" title="Defined at line 289"><span class="token sort_Id">filterActionResults</span></a><span class="operator">([_</span> <span class="operator">|</span> <span class="cons_Var"><span id="as_292_28" title="Not referenced"><span class="token sort_Id">as</span></span></span><span class="operator">])</span> <span class="operator">=</span> <a href="#filterActionResults_289_3" id="filterActionResults_292_35" title="Defined at line 289"><span class="token sort_Id">filterActionResults</span></a><span class="operator">(</span><span class="cons_Var">as</span><span class="operator">).</span>

  <a href="#filterPlaceholderResults_287_15" id="filterPlaceholderResults_294_3" title="Referenced at line 287, 295, 296, 297"><span class="token sort_Id">filterPlaceholderResults</span></a> <span class="operator">:</span> <span class="keyword">list</span><span class="operator">((</span><span class="cons_PathSort">path</span> <span class="operator">*</span> <span class="operator">(</span><span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_294_53" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">)))</span> <span class="operator">-&gt;</span> <span class="keyword">list</span><span class="operator">((</span><span class="cons_PathSort">path</span> <span class="operator">*</span> <span class="operator">(</span><span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_294_87" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">)))</span>
  <a href="#filterPlaceholderResults_294_3" id="filterPlaceholderResults_295_3" title="Defined at line 294"><span class="token sort_Id">filterPlaceholderResults</span></a><span class="operator">([])</span> <span class="operator">=</span> <span class="operator">[].</span>
  <a href="#filterPlaceholderResults_294_3" id="filterPlaceholderResults_296_3" title="Defined at line 294"><span class="token sort_Id">filterPlaceholderResults</span></a><span class="operator">([</span><span class="cons_Var">ph</span><span class="operator">@(_,</span> <span class="operator">(_,</span> <span class="cons_Op"><a href="../webdsl-types.stx/#BUILTINTYPE_40_5" id="BUILTINTYPE_296_40" title="Defined at ../webdsl-types.stx line 40"><span class="token sort_Id">BUILTINTYPE</span></a><span class="operator">(</span><span class="cons_Str"><span class="operator">"</span>Placeholder"</span>, _)</span><span class="operator">))</span> <span class="operator">|</span> <span class="cons_Var">phs</span><span class="operator">])</span> <span class="operator">=</span> <span class="operator">[</span><span class="cons_Var"><span id="ph_296_83" title="Not referenced"><span class="token sort_Id">ph</span></span></span> <span class="operator">|</span> <a href="#filterPlaceholderResults_294_3" id="filterPlaceholderResults_296_88" title="Defined at line 294"><span class="token sort_Id">filterPlaceholderResults</span></a><span class="operator">(</span><span class="cons_Var"><span id="phs_296_113" title="Not referenced"><span class="token sort_Id">phs</span></span></span><span class="operator">)].</span>
  <a href="#filterPlaceholderResults_294_3" id="filterPlaceholderResults_297_3" title="Defined at line 294"><span class="token sort_Id">filterPlaceholderResults</span></a><span class="operator">([_</span> <span class="operator">|</span> <span class="cons_Var">phs</span><span class="operator">])</span> <span class="operator">=</span> <a href="#filterPlaceholderResults_294_3" id="filterPlaceholderResults_297_41" title="Defined at line 294"><span class="token sort_Id">filterPlaceholderResults</span></a><span class="operator">(</span><span class="cons_Var"><span id="phs_297_66" title="Not referenced"><span class="token sort_Id">phs</span></span></span><span class="operator">).</span>

<span class="keyword">rules</span> <span class="layout">// variable declaration and resolving</span>

  <button class="modal-open" id="declareVar_301_3" title="Multi-file references" data-urls="#declareVar_302_3 line 302, 335, 340; ../webdsl-ac.stx/#declareVar_30_5 line 30, 104, 105, 113, 114, 196, 197; ../webdsl-actions.stx/#declareVar_52_5 line 52, 59, 65, 70, 77, 83, 202, 329, 339; ../webdsl-entities.stx/#declareVar_28_5 line 28, 38, 44, 85, 90, 96, 103, 142; ../webdsl-hql.stx/#declareVar_125_47 line 125; ../webdsl-native.stx/#declareVar_43_5 line 43, 72; ../webdsl-ui.stx/#declareVar_252_5 line 252, 289; ../entities/built-ins.stx/#declareVar_20_5 line 20, 21, 22, 23, 24, 25, 32, 36, 37, 38, 39, 40, 41, 42; ../types/built-ins.stx/#declareVar_22_5 line 22, 32; ../ui/actions.stx/#declareVar_27_5 line 27, 34, 40, 151, 161, 170, 180"><span class="token sort_Id">declareVar</span></button> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_301_33" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span>
  <a href="#declareVar_301_3" id="declareVar_302_3" title="Defined at line 301"><span class="token sort_Id">declareVar</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_303_29" id="s_302_14" title="Referenced at line 303, 304"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#x_303_10" id="x_302_17" title="Referenced at line 303, 304"><span class="token sort_Id">x</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#t_303_22" id="t_302_20" title="Referenced at line 303"><span class="token sort_Id">t</span></a></span><span class="operator">)</span> <span class="operator">:-</span>
    <span class="operator">!</span><span class="cons_Label"><a href="#var_67_5" id="var_303_6" title="Defined at line 67"><span class="token sort_Id">var</span></a></span><span class="operator">[</span><span class="cons_Var"><a href="#x_302_17" id="x_303_10" title="Defined at line 302"><span class="token sort_Id">x</span></a></span><span class="operator">,</span> <a href="#withType_113_3" id="withType_303_13" title="Defined at line 113"><span class="token sort_Id">withType</span></a><span class="operator">(</span><span class="cons_Var"><a href="#t_302_20" id="t_303_22" title="Defined at line 302"><span class="token sort_Id">t</span></a></span><span class="operator">)]</span> <span class="keyword">in</span> <span class="cons_Var"><a href="#s_302_14" id="s_303_29" title="Defined at line 302"><span class="token sort_Id">s</span></a></span><span class="operator">,</span>
    <a href="../webdsl-actions.stx/#noDuplicateVarDefs_86_3" id="noDuplicateVarDefs_304_5" title="Defined at ../webdsl-actions.stx line 86"><span class="token sort_Id">noDuplicateVarDefs</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_302_14" id="s_304_24" title="Defined at line 302"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#x_302_17" id="x_304_27" title="Defined at line 302"><span class="token sort_Id">x</span></a></span><span class="operator">)</span> <span class="operator">|</span> <span class="keyword">error</span> <span class="operator">$[</span><span class="cons_Text">A variable named </span><span class="operator">[</span><span class="cons_Var"><a href="#x_302_17" id="x_304_58" title="Defined at line 302"><span class="token sort_Id">x</span></a></span><span class="operator">]</span><span class="cons_Text"> already exists in this scope</span><span class="operator">].</span>

  <button class="modal-open" id="resolveVar_306_3" title="Multi-file references" data-urls="#resolveVar_307_3 line 307; ../webdsl-ac.stx/#resolveVar_280_5 line 280; ../webdsl-entities.stx/#resolveVar_185_5 line 185; ../webdsl-hql.stx/#resolveVar_66_5 line 66, 71, 133; ../webdsl-types.stx/#resolveVar_241_5 line 241"><span class="token sort_Id">resolveVar</span></button> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_StringSort">string</span> <span class="operator">-&gt;</span> <span class="keyword">list</span><span class="operator">((</span><span class="cons_PathSort">path</span> <span class="operator">*</span> <span class="operator">(</span><span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_306_57" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">)))</span>
  <a href="#resolveVar_306_3" id="resolveVar_307_3" title="Defined at line 306"><span class="token sort_Id">resolveVar</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_312_18" id="s_307_14" title="Referenced at line 312"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#x_309_34" id="x_307_17" title="Referenced at line 309"><span class="token sort_Id">x</span></a></span><span class="operator">)</span> <span class="operator">=</span> <a href="#typesOf_117_3" id="typesOf_307_22" title="Defined at line 117"><span class="token sort_Id">typesOf</span></a><span class="operator">(</span><span class="cons_Var"><a href="#ps_312_24" id="ps_307_30" title="Referenced at line 312"><span class="token sort_Id">ps</span></a></span><span class="operator">)</span> <span class="operator">:-</span>
    <span class="keyword">query</span> <span class="cons_Label"><a href="#var_67_5" id="var_308_11" title="Defined at line 67"><span class="token sort_Id">var</span></a></span> <span class="keyword">filter</span> <span class="cons_Closure"><span class="cons_Label"><a href="#P_45_7" id="P_308_22" title="Defined at line 45"><span class="token sort_Id">P</span></a></span>*</span> <span class="cons_Closure"><span class="cons_Label"><a href="#F_46_7" id="F_308_25" title="Defined at line 46"><span class="token sort_Id">F</span></a></span>*</span> <span class="operator">((</span><span class="cons_Label"><a href="#EXTEND_47_7" id="EXTEND_308_30" title="Defined at line 47"><span class="token sort_Id">EXTEND</span></a></span><span class="operator">?</span> <span class="cons_Closure"><span class="operator">(</span><span class="cons_Label"><a href="#INHERIT_48_7" id="INHERIT_308_39" title="Defined at line 48"><span class="token sort_Id">INHERIT</span></a></span> <span class="cons_Label"><a href="#EXTEND_47_7" id="EXTEND_308_47" title="Defined at line 47"><span class="token sort_Id">EXTEND</span></a></span>?)*</span><span class="operator">)</span> <span class="operator">|</span> <span class="operator">(</span><span class="cons_Label"><a href="#DEF_49_7" id="DEF_308_61" title="Defined at line 49"><span class="token sort_Id">DEF</span></a></span><span class="operator">?</span> <span class="operator">(</span><span class="cons_Label"><a href="#IMPORT_50_7" id="IMPORT_308_67" title="Defined at line 50"><span class="token sort_Id">IMPORT</span></a></span> <span class="operator">|</span> <span class="cons_Label"><a href="#IMPORTLIB_51_7" id="IMPORTLIB_308_76" title="Defined at line 51"><span class="token sort_Id">IMPORTLIB</span></a></span><span class="operator">)?))</span>
              <span class="keyword">and</span> <span class="operator">{</span> <span class="cons_Var"><a href="#x'_309_27" id="x'_309_21" title="Referenced at line 309"><span class="token sort_Id">x'</span></a></span> <span class="operator">:-</span> <span class="cons_Var"><a href="#x'_309_21" id="x'_309_27" title="Defined at line 309"><span class="token sort_Id">x'</span></a></span> <span class="operator">==</span> <span class="operator">(</span><span class="cons_Var"><a href="#x_307_17" id="x_309_34" title="Defined at line 307"><span class="token sort_Id">x</span></a></span><span class="operator">,</span> <span class="operator">_)</span> <span class="operator">}</span>
              <span class="keyword">min</span> <span class="operator">$</span> <span class="operator">&lt;</span> <span class="cons_Label"><a href="#P_45_7" id="P_310_23" title="Defined at line 45"><span class="token sort_Id">P</span></a></span><span class="operator">,</span> <span class="cons_Label"><a href="#P_45_7" id="P_310_26" title="Defined at line 45"><span class="token sort_Id">P</span></a></span> <span class="operator">&lt;</span> <span class="cons_Label"><a href="#F_46_7" id="F_310_30" title="Defined at line 46"><span class="token sort_Id">F</span></a></span><span class="operator">,</span> <span class="cons_Label"><a href="#F_46_7" id="F_310_33" title="Defined at line 46"><span class="token sort_Id">F</span></a></span> <span class="operator">&lt;</span> <span class="cons_Label"><a href="#EXTEND_47_7" id="EXTEND_310_37" title="Defined at line 47"><span class="token sort_Id">EXTEND</span></a></span><span class="operator">,</span> <span class="cons_Label"><a href="#EXTEND_47_7" id="EXTEND_310_45" title="Defined at line 47"><span class="token sort_Id">EXTEND</span></a></span> <span class="operator">&lt;</span> <span class="cons_Label"><a href="#INHERIT_48_7" id="INHERIT_310_54" title="Defined at line 48"><span class="token sort_Id">INHERIT</span></a></span><span class="operator">,</span> <span class="cons_Label"><a href="#INHERIT_48_7" id="INHERIT_310_63" title="Defined at line 48"><span class="token sort_Id">INHERIT</span></a></span> <span class="operator">&lt;</span> <span class="cons_Label"><a href="#DEF_49_7" id="DEF_310_73" title="Defined at line 49"><span class="token sort_Id">DEF</span></a></span><span class="operator">,</span> <span class="cons_Label"><a href="#DEF_49_7" id="DEF_310_78" title="Defined at line 49"><span class="token sort_Id">DEF</span></a></span> <span class="operator">&lt;</span> <span class="cons_Label"><a href="#IMPORT_50_7" id="IMPORT_310_84" title="Defined at line 50"><span class="token sort_Id">IMPORT</span></a></span><span class="operator">,</span> <span class="cons_Label"><a href="#IMPORT_50_7" id="IMPORT_310_92" title="Defined at line 50"><span class="token sort_Id">IMPORT</span></a></span> <span class="operator">&lt;</span> <span class="cons_Label"><a href="#IMPORTLIB_51_7" id="IMPORTLIB_310_101" title="Defined at line 51"><span class="token sort_Id">IMPORTLIB</span></a></span>
              <span class="keyword">and</span> <span class="keyword">true</span>
              <span class="keyword">in</span> <span class="cons_Var"><a href="#s_307_14" id="s_312_18" title="Defined at line 307"><span class="token sort_Id">s</span></a></span> <span class="operator">|-&gt;</span> <span class="cons_Var"><a href="#ps_307_30" id="ps_312_24" title="Defined at line 307"><span class="token sort_Id">ps</span></a></span><span class="operator">.</span>

  <button class="modal-open" id="resolveProperty_314_3" title="Multi-file references" data-urls="#resolveProperty_315_3 line 315; ../webdsl-ac.stx/#resolveProperty_269_5 line 269, 274; ../webdsl-actions.stx/#resolveProperty_96_5 line 96; ../webdsl-types.stx/#resolveProperty_246_29 line 246, 252"><span class="token sort_Id">resolveProperty</span></button> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_StringSort">string</span> <span class="operator">-&gt;</span> <span class="keyword">list</span><span class="operator">((</span><span class="cons_PathSort">path</span> <span class="operator">*</span> <span class="operator">(</span><span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_314_62" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">)))</span>
  <a href="#resolveProperty_314_3" id="resolveProperty_315_3" title="Defined at line 314"><span class="token sort_Id">resolveProperty</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_entity_318_18" id="s_entity_315_19" title="Referenced at line 318"><span class="token sort_Id">s_entity</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#x_317_34" id="x_315_29" title="Referenced at line 317"><span class="token sort_Id">x</span></a></span><span class="operator">)</span> <span class="operator">=</span> <a href="#typesOf_117_3" id="typesOf_315_34" title="Defined at line 117"><span class="token sort_Id">typesOf</span></a><span class="operator">(</span><span class="cons_Var"><a href="#ps_318_31" id="ps_315_42" title="Referenced at line 318"><span class="token sort_Id">ps</span></a></span><span class="operator">)</span> <span class="operator">:-</span>
    <span class="keyword">query</span> <span class="cons_Label"><a href="#var_67_5" id="var_316_11" title="Defined at line 67"><span class="token sort_Id">var</span></a></span> <span class="keyword">filter</span> <span class="cons_Label"><a href="#EXTEND_47_7" id="EXTEND_316_22" title="Defined at line 47"><span class="token sort_Id">EXTEND</span></a></span><span class="operator">?</span> <span class="cons_Closure"><span class="operator">(</span><span class="cons_Label"><a href="#INHERIT_48_7" id="INHERIT_316_31" title="Defined at line 48"><span class="token sort_Id">INHERIT</span></a></span> <span class="cons_Label"><a href="#EXTEND_47_7" id="EXTEND_316_39" title="Defined at line 47"><span class="token sort_Id">EXTEND</span></a></span>?)*</span>
              <span class="keyword">and</span> <span class="operator">{</span> <span class="cons_Var"><a href="#x'_317_27" id="x'_317_21" title="Referenced at line 317"><span class="token sort_Id">x'</span></a></span> <span class="operator">:-</span> <span class="cons_Var"><a href="#x'_317_21" id="x'_317_27" title="Defined at line 317"><span class="token sort_Id">x'</span></a></span> <span class="operator">==</span> <span class="operator">(</span><span class="cons_Var"><a href="#x_315_29" id="x_317_34" title="Defined at line 315"><span class="token sort_Id">x</span></a></span><span class="operator">,</span> <span class="operator">_)</span> <span class="operator">}</span>
              <span class="keyword">in</span> <span class="cons_Var"><a href="#s_entity_315_19" id="s_entity_318_18" title="Defined at line 315"><span class="token sort_Id">s_entity</span></a></span> <span class="operator">|-&gt;</span> <span class="cons_Var"><a href="#ps_315_42" id="ps_318_31" title="Defined at line 315"><span class="token sort_Id">ps</span></a></span><span class="operator">.</span>

  <button class="modal-open" id="resolveLocalProperty_320_3" title="Multi-file references" data-urls="#resolveLocalProperty_321_3 line 321; ../webdsl-entities.stx/#resolveLocalProperty_143_5 line 143; ../entities/annotations.stx/#resolveLocalProperty_183_5 line 183"><span class="token sort_Id">resolveLocalProperty</span></button> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_StringSort">string</span> <span class="operator">-&gt;</span> <span class="keyword">list</span><span class="operator">((</span><span class="cons_PathSort">path</span> <span class="operator">*</span> <span class="operator">(</span><span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_320_67" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">)))</span>
  <a href="#resolveLocalProperty_320_3" id="resolveLocalProperty_321_3" title="Defined at line 320"><span class="token sort_Id">resolveLocalProperty</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_entity_324_18" id="s_entity_321_24" title="Referenced at line 324"><span class="token sort_Id">s_entity</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#x_323_34" id="x_321_34" title="Referenced at line 323"><span class="token sort_Id">x</span></a></span><span class="operator">)</span> <span class="operator">=</span> <a href="#typesOf_117_3" id="typesOf_321_39" title="Defined at line 117"><span class="token sort_Id">typesOf</span></a><span class="operator">(</span><span class="cons_Var"><a href="#ps_324_31" id="ps_321_47" title="Referenced at line 324"><span class="token sort_Id">ps</span></a></span><span class="operator">)</span> <span class="operator">:-</span>
    <span class="keyword">query</span> <span class="cons_Label"><a href="#var_67_5" id="var_322_11" title="Defined at line 67"><span class="token sort_Id">var</span></a></span> <span class="keyword">filter</span> <span class="cons_Label"><a href="#EXTEND_47_7" id="EXTEND_322_22" title="Defined at line 47"><span class="token sort_Id">EXTEND</span></a></span><span class="operator">?</span>
              <span class="keyword">and</span> <span class="operator">{</span> <span class="cons_Var"><a href="#x'_323_27" id="x'_323_21" title="Referenced at line 323"><span class="token sort_Id">x'</span></a></span> <span class="operator">:-</span> <span class="cons_Var"><a href="#x'_323_21" id="x'_323_27" title="Defined at line 323"><span class="token sort_Id">x'</span></a></span> <span class="operator">==</span> <span class="operator">(</span><span class="cons_Var"><a href="#x_321_34" id="x_323_34" title="Defined at line 321"><span class="token sort_Id">x</span></a></span><span class="operator">,</span> <span class="operator">_)</span> <span class="operator">}</span>
              <span class="keyword">in</span> <span class="cons_Var"><a href="#s_entity_321_24" id="s_entity_324_18" title="Defined at line 321"><span class="token sort_Id">s_entity</span></a></span> <span class="operator">|-&gt;</span> <span class="cons_Var"><a href="#ps_321_47" id="ps_324_31" title="Defined at line 321"><span class="token sort_Id">ps</span></a></span><span class="operator">.</span>

  <a href="#resolveMutableProperty_327_3" id="resolveMutableProperty_326_3" title="Referenced at line 327"><span class="token sort_Id">resolveMutableProperty</span></a> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_StringSort">string</span> <span class="operator">-&gt;</span> <span class="keyword">list</span><span class="operator">((</span><span class="cons_PathSort">path</span> <span class="operator">*</span> <span class="operator">(</span><span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_326_69" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">)))</span>
  <a href="#resolveMutableProperty_326_3" id="resolveMutableProperty_327_3" title="Defined at line 326"><span class="token sort_Id">resolveMutableProperty</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_entity_330_18" id="s_entity_327_26" title="Referenced at line 330"><span class="token sort_Id">s_entity</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#x_329_34" id="x_327_36" title="Referenced at line 329"><span class="token sort_Id">x</span></a></span><span class="operator">)</span> <span class="operator">=</span> <a href="#typesOf_117_3" id="typesOf_327_41" title="Defined at line 117"><span class="token sort_Id">typesOf</span></a><span class="operator">(</span><span class="cons_Var"><a href="#ps_330_31" id="ps_327_49" title="Referenced at line 330"><span class="token sort_Id">ps</span></a></span><span class="operator">)</span> <span class="operator">:-</span>
    <span class="keyword">query</span> <span class="cons_Label"><a href="#var_67_5" id="var_328_11" title="Defined at line 67"><span class="token sort_Id">var</span></a></span> <span class="keyword">filter</span> <span class="cons_Label"><a href="#EXTEND_47_7" id="EXTEND_328_22" title="Defined at line 47"><span class="token sort_Id">EXTEND</span></a></span><span class="operator">?</span> <span class="cons_Closure"><span class="operator">(</span><span class="cons_Label"><a href="#INHERIT_48_7" id="INHERIT_328_31" title="Defined at line 48"><span class="token sort_Id">INHERIT</span></a></span> <span class="cons_Label"><a href="#EXTEND_47_7" id="EXTEND_328_39" title="Defined at line 47"><span class="token sort_Id">EXTEND</span></a></span>?)*</span>
              <span class="keyword">and</span> <span class="operator">{</span> <span class="cons_Var"><a href="#x'_329_27" id="x'_329_21" title="Referenced at line 329"><span class="token sort_Id">x'</span></a></span> <span class="operator">:-</span> <span class="cons_Var"><a href="#x'_329_21" id="x'_329_27" title="Defined at line 329"><span class="token sort_Id">x'</span></a></span> <span class="operator">==</span> <span class="operator">(</span><span class="cons_Var"><a href="#x_327_36" id="x_329_34" title="Defined at line 327"><span class="token sort_Id">x</span></a></span><span class="operator">,</span> <span class="operator">_)</span> <span class="operator">}</span>
              <span class="keyword">in</span> <span class="cons_Var"><a href="#s_entity_327_26" id="s_entity_330_18" title="Defined at line 327"><span class="token sort_Id">s_entity</span></a></span> <span class="operator">|-&gt;</span> <span class="cons_Var"><a href="#ps_327_49" id="ps_330_31" title="Defined at line 327"><span class="token sort_Id">ps</span></a></span><span class="operator">.</span>

  <button class="modal-open" id="declareParameters_332_3" title="Multi-file references" data-urls="#declareParameters_333_3 line 333, 334, 337, 339, 343; ../webdsl-ac.stx/#declareParameters_102_5 line 102, 124, 194, 212; ../webdsl-services.stx/#declareParameters_17_5 line 17; ../webdsl-ui.stx/#declareParameters_36_5 line 36, 67, 89; ../actions/functions.stx/#declareParameters_99_5 line 99, 109; ../ui/actions.stx/#declareParameters_49_5 line 49"><span class="token sort_Id">declareParameters</span></button> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="keyword">list</span><span class="operator">((</span><span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_332_46" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">))</span>
  <a href="#declareParameters_332_3" id="declareParameters_333_3" title="Defined at line 332"><span class="token sort_Id">declareParameters</span></a><span class="operator">(</span><span class="cons_Var"><span id="s_333_21" title="Not referenced"><span class="token sort_Id">s</span></span></span><span class="operator">,</span> <span class="operator">[]).</span>
  <a href="#declareParameters_332_3" id="declareParameters_334_3" title="Defined at line 332"><span class="token sort_Id">declareParameters</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_335_16" id="s_334_21" title="Referenced at line 335, 336, 337"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="operator">[(</span><span class="cons_Var"><a href="#x_335_19" id="x_334_26" title="Referenced at line 335, 336"><span class="token sort_Id">x</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#t_335_22" id="t_334_29" title="Referenced at line 335"><span class="token sort_Id">t</span></a></span><span class="operator">)|</span><span class="cons_Var"><a href="#tail_337_26" id="tail_334_32" title="Referenced at line 337"><span class="token sort_Id">tail</span></a></span><span class="operator">])</span> <span class="operator">:-</span>
    <a href="#declareVar_301_3" id="declareVar_335_5" title="Defined at line 301"><span class="token sort_Id">declareVar</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_334_21" id="s_335_16" title="Defined at line 334"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#x_334_26" id="x_335_19" title="Defined at line 334"><span class="token sort_Id">x</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#t_334_29" id="t_335_22" title="Defined at line 334"><span class="token sort_Id">t</span></a></span><span class="operator">),</span>
    <a href="../entities/annotations.stx/#declareAnnotation_36_3" id="declareAnnotation_336_5" title="Defined at ../entities/annotations.stx line 36"><span class="token sort_Id">declareAnnotation</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_334_21" id="s_336_23" title="Defined at line 334"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#x_334_26" id="x_336_26" title="Defined at line 334"><span class="token sort_Id">x</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../entities/annotations.stx/#DERIVED_22_5" id="DERIVED_336_29" title="Defined at ../entities/annotations.stx line 22"><span class="token sort_Id">DERIVED</span></a>()</span><span class="operator">),</span> <span class="layout">// abuse derived annotation to declare immutability of parameters</span>
    <a href="#declareParameters_332_3" id="declareParameters_337_5" title="Defined at line 332"><span class="token sort_Id">declareParameters</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_334_21" id="s_337_23" title="Defined at line 334"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#tail_334_32" id="tail_337_26" title="Defined at line 334"><span class="token sort_Id">tail</span></a></span><span class="operator">).</span>

  <a href="#declareParameters_332_3" id="declareParameters_339_3" title="Defined at line 332"><span class="token sort_Id">declareParameters</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_340_16" id="s_339_21" title="Referenced at line 340, 341, 342, 343"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="operator">[(</span><span class="cons_Var"><a href="#x_340_19" id="x_339_26" title="Referenced at line 340, 341, 342"><span class="token sort_Id">x</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#t_340_22" id="t_339_29" title="Referenced at line 340"><span class="token sort_Id">t</span></a></span><span class="operator">@</span><span class="cons_Op"><a href="../webdsl-types.stx/#TEMPLATEELEMENTS_47_5" id="TEMPLATEELEMENTS_339_31" title="Defined at ../webdsl-types.stx line 47"><span class="token sort_Id">TEMPLATEELEMENTS</span></a>()</span><span class="operator">)</span> <span class="operator">|</span> <span class="cons_Var"><a href="#tail_343_26" id="tail_339_53" title="Referenced at line 343"><span class="token sort_Id">tail</span></a></span><span class="operator">])</span> <span class="operator">:-</span>
    <a href="#declareVar_301_3" id="declareVar_340_5" title="Defined at line 301"><span class="token sort_Id">declareVar</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_339_21" id="s_340_16" title="Defined at line 339"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#x_339_26" id="x_340_19" title="Defined at line 339"><span class="token sort_Id">x</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#t_339_29" id="t_340_22" title="Defined at line 339"><span class="token sort_Id">t</span></a></span><span class="operator">),</span>
    <a href="../entities/annotations.stx/#declareAnnotation_36_3" id="declareAnnotation_341_5" title="Defined at ../entities/annotations.stx line 36"><span class="token sort_Id">declareAnnotation</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_339_21" id="s_341_23" title="Defined at line 339"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#x_339_26" id="x_341_26" title="Defined at line 339"><span class="token sort_Id">x</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../entities/annotations.stx/#DERIVED_22_5" id="DERIVED_341_29" title="Defined at ../entities/annotations.stx line 22"><span class="token sort_Id">DERIVED</span></a>()</span><span class="operator">),</span> <span class="layout">// abuse derived annotation to declare immutability of parameters</span>
    <a href="#declareTemplate_151_3" id="declareTemplate_342_5" title="Defined at line 151"><span class="token sort_Id">declareTemplate</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_339_21" id="s_342_21" title="Defined at line 339"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#x_339_26" id="x_342_24" title="Defined at line 339"><span class="token sort_Id">x</span></a></span><span class="operator">,</span> <span class="operator">[]),</span>
    <a href="#declareParameters_332_3" id="declareParameters_343_5" title="Defined at line 332"><span class="token sort_Id">declareParameters</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_339_21" id="s_343_23" title="Defined at line 339"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#tail_339_53" id="tail_343_26" title="Defined at line 339"><span class="token sort_Id">tail</span></a></span><span class="operator">).</span>

<span class="keyword">rules</span> <span class="layout">// declare common rules and mappings</span>

  <button class="modal-open" id="unitOk_347_3" title="Multi-file references" data-urls="#unitOk_348_3 line 348; ../webdsl-modules.stx/#unitOk_16_3 line 16, 25, 32, 36; ../../statics.stx/#unitOk_23_5 line 23"><span class="token sort_Id">unitOk</span></button> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="../../../src-gen/statix/signatures/WebDSL-Core-sig.stx/#Unit_18_5" id="Unit_347_20" title="Defined at ../../../src-gen/statix/signatures/WebDSL-Core-sig.stx line 18"><span class="token sort_Id">Unit</span></a></span>
  <a href="#unitOk_347_3" id="unitOk_348_3" title="Defined at line 347"><span class="token sort_Id">unitOk</span></a><span class="operator">(_,</span> <span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-Core-sig.stx/#EmptyUnit_70_5" id="EmptyUnit_348_13" title="Defined at ../../../src-gen/statix/signatures/WebDSL-Core-sig.stx line 70"><span class="token sort_Id">EmptyUnit</span></a>()</span><span class="operator">).</span>

  <a href="../webdsl-modules.stx/#sectionsOk_22_5" id="sectionsOk_350_3" title="Referenced at ../webdsl-modules.stx line 22, 30, 47"><span class="token sort_Id">sectionsOk</span></a> <span class="keyword">maps</span> <a href="#sectionOk_351_3" id="sectionOk_350_19" title="Defined at line 351"><span class="token sort_Id">sectionOk</span></a><span class="operator">(*,</span> <span class="keyword">list</span><span class="operator">(*))</span>
  <button class="modal-open" id="sectionOk_351_3" title="Multi-file references" data-urls="#sectionOk_350_19 line 350, 352, 353; ../webdsl-ac.stx/#sectionOk_55_3 line 55"><span class="token sort_Id">sectionOk</span></button> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="../../../src-gen/statix/signatures/WebDSL-Core-sig.stx/#Section_19_5" id="Section_351_23" title="Defined at ../../../src-gen/statix/signatures/WebDSL-Core-sig.stx line 19"><span class="token sort_Id">Section</span></a></span>
  <a href="#sectionOk_351_3" id="sectionOk_352_3" title="Defined at line 351"><span class="token sort_Id">sectionOk</span></a><span class="operator">(_,</span> <span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-AccessControl-sig.stx/#ACPolicy_52_5" id="ACPolicy_352_16" title="Defined at ../../../src-gen/statix/signatures/WebDSL-AccessControl-sig.stx line 52"><span class="token sort_Id">ACPolicy</span></a>(_)</span><span class="operator">)</span> <span class="operator">:-</span> <span class="keyword">try</span> <span class="operator">{</span> <span class="keyword">false</span> <span class="operator">}</span> <span class="operator">|</span> <span class="token sort_Id">warning</span> <span class="operator">$[</span><span class="cons_Text">This section is not yet implemented</span><span class="operator">].</span>
  <a href="#sectionOk_351_3" id="sectionOk_353_3" title="Defined at line 351"><span class="token sort_Id">sectionOk</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_353_44" id="s_353_13" title="Referenced at line 353"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-Core-sig.stx/#Section_61_5" id="Section_353_16" title="Defined at ../../../src-gen/statix/signatures/WebDSL-Core-sig.stx line 61"><span class="token sort_Id">Section</span></a><span class="operator">(_,</span> <span class="cons_Var"><a href="#defs_353_47" id="defs_353_27" title="Referenced at line 353"><span class="token sort_Id">defs</span></a></span>)</span><span class="operator">)</span> <span class="operator">:-</span> <a href="#defsOk_355_3" id="defsOk_353_37" title="Defined at line 355"><span class="token sort_Id">defsOk</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_353_13" id="s_353_44" title="Defined at line 353"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#defs_353_27" id="defs_353_47" title="Defined at line 353"><span class="token sort_Id">defs</span></a></span><span class="operator">).</span>

  <a href="#defsOk_353_37" id="defsOk_355_3" title="Referenced at line 353"><span class="token sort_Id">defsOk</span></a> <span class="keyword">maps</span> <a href="#defOk_356_3" id="defOk_355_15" title="Defined at line 356"><span class="token sort_Id">defOk</span></a><span class="operator">(*,</span> <span class="keyword">list</span><span class="operator">(*))</span>
  <button class="modal-open" id="defOk_356_3" title="Multi-file references" data-urls="#defOk_355_15 line 355, 357, 358, 359; ../webdsl-ac.stx/#defOk_63_3 line 63, 184; ../webdsl-actions.stx/#defOk_19_3 line 19, 68, 73, 80, 345; ../webdsl-entities.stx/#defOk_23_3 line 23, 34, 41, 63, 66, 93; ../webdsl-expand.stx/#defOk_15_3 line 15, 16, 70; ../webdsl-modules.stx/#defOk_51_3 line 51, 52; ../webdsl-native.stx/#defOk_22_3 line 22, 26, 50; ../webdsl-search.stx/#defOk_16_3 line 16, 17, 86; ../webdsl-services.stx/#defOk_12_3 line 12, 14; ../webdsl-ui.stx/#defOk_22_3 line 22, 23, 24, 26, 27, 31, 58; ../actions/functions.stx/#defOk_66_3 line 66, 82, 83, 87; ../entities/generated-functions.stx/#defOk_19_3 line 19, 45; ../types/type-extensions.stx/#defOk_15_3 line 15; ../ui/actions.stx/#defOk_58_3 line 58; ../ui/attributes.stx/#defOk_71_3 line 71, 74"><span class="token sort_Id">defOk</span></button> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="../../../src-gen/statix/signatures/WebDSL-Core-sig.stx/#Definition_20_5" id="Definition_356_19" title="Defined at ../../../src-gen/statix/signatures/WebDSL-Core-sig.stx line 20"><span class="token sort_Id">Definition</span></a></span>
  <a href="#defOk_356_3" id="defOk_357_3" title="Defined at line 356"><span class="token sort_Id">defOk</span></a><span class="operator">(_,</span> <span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-Core-sig.stx/#Description_73_5" id="Description_357_12" title="Defined at ../../../src-gen/statix/signatures/WebDSL-Core-sig.stx line 73"><span class="token sort_Id">Description</span></a>(_)</span><span class="operator">)</span> <span class="operator">:-</span> <span class="keyword">try</span> <span class="operator">{</span> <span class="keyword">false</span> <span class="operator">}</span> <span class="operator">|</span> <span class="token sort_Id">warning</span> <span class="operator">$[</span><span class="cons_Text">This definition is not yet implemented</span><span class="operator">].</span>
  <a href="#defOk_356_3" id="defOk_358_3" title="Defined at line 356"><span class="token sort_Id">defOk</span></a><span class="operator">(_,</span> <span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-Core-sig.stx/#Note_74_5" id="Note_358_12" title="Defined at ../../../src-gen/statix/signatures/WebDSL-Core-sig.stx line 74"><span class="token sort_Id">Note</span></a>(_)</span><span class="operator">)</span> <span class="operator">:-</span> <span class="keyword">try</span> <span class="operator">{</span> <span class="keyword">false</span> <span class="operator">}</span> <span class="operator">|</span> <span class="token sort_Id">warning</span> <span class="operator">$[</span><span class="cons_Text">This definition is not yet implemented</span><span class="operator">].</span>
  <a href="#defOk_356_3" id="defOk_359_3" title="Defined at line 356"><span class="token sort_Id">defOk</span></a><span class="operator">(_,</span> <span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-Routing-sig.stx/#Routing_18_5" id="Routing_359_12" title="Defined at ../../../src-gen/statix/signatures/WebDSL-Routing-sig.stx line 18"><span class="token sort_Id">Routing</span></a>(_)</span><span class="operator">)</span> <span class="operator">:-</span> <span class="keyword">try</span> <span class="operator">{</span> <span class="keyword">false</span> <span class="operator">}</span> <span class="operator">|</span> <span class="token sort_Id">warning</span> <span class="operator">$[</span><span class="cons_Text">This definition is not yet implemented</span><span class="operator">].</span>

  <button class="modal-open" id="stmtOk_361_3" title="Multi-file references" data-urls="#stmtOk_368_5 line 368; ../webdsl-actions.stx/#stmtOk_25_3 line 25, 26, 27, 28, 29, 42, 45, 49, 55, 62, 105, 106, 124, 133, 141, 144, 149, 165, 177, 185, 192, 209, 216, 222, 351, 352; ../webdsl-entities.stx/#stmtOk_18_3 line 18; ../webdsl-expand.stx/#stmtOk_18_3 line 18; ../webdsl-hql.stx/#stmtOk_12_3 line 12; ../ui/actions.stx/#stmtOk_99_3 line 99, 100, 103; ../ui/ajax.stx/#stmtOk_47_3 line 47"><span class="token sort_Id">stmtOk</span></button> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="../../../src-gen/statix/signatures/WebDSL-Core-sig.stx/#Statement_23_5" id="Statement_361_28" title="Defined at ../../../src-gen/statix/signatures/WebDSL-Core-sig.stx line 23"><span class="token sort_Id">Statement</span></a></span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_361_40" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span> <span class="layout">// TYPE argument is the return type in a function</span>

  <button class="modal-open" id="stmtsOk_363_3" title="Multi-file references" data-urls="#stmtsOk_364_3 line 364, 365, 369; ../webdsl-actions.stx/#stmtsOk_21_5 line 21, 47, 152, 154, 204, 212, 347; ../webdsl-services.stx/#stmtsOk_19_5 line 19; ../actions/functions.stx/#stmtsOk_101_5 line 101, 111; ../ui/actions.stx/#stmtsOk_52_5 line 52, 83, 86, 89, 92, 95"><span class="token sort_Id">stmtsOk</span></button> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="keyword">list</span><span class="operator">(</span><span class="cons_SimpleSort"><a href="../../../src-gen/statix/signatures/WebDSL-Core-sig.stx/#Statement_23_5" id="Statement_363_26" title="Defined at ../../../src-gen/statix/signatures/WebDSL-Core-sig.stx line 23"><span class="token sort_Id">Statement</span></a></span><span class="operator">)</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_363_39" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span>
  <a href="#stmtsOk_363_3" id="stmtsOk_364_3" title="Defined at line 363"><span class="token sort_Id">stmtsOk</span></a><span class="operator">(_,</span> <span class="operator">[],</span> <span class="operator">_).</span>
  <a href="#stmtsOk_363_3" id="stmtsOk_365_3" title="Defined at line 363"><span class="token sort_Id">stmtsOk</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_366_29" id="s_365_11" title="Referenced at line 366, 368"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="operator">[</span><span class="cons_Var"><a href="#stmt_368_23" id="stmt_365_15" title="Referenced at line 368"><span class="token sort_Id">stmt</span></a></span> <span class="operator">|</span> <span class="cons_Var"><a href="#tail_369_21" id="tail_365_22" title="Referenced at line 369"><span class="token sort_Id">tail</span></a></span><span class="operator">],</span> <span class="cons_Var"><a href="#rt_368_29" id="rt_365_29" title="Referenced at line 368, 369"><span class="token sort_Id">rt</span></a></span><span class="operator">)</span> <span class="operator">:-</span> <span class="operator">{</span><span class="cons_Var"><a href="#s_decl_366_9" id="s_decl_365_37" title="Referenced at line 366, 367, 368"><span class="token sort_Id">s_decl</span></a></span> <span class="cons_Var"><a href="#s_next_367_9" id="s_next_365_44" title="Referenced at line 367, 369"><span class="token sort_Id">s_next</span></a></span><span class="operator">}</span>
    <span class="keyword">new</span> <span class="cons_Var"><a href="#s_decl_365_37" id="s_decl_366_9" title="Defined at line 365"><span class="token sort_Id">s_decl</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#s_decl_365_37" id="s_decl_366_17" title="Defined at line 365"><span class="token sort_Id">s_decl</span></a></span> <span class="operator">-</span><span class="cons_Label"><a href="#P_45_7" id="P_366_25" title="Defined at line 45"><span class="token sort_Id">P</span></a></span><span class="operator">-&gt;</span> <span class="cons_Var"><a href="#s_365_11" id="s_366_29" title="Defined at line 365"><span class="token sort_Id">s</span></a></span><span class="operator">,</span>
    <span class="keyword">new</span> <span class="cons_Var"><a href="#s_next_365_44" id="s_next_367_9" title="Defined at line 365"><span class="token sort_Id">s_next</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#s_next_365_44" id="s_next_367_17" title="Defined at line 365"><span class="token sort_Id">s_next</span></a></span> <span class="operator">-</span><span class="cons_Label"><a href="#P_45_7" id="P_367_25" title="Defined at line 45"><span class="token sort_Id">P</span></a></span><span class="operator">-&gt;</span> <span class="cons_Var"><a href="#s_decl_365_37" id="s_decl_367_29" title="Defined at line 365"><span class="token sort_Id">s_decl</span></a></span><span class="operator">,</span>
    <a href="#stmtOk_361_3" id="stmtOk_368_5" title="Defined at line 361"><span class="token sort_Id">stmtOk</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_365_11" id="s_368_12" title="Defined at line 365"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#s_decl_365_37" id="s_decl_368_15" title="Defined at line 365"><span class="token sort_Id">s_decl</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#stmt_365_15" id="stmt_368_23" title="Defined at line 365"><span class="token sort_Id">stmt</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#rt_365_29" id="rt_368_29" title="Defined at line 365"><span class="token sort_Id">rt</span></a></span><span class="operator">),</span>
    <a href="#stmtsOk_363_3" id="stmtsOk_369_5" title="Defined at line 363"><span class="token sort_Id">stmtsOk</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_next_365_44" id="s_next_369_13" title="Defined at line 365"><span class="token sort_Id">s_next</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#tail_365_22" id="tail_369_21" title="Defined at line 365"><span class="token sort_Id">tail</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#rt_365_29" id="rt_369_27" title="Defined at line 365"><span class="token sort_Id">rt</span></a></span><span class="operator">).</span>

  <button class="modal-open" id="expOk_371_3" title="Multi-file references" data-urls="#expOk_372_3 line 372; ../webdsl-actions.stx/#expOk_43_5 line 43"><span class="token sort_Id">expOk</span></button> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="../../../src-gen/statix/signatures/WebDSL-Action-sig.stx/#Exp_25_5" id="Exp_371_19" title="Defined at ../../../src-gen/statix/signatures/WebDSL-Action-sig.stx line 25"><span class="token sort_Id">Exp</span></a></span>
  <a href="#expOk_371_3" id="expOk_372_3" title="Defined at line 371"><span class="token sort_Id">expOk</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_373_15" id="s_372_9" title="Referenced at line 373"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#exp_373_18" id="exp_372_12" title="Referenced at line 373"><span class="token sort_Id">exp</span></a></span><span class="operator">)</span> <span class="operator">:-</span> <span class="operator">{</span> <span class="cons_Var"><a href="#T_373_26" id="T_372_22" title="Referenced at line 373"><span class="token sort_Id">T</span></a></span> <span class="operator">}</span>
    <a href="#typeOfExp_388_3" id="typeOfExp_373_5" title="Defined at line 388"><span class="token sort_Id">typeOfExp</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_372_9" id="s_373_15" title="Defined at line 372"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#exp_372_12" id="exp_373_18" title="Defined at line 372"><span class="token sort_Id">exp</span></a></span><span class="operator">)</span> <span class="operator">==</span> <span class="cons_Var"><a href="#T_372_22" id="T_373_26" title="Defined at line 372"><span class="token sort_Id">T</span></a></span><span class="operator">.</span>

  <button class="modal-open" id="declareBuiltIns_375_3" title="Multi-file references" data-urls="#declareBuiltIns_376_3 line 376; ../webdsl-modules.stx/#declareBuiltIns_44_5 line 44"><span class="token sort_Id">declareBuiltIns</span></button> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span>
  <a href="#declareBuiltIns_375_3" id="declareBuiltIns_376_3" title="Defined at line 375"><span class="token sort_Id">declareBuiltIns</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_378_24" id="s_376_19" title="Referenced at line 378, 379, 380, 381, 382, 383"><span class="token sort_Id">s</span></a></span><span class="operator">)</span> <span class="operator">:-</span>
<span class="layout">//    declareACBuiltIns(s), do this separately in Application instead of built-in</span>
    <a href="../actions/built-ins.stx/#declareFunctionIns_11_3" id="declareFunctionIns_378_5" title="Defined at ../actions/built-ins.stx line 11"><span class="token sort_Id">declareFunctionIns</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_376_19" id="s_378_24" title="Defined at line 376"><span class="token sort_Id">s</span></a></span><span class="operator">),</span>
    <a href="../entities/built-ins.stx/#declareEntityBuiltIns_14_3" id="declareEntityBuiltIns_379_5" title="Defined at ../entities/built-ins.stx line 14"><span class="token sort_Id">declareEntityBuiltIns</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_376_19" id="s_379_27" title="Defined at line 376"><span class="token sort_Id">s</span></a></span><span class="operator">),</span>
    <a href="../webdsl-search.stx/#declareSearchBuiltIns_103_3" id="declareSearchBuiltIns_380_5" title="Defined at ../webdsl-search.stx line 103"><span class="token sort_Id">declareSearchBuiltIns</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_376_19" id="s_380_27" title="Defined at line 376"><span class="token sort_Id">s</span></a></span><span class="operator">),</span>
    <a href="../types/built-ins.stx/#declareTypeBuiltIns_87_3" id="declareTypeBuiltIns_381_5" title="Defined at ../types/built-ins.stx line 87"><span class="token sort_Id">declareTypeBuiltIns</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_376_19" id="s_381_25" title="Defined at line 376"><span class="token sort_Id">s</span></a></span><span class="operator">),</span>
    <a href="../types/built-ins.stx/#declareTypeBuiltInFunctions_115_3" id="declareTypeBuiltInFunctions_382_5" title="Defined at ../types/built-ins.stx line 115"><span class="token sort_Id">declareTypeBuiltInFunctions</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_376_19" id="s_382_33" title="Defined at line 376"><span class="token sort_Id">s</span></a></span><span class="operator">),</span>
    <a href="../ui/built-ins.stx/#declareUIBuiltIns_13_3" id="declareUIBuiltIns_383_5" title="Defined at ../ui/built-ins.stx line 13"><span class="token sort_Id">declareUIBuiltIns</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_376_19" id="s_383_23" title="Defined at line 376"><span class="token sort_Id">s</span></a></span><span class="operator">).</span>

<span class="keyword">rules</span> <span class="layout">// typing</span>

  <button class="modal-open" id="typesOfExps_387_3" title="Multi-file references" data-urls="../webdsl-ac.stx/#typesOfExps_45_17 line 45; ../webdsl-actions.stx/#typesOfExps_273_25 line 273, 278, 284, 289; ../webdsl-regex.stx/#typesOfExps_12_17 line 12, 16, 21, 26, 31, 36; ../actions/functions.stx/#typesOfExps_53_17 line 53; ../ui/actions.stx/#typesOfExps_72_17 line 72; ../ui/template-calls.stx/#typesOfExps_87_17 line 87"><span class="token sort_Id">typesOfExps</span></button> <span class="keyword">maps</span> <a href="#typeOfExp_388_3" id="typeOfExp_387_20" title="Defined at line 388"><span class="token sort_Id">typeOfExp</span></a><span class="operator">(*,</span> <span class="keyword">list</span><span class="operator">(*))</span> <span class="operator">=</span> <span class="keyword">list</span><span class="operator">(*)</span>
  <button class="modal-open" id="typeOfExp_388_3" title="Multi-file references" data-urls="#typeOfExp_373_5 line 373, 387, 392; ../webdsl-ac.stx/#typeOfExp_107_15 line 107, 115, 126, 130, 198; ../webdsl-actions.stx/#typeOfExp_31_3 line 31, 32, 33, 34, 35, 36, 37, 57, 63, 75, 81, 109, 130, 134, 138, 142, 145, 150, 156, 157, 159, 160, 167, 178, 194, 195, 210, 219, 228, 236, 237, 239, 245, 246, 256, 270, 271, 272, 276, 281, 282, 283, 287, 292, 302, 303, 312, 314, 318, 327, 330, 336, 340; ../webdsl-entities.stx/#typeOfExp_132_16 line 132, 177, 187, 199; ../webdsl-expand.stx/#typeOfExp_20_3 line 20, 31; ../webdsl-hql.stx/#typeOfExp_16_3 line 16, 116, 119; ../webdsl-regex.stx/#typeOfExp_10_3 line 10, 14, 19, 24, 29, 34; ../webdsl-search.stx/#typeOfExp_21_3 line 21, 25, 28, 31, 36, 39, 42, 48, 57; ../webdsl-types.stx/#typeOfExp_53_3 line 53, 57, 61, 64, 207, 212, 284; ../webdsl-ui.stx/#typeOfExp_179_15 line 179, 207, 213, 225, 243, 244; ../actions/binops.stx/#typeOfExp_11_3 line 11, 21, 22, 27, 28, 29, 35, 36, 37, 43, 44, 45, 51, 52, 53, 59, 61, 62, 67, 69, 70, 75, 77, 78, 83, 85, 86, 91, 93, 94, 98, 100, 101, 105, 107, 108, 116, 118, 119, 127, 128, 129, 135, 137; ../actions/emails.stx/#typeOfExp_10_3 line 10; ../actions/functions.stx/#typeOfExp_13_3 line 13, 22, 23, 33, 72, 73, 74, 75, 76, 77; ../entities/annotations.stx/#typeOfExp_158_11 line 158, 165, 196, 197; ../types/built-ins.stx/#typeOfExp_152_20 line 152, 155, 160, 169, 172, 175, 176, 179, 180, 183, 186, 187, 197, 207, 210, 213, 218; ../ui/actions.stx/#typeOfExp_32_16 line 32, 38, 68, 113, 116, 121, 144, 157, 177, 178, 190; ../ui/ajax.stx/#typeOfExp_18_20 line 18, 26, 69, 77, 81, 94; ../ui/attributes.stx/#typeOfExp_36_15 line 36, 40, 50, 60; ../ui/built-ins.stx/#typeOfExp_47_3 line 47, 50; ../ui/template-calls.stx/#typeOfExp_49_60 line 49, 70, 109"><span class="token sort_Id">typeOfExp</span></button> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="../../../src-gen/statix/signatures/WebDSL-Action-sig.stx/#Exp_25_5" id="Exp_388_23" title="Defined at ../../../src-gen/statix/signatures/WebDSL-Action-sig.stx line 25"><span class="token sort_Id">Exp</span></a></span> <span class="operator">-&gt;</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_388_30" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span>

  <button class="modal-open" id="typeOfExpTyped_390_3" title="Multi-file references" data-urls="#typeOfExpTyped_391_3 line 391; ../webdsl-types.stx/#typeOfExpTyped_208_11 line 208, 213"><span class="token sort_Id">typeOfExpTyped</span></button> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="../../../src-gen/statix/signatures/WebDSL-Action-sig.stx/#Exp_25_5" id="Exp_390_28" title="Defined at ../../../src-gen/statix/signatures/WebDSL-Action-sig.stx line 25"><span class="token sort_Id">Exp</span></a></span> <span class="operator">-&gt;</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_390_35" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span>
  <a href="#typeOfExpTyped_390_3" id="typeOfExpTyped_391_3" title="Defined at line 390"><span class="token sort_Id">typeOfExpTyped</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_392_20" id="s_391_18" title="Referenced at line 392"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#exp_392_23" id="exp_391_21" title="Referenced at line 392, 393"><span class="token sort_Id">exp</span></a></span><span class="operator">)</span> <span class="operator">=</span> <span class="cons_Var"><a href="#t_392_5" id="t_391_28" title="Referenced at line 392, 393"><span class="token sort_Id">t</span></a></span> <span class="operator">:-</span>
    <span class="cons_Var"><a href="#t_391_28" id="t_392_5" title="Defined at line 391"><span class="token sort_Id">t</span></a></span> <span class="operator">==</span> <a href="#typeOfExp_388_3" id="typeOfExp_392_10" title="Defined at line 388"><span class="token sort_Id">typeOfExp</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_391_18" id="s_392_20" title="Defined at line 391"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#exp_391_21" id="exp_392_23" title="Defined at line 391"><span class="token sort_Id">exp</span></a></span><span class="operator">),</span>
    <span class="cons_Var"><a href="#t_391_28" id="t_393_5" title="Defined at line 391"><span class="token sort_Id">t</span></a></span> <span class="operator">!=</span> <span class="cons_Op"><a href="../webdsl-types.stx/#UNTYPED_49_5" id="UNTYPED_393_10" title="Defined at ../webdsl-types.stx line 49"><span class="token sort_Id">UNTYPED</span></a>()</span> <span class="operator">|</span> <span class="keyword">error</span> <span class="operator">$[</span><span class="cons_Text">Cannot resolve type </span><span class="operator">[</span><span class="cons_Var"><a href="#t_391_28" id="t_393_51" title="Defined at line 391"><span class="token sort_Id">t</span></a></span><span class="operator">]]</span> <span class="operator">@</span><span class="cons_Var"><a href="#exp_391_21" id="exp_393_56" title="Defined at line 391"><span class="token sort_Id">exp</span></a></span><span class="operator">.</span>

  <button class="modal-open" id="typeOfSimpleExp_395_3" title="Multi-file references" data-urls="#typeOfSimpleExp_396_3 line 396; ../webdsl-actions.stx/#typeOfSimpleExp_232_3 line 232, 250, 251; ../webdsl-types.stx/#typeOfSimpleExp_93_17 line 93; ../actions/functions.stx/#typeOfSimpleExp_16_3 line 16, 27, 28"><span class="token sort_Id">typeOfSimpleExp</span></button> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="../../../src-gen/statix/signatures/WebDSL-Lexical-sig.stx/#SimpleExp_32_5" id="SimpleExp_395_29" title="Defined at ../../../src-gen/statix/signatures/WebDSL-Lexical-sig.stx line 32"><span class="token sort_Id">SimpleExp</span></a></span> <span class="operator">-&gt;</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_395_42" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span>
  <a href="#typeOfSimpleExp_395_3" id="typeOfSimpleExp_396_3" title="Defined at line 395"><span class="token sort_Id">typeOfSimpleExp</span></a><span class="operator">(</span><span class="cons_Var"><span id="s_396_19" title="Not referenced"><span class="token sort_Id">s</span></span></span><span class="operator">,</span> <span class="cons_Var"><a href="#exp_396_90" id="exp_396_22" title="Referenced at line 396"><span class="token sort_Id">exp</span></a></span><span class="operator">)</span> <span class="operator">=</span> <span class="cons_Op"><a href="../webdsl-types.stx/#UNTYPED_49_5" id="UNTYPED_396_29" title="Defined at ../webdsl-types.stx line 49"><span class="token sort_Id">UNTYPED</span></a>()</span> <span class="operator">:-</span> <span class="keyword">try</span> <span class="operator">{</span> <span class="keyword">false</span> <span class="operator">}</span> <span class="operator">|</span> <span class="token sort_Id">warning</span> <span class="operator">$[</span><span class="cons_Text">typing of expression </span><span class="operator">[</span><span class="cons_Var"><a href="#exp_396_22" id="exp_396_90" title="Defined at line 396"><span class="token sort_Id">exp</span></a></span><span class="operator">]</span><span class="cons_Text"> is not yet implemented</span><span class="operator">].</span>

  <button class="modal-open" id="typeOfPlaceholderExp_398_3" title="Multi-file references" data-urls="#typeOfPlaceholderExp_399_3 line 399; ../webdsl-actions.stx/#typeOfPlaceholderExp_255_3 line 255, 296; ../webdsl-types.stx/#typeOfPlaceholderExp_65_3 line 65; ../actions/binops.stx/#typeOfPlaceholderExp_15_3 line 15; ../actions/functions.stx/#typeOfPlaceholderExp_19_3 line 19, 32; ../ui/ajax.stx/#typeOfPlaceholderExp_34_20 line 34, 42"><span class="token sort_Id">typeOfPlaceholderExp</span></button> <span class="operator">:</span> <span class="cons_ScopeSort">scope</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="../../../src-gen/statix/signatures/WebDSL-Ajax-sig.stx/#PHExp_19_5" id="PHExp_398_34" title="Defined at ../../../src-gen/statix/signatures/WebDSL-Ajax-sig.stx line 19"><span class="token sort_Id">PHExp</span></a></span> <span class="operator">-&gt;</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_398_43" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span>
  <a href="#typeOfPlaceholderExp_398_3" id="typeOfPlaceholderExp_399_3" title="Defined at line 398"><span class="token sort_Id">typeOfPlaceholderExp</span></a><span class="operator">(</span><span class="cons_Var"><span id="s_399_24" title="Not referenced"><span class="token sort_Id">s</span></span></span><span class="operator">,</span> <span class="cons_Var"><a href="#exp_399_95" id="exp_399_27" title="Referenced at line 399"><span class="token sort_Id">exp</span></a></span><span class="operator">)</span> <span class="operator">=</span> <span class="cons_Op"><a href="../webdsl-types.stx/#UNTYPED_49_5" id="UNTYPED_399_34" title="Defined at ../webdsl-types.stx line 49"><span class="token sort_Id">UNTYPED</span></a>()</span> <span class="operator">:-</span> <span class="keyword">try</span> <span class="operator">{</span> <span class="keyword">false</span> <span class="operator">}</span> <span class="operator">|</span> <span class="token sort_Id">warning</span> <span class="operator">$[</span><span class="cons_Text">typing of expression </span><span class="operator">[</span><span class="cons_Var"><a href="#exp_399_27" id="exp_399_95" title="Defined at line 399"><span class="token sort_Id">exp</span></a></span><span class="operator">]</span><span class="cons_Text"> is not yet implemented</span><span class="operator">].</span>

  <button class="modal-open" id="typesCompatible_401_3" title="Multi-file references" data-urls="#typesCompatible_402_3 line 402, 403, 404, 405; ../webdsl-ac.stx/#typesCompatible_47_5 line 47; ../webdsl-regex.stx/#typesCompatible_17_5 line 17, 22, 27, 32, 37; ../webdsl-ui.stx/#typesCompatible_306_10 line 306; ../actions/functions.stx/#typesCompatible_189_73 line 189, 190; ../ui/actions.stx/#typesCompatible_74_5 line 74; ../ui/template-calls.stx/#typesCompatible_88_5 line 88"><span class="token sort_Id">typesCompatible</span></button> <span class="operator">:</span> <span class="keyword">list</span><span class="operator">(</span><span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_401_26" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">)</span> <span class="operator">*</span> <span class="keyword">list</span><span class="operator">(</span><span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_401_39" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">)</span> <span class="operator">-&gt;</span> <span class="cons_SimpleSort"><a href="#BOOL_30_5" id="BOOL_401_48" title="Defined at line 30"><span class="token sort_Id">BOOL</span></a></span>
  <a href="#typesCompatible_401_3" id="typesCompatible_402_3" title="Defined at line 401"><span class="token sort_Id">typesCompatible</span></a><span class="operator">([],</span> <span class="operator">[])</span> <span class="operator">=</span> <span class="cons_Op"><a href="#TRUE_34_5" id="TRUE_402_29" title="Defined at line 34"><span class="token sort_Id">TRUE</span></a>()</span><span class="operator">.</span>
  <a href="#typesCompatible_401_3" id="typesCompatible_403_3" title="Defined at line 401"><span class="token sort_Id">typesCompatible</span></a><span class="operator">([],</span> <span class="operator">[_|_])</span> <span class="operator">=</span> <span class="cons_Op"><a href="#FALSE_35_5" id="FALSE_403_32" title="Defined at line 35"><span class="token sort_Id">FALSE</span></a>()</span><span class="operator">.</span>
  <a href="#typesCompatible_401_3" id="typesCompatible_404_3" title="Defined at line 401"><span class="token sort_Id">typesCompatible</span></a><span class="operator">([_|_],</span> <span class="operator">[])</span> <span class="operator">=</span> <span class="cons_Op"><a href="#FALSE_35_5" id="FALSE_404_32" title="Defined at line 35"><span class="token sort_Id">FALSE</span></a>()</span><span class="operator">.</span>
  <a href="#typesCompatible_401_3" id="typesCompatible_405_3" title="Defined at line 401"><span class="token sort_Id">typesCompatible</span></a><span class="operator">([</span><span class="cons_Var"><span id="t1_405_20" title="Not referenced"><span class="token sort_Id">t1</span></span></span><span class="operator">|</span><span class="cons_Var">t1s</span><span class="operator">],</span> <span class="operator">[</span><span class="cons_Var">t2</span><span class="operator">|</span><span class="cons_Var"><span id="t2s_405_33" title="Not referenced"><span class="token sort_Id">t2s</span></span></span><span class="operator">])</span> <span class="operator">=</span> <a href="#andB_424_3" id="andB_405_41" title="Defined at line 424"><span class="token sort_Id">andB</span></a><span class="operator">(</span><a href="#typeCompatibleB_411_3" id="typeCompatibleB_405_46" title="Defined at line 411"><span class="token sort_Id">typeCompatibleB</span></a><span class="operator">(</span><span class="cons_Var">t1</span><span class="operator">,</span> <span class="cons_Var"><span id="t2_405_66" title="Not referenced"><span class="token sort_Id">t2</span></span></span><span class="operator">),</span> <a href="#typesCompatible_401_3" id="typesCompatible_405_71" title="Defined at line 401"><span class="token sort_Id">typesCompatible</span></a><span class="operator">(</span><span class="cons_Var"><span id="t1s_405_87" title="Not referenced"><span class="token sort_Id">t1s</span></span></span><span class="operator">,</span> <span class="cons_Var">t2s</span><span class="operator">)).</span>

  <a href="../webdsl-actions.stx/#typesCompatibleWith_273_5" id="typesCompatibleWith_407_3" title="Referenced at ../webdsl-actions.stx line 273, 278, 284, 289"><span class="token sort_Id">typesCompatibleWith</span></a> <span class="keyword">maps</span> <a href="#typeCompatible_408_3" id="typeCompatible_407_28" title="Defined at line 408"><span class="token sort_Id">typeCompatible</span></a><span class="operator">(</span><span class="keyword">list</span><span class="operator">(*),</span> <span class="operator">*)</span>
  <button class="modal-open" id="typeCompatible_408_3" title="Multi-file references" data-urls="#typeCompatible_407_28 line 407, 409; ../webdsl-ac.stx/#typeCompatible_250_5 line 250; ../webdsl-actions.stx/#typeCompatible_58_5 line 58, 76, 110, 131, 139, 142, 145, 161, 220, 305; ../webdsl-entities.stx/#typeCompatible_133_5 line 133, 200; ../webdsl-expand.stx/#typeCompatible_32_5 line 32, 72; ../webdsl-hql.stx/#typeCompatible_116_5 line 116, 119; ../actions/binops.stx/#typeCompatible_93_29 line 93, 94, 100, 101, 130; ../actions/functions.stx/#typeCompatible_240_5 line 240, 249; ../entities/annotations.stx/#typeCompatible_166_5 line 166, 198, 199; ../types/built-ins.stx/#typeCompatible_152_5 line 152, 155, 169, 172, 175, 176, 179, 180, 183, 186, 187, 198, 207, 210, 213; ../ui/actions.stx/#typeCompatible_33_5 line 33, 68, 135, 177, 178; ../ui/ajax.stx/#typeCompatible_18_5 line 18, 26, 34, 42, 69, 77, 81, 94; ../ui/template-calls.stx/#typeCompatible_70_5 line 70, 109"><span class="token sort_Id">typeCompatible</span></button> <span class="operator">:</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_408_20" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_408_27" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span>
  <a href="#typeCompatible_408_3" id="typeCompatible_409_3" title="Defined at line 408"><span class="token sort_Id">typeCompatible</span></a><span class="operator">(</span><span class="cons_Var"><a href="#T1_409_45" id="T1_409_18" title="Referenced at line 409"><span class="token sort_Id">T1</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#T2_409_49" id="T2_409_22" title="Referenced at line 409"><span class="token sort_Id">T2</span></a></span><span class="operator">)</span> <span class="operator">:-</span> <a href="#typeCompatibleB_411_3" id="typeCompatibleB_409_29" title="Defined at line 411"><span class="token sort_Id">typeCompatibleB</span></a><span class="operator">(</span><span class="cons_Var"><a href="#T1_409_18" id="T1_409_45" title="Defined at line 409"><span class="token sort_Id">T1</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#T2_409_22" id="T2_409_49" title="Defined at line 409"><span class="token sort_Id">T2</span></a></span><span class="operator">)</span> <span class="operator">==</span> <span class="cons_Op"><a href="#TRUE_34_5" id="TRUE_409_56" title="Defined at line 34"><span class="token sort_Id">TRUE</span></a>()</span><span class="operator">.</span>

  <button class="modal-open" id="typeCompatibleB_411_3" title="Multi-file references" data-urls="#typeCompatibleB_405_46 line 405, 409, 412, 413; ../webdsl-entities.stx/#typeCompatibleB_204_3 line 204; ../webdsl-native.stx/#typeCompatibleB_15_3 line 15, 18; ../webdsl-types.stx/#typeCompatibleB_98_3 line 98, 99, 102, 103, 104, 105, 106, 107, 108, 109, 112, 113, 114, 117, 118, 119, 120, 121, 122, 123, 210; ../webdsl-ui.stx/#typeCompatibleB_305_3 line 305; ../actions/binops.stx/#typeCompatibleB_110_7 line 110, 111, 121, 122; ../entities/annotations.stx/#typeCompatibleB_160_7 line 160, 161; ../entities/generated-functions.stx/#typeCompatibleB_48_91 line 48; ../types/built-ins.stx/#typeCompatibleB_162_7 line 162, 163, 220, 221; ../ui/attributes.stx/#typeCompatibleB_52_7 line 52, 54, 55, 62, 64, 65"><span class="token sort_Id">typeCompatibleB</span></button> <span class="operator">:</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_411_21" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_411_28" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span> <span class="operator">-&gt;</span> <span class="cons_SimpleSort"><a href="#BOOL_30_5" id="BOOL_411_36" title="Defined at line 30"><span class="token sort_Id">BOOL</span></a></span>
  <a href="#typeCompatibleB_411_3" id="typeCompatibleB_412_3" title="Defined at line 411"><span class="token sort_Id">typeCompatibleB</span></a><span class="operator">(</span><span class="cons_Var"><span id="T1_412_19" title="Not referenced"><span class="token sort_Id">T1</span></span></span><span class="operator">,</span> <span class="cons_Var"><span id="T2_412_23" title="Not referenced"><span class="token sort_Id">T2</span></span></span><span class="operator">)</span> <span class="operator">=</span> <span class="cons_Op"><a href="#FALSE_35_5" id="FALSE_412_29" title="Defined at line 35"><span class="token sort_Id">FALSE</span></a>()</span><span class="operator">.</span> <span class="layout">//default</span>
  <a href="#typeCompatibleB_411_3" id="typeCompatibleB_413_3" title="Defined at line 411"><span class="token sort_Id">typeCompatibleB</span></a><span class="operator">(</span><span class="cons_Var"><span id="T_413_19" title="Not referenced"><span class="token sort_Id">T</span></span></span><span class="operator">,</span> <span class="cons_Var">T</span><span class="operator">)</span> <span class="operator">=</span> <span class="cons_Op"><a href="#TRUE_34_5" id="TRUE_413_27" title="Defined at line 34"><span class="token sort_Id">TRUE</span></a>()</span><span class="operator">.</span> <span class="layout">// same type is always type compatible</span>

<span class="keyword">rules</span> <span class="layout">// utils</span>

  <button class="modal-open" id="or_417_3" title="Multi-file references" data-urls="#or_418_3 line 418; ../webdsl-actions.stx/#or_115_5 line 115, 168; ../webdsl-types.stx/#or_210_5 line 210; ../webdsl-ui.stx/#or_214_5 line 214; ../actions/binops.stx/#or_109_5 line 109, 120; ../entities/annotations.stx/#or_131_5 line 131, 144, 159; ../types/built-ins.stx/#or_161_5 line 161, 219; ../ui/actions.stx/#or_145_5 line 145; ../ui/attributes.stx/#or_51_5 line 51, 61"><span class="token sort_Id">or</span></button> <span class="operator">:</span> <span class="cons_SimpleSort"><a href="#BOOL_30_5" id="BOOL_417_8" title="Defined at line 30"><span class="token sort_Id">BOOL</span></a></span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#BOOL_30_5" id="BOOL_417_15" title="Defined at line 30"><span class="token sort_Id">BOOL</span></a></span>
  <a href="#or_417_3" id="or_418_3" title="Defined at line 417"><span class="token sort_Id">or</span></a><span class="operator">(</span><span class="cons_Var"><a href="#b1_418_21" id="b1_418_6" title="Referenced at line 418"><span class="token sort_Id">b1</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#b2_418_25" id="b2_418_10" title="Referenced at line 418"><span class="token sort_Id">b2</span></a></span><span class="operator">)</span> <span class="operator">:-</span> <a href="#orB_419_3" id="orB_418_17" title="Defined at line 419"><span class="token sort_Id">orB</span></a><span class="operator">(</span><span class="cons_Var"><a href="#b1_418_6" id="b1_418_21" title="Defined at line 418"><span class="token sort_Id">b1</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#b2_418_10" id="b2_418_25" title="Defined at line 418"><span class="token sort_Id">b2</span></a></span><span class="operator">)</span> <span class="operator">==</span> <span class="cons_Op"><a href="#TRUE_34_5" id="TRUE_418_32" title="Defined at line 34"><span class="token sort_Id">TRUE</span></a>()</span><span class="operator">.</span>
  <button class="modal-open" id="orB_419_3" title="Multi-file references" data-urls="#orB_418_17 line 418, 420, 421, 422; ../entities/annotations.stx/#orB_144_8 line 144; ../ui/attributes.stx/#orB_53_7 line 53, 63"><span class="token sort_Id">orB</span></button> <span class="operator">:</span> <span class="cons_SimpleSort"><a href="#BOOL_30_5" id="BOOL_419_9" title="Defined at line 30"><span class="token sort_Id">BOOL</span></a></span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#BOOL_30_5" id="BOOL_419_16" title="Defined at line 30"><span class="token sort_Id">BOOL</span></a></span> <span class="operator">-&gt;</span> <span class="cons_SimpleSort"><a href="#BOOL_30_5" id="BOOL_419_24" title="Defined at line 30"><span class="token sort_Id">BOOL</span></a></span>
  <a href="#orB_419_3" id="orB_420_3" title="Defined at line 419"><span class="token sort_Id">orB</span></a><span class="operator">(_,</span> <span class="operator">_)</span> <span class="operator">=</span> <span class="cons_Op"><a href="#FALSE_35_5" id="FALSE_420_15" title="Defined at line 35"><span class="token sort_Id">FALSE</span></a>()</span><span class="operator">.</span>
  <a href="#orB_419_3" id="orB_421_3" title="Defined at line 419"><span class="token sort_Id">orB</span></a><span class="operator">(</span><span class="cons_Op"><a href="#TRUE_34_5" id="TRUE_421_7" title="Defined at line 34"><span class="token sort_Id">TRUE</span></a>()</span><span class="operator">,</span> <span class="operator">_)</span> <span class="operator">=</span> <span class="cons_Op"><a href="#TRUE_34_5" id="TRUE_421_20" title="Defined at line 34"><span class="token sort_Id">TRUE</span></a>()</span><span class="operator">.</span>
  <a href="#orB_419_3" id="orB_422_3" title="Defined at line 419"><span class="token sort_Id">orB</span></a><span class="operator">(</span><span class="cons_Op"><a href="#FALSE_35_5" id="FALSE_422_7" title="Defined at line 35"><span class="token sort_Id">FALSE</span></a>()</span><span class="operator">,</span> <span class="cons_Op"><a href="#TRUE_34_5" id="TRUE_422_16" title="Defined at line 34"><span class="token sort_Id">TRUE</span></a>()</span><span class="operator">)</span> <span class="operator">=</span> <span class="cons_Op"><a href="#TRUE_34_5" id="TRUE_422_26" title="Defined at line 34"><span class="token sort_Id">TRUE</span></a>()</span><span class="operator">.</span>

  <a href="#andB_405_41" id="andB_424_3" title="Referenced at line 405, 425, 426"><span class="token sort_Id">andB</span></a> <span class="operator">:</span> <span class="cons_SimpleSort"><a href="#BOOL_30_5" id="BOOL_424_10" title="Defined at line 30"><span class="token sort_Id">BOOL</span></a></span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#BOOL_30_5" id="BOOL_424_17" title="Defined at line 30"><span class="token sort_Id">BOOL</span></a></span> <span class="operator">-&gt;</span> <span class="cons_SimpleSort"><a href="#BOOL_30_5" id="BOOL_424_25" title="Defined at line 30"><span class="token sort_Id">BOOL</span></a></span>
  <a href="#andB_424_3" id="andB_425_3" title="Defined at line 424"><span class="token sort_Id">andB</span></a><span class="operator">(_,</span> <span class="operator">_)</span> <span class="operator">=</span> <span class="cons_Op"><a href="#FALSE_35_5" id="FALSE_425_16" title="Defined at line 35"><span class="token sort_Id">FALSE</span></a>()</span><span class="operator">.</span>
  <a href="#andB_424_3" id="andB_426_3" title="Defined at line 424"><span class="token sort_Id">andB</span></a><span class="operator">(</span><span class="cons_Op"><a href="#TRUE_34_5" id="TRUE_426_8" title="Defined at line 34"><span class="token sort_Id">TRUE</span></a>()</span><span class="operator">,</span> <span class="cons_Op"><a href="#TRUE_34_5" id="TRUE_426_16" title="Defined at line 34"><span class="token sort_Id">TRUE</span></a>()</span><span class="operator">)</span> <span class="operator">=</span> <span class="cons_Op"><a href="#TRUE_34_5" id="TRUE_426_26" title="Defined at line 34"><span class="token sort_Id">TRUE</span></a>()</span><span class="operator">.</span>

  <a href="#equalB_429_3" id="equalB_428_3" title="Referenced at line 429, 430"><span class="token sort_Id">equalB</span></a> <span class="operator">:</span> <span class="cons_SimpleSort"><a href="#BOOL_30_5" id="BOOL_428_12" title="Defined at line 30"><span class="token sort_Id">BOOL</span></a></span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#BOOL_30_5" id="BOOL_428_19" title="Defined at line 30"><span class="token sort_Id">BOOL</span></a></span>
  <a href="#equalB_428_3" id="equalB_429_3" title="Defined at line 428"><span class="token sort_Id">equalB</span></a><span class="operator">(</span><span class="cons_Var">b</span><span class="operator">,</span> <span class="cons_Var"><span id="b_429_13" title="Not referenced"><span class="token sort_Id">b</span></span></span><span class="operator">).</span>
  <a href="#equalB_428_3" id="equalB_430_3" title="Defined at line 428"><span class="token sort_Id">equalB</span></a><span class="operator">(_,</span> <span class="operator">_)</span> <span class="operator">:-</span> <span class="keyword">false</span><span class="operator">.</span>

  <button class="modal-open" id="notB_432_3" title="Multi-file references" data-urls="#notB_433_3 line 433, 434; ../webdsl-modules.stx/#notB_34_35 line 34; ../webdsl-ui.stx/#notB_39_44 line 39, 71; ../entities/annotations.stx/#notB_221_25 line 221, 224, 263"><span class="token sort_Id">notB</span></button> <span class="operator">:</span> <span class="cons_SimpleSort"><a href="#BOOL_30_5" id="BOOL_432_10" title="Defined at line 30"><span class="token sort_Id">BOOL</span></a></span> <span class="operator">-&gt;</span> <span class="cons_SimpleSort"><a href="#BOOL_30_5" id="BOOL_432_18" title="Defined at line 30"><span class="token sort_Id">BOOL</span></a></span>
  <a href="#notB_432_3" id="notB_433_3" title="Defined at line 432"><span class="token sort_Id">notB</span></a><span class="operator">(</span><span class="cons_Op"><a href="#TRUE_34_5" id="TRUE_433_8" title="Defined at line 34"><span class="token sort_Id">TRUE</span></a>()</span><span class="operator">)</span> <span class="operator">=</span> <span class="cons_Op"><a href="#FALSE_35_5" id="FALSE_433_18" title="Defined at line 35"><span class="token sort_Id">FALSE</span></a>()</span><span class="operator">.</span>
  <a href="#notB_432_3" id="notB_434_3" title="Defined at line 432"><span class="token sort_Id">notB</span></a><span class="operator">(</span><span class="cons_Op"><a href="#FALSE_35_5" id="FALSE_434_8" title="Defined at line 35"><span class="token sort_Id">FALSE</span></a>()</span><span class="operator">)</span> <span class="operator">=</span> <span class="cons_Op"><a href="#TRUE_34_5" id="TRUE_434_19" title="Defined at line 34"><span class="token sort_Id">TRUE</span></a>()</span><span class="operator">.</span>

  <a href="#emtpyQueryResultB_437_3" id="emtpyQueryResultB_436_3" title="Referenced at line 437, 438"><span class="token sort_Id">emtpyQueryResultB</span></a> <span class="operator">:</span> <span class="keyword">list</span><span class="operator">((</span><span class="cons_PathSort">path</span> <span class="operator">*</span> <span class="operator">(</span><span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_436_46" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">)))</span> <span class="operator">-&gt;</span> <span class="cons_SimpleSort"><a href="#BOOL_30_5" id="BOOL_436_57" title="Defined at line 30"><span class="token sort_Id">BOOL</span></a></span>
  <a href="#emtpyQueryResultB_436_3" id="emtpyQueryResultB_437_3" title="Defined at line 436"><span class="token sort_Id">emtpyQueryResultB</span></a><span class="operator">([])</span> <span class="operator">=</span> <span class="cons_Op"><a href="#TRUE_34_5" id="TRUE_437_27" title="Defined at line 34"><span class="token sort_Id">TRUE</span></a>()</span><span class="operator">.</span>
  <a href="#emtpyQueryResultB_436_3" id="emtpyQueryResultB_438_3" title="Defined at line 436"><span class="token sort_Id">emtpyQueryResultB</span></a><span class="operator">([_</span> <span class="operator">|</span> <span class="operator">_])</span> <span class="operator">=</span> <span class="cons_Op"><a href="#FALSE_35_5" id="FALSE_438_32" title="Defined at line 35"><span class="token sort_Id">FALSE</span></a>()</span><span class="operator">.</span>

  <button class="modal-open" id="minOfList_440_3" title="Multi-file references" data-urls="#minOfList_441_3 line 441, 442, 443; ../actions/functions.stx/#minOfList_204_80 line 204"><span class="token sort_Id">minOfList</span></button> <span class="operator">:</span> <span class="keyword">list</span><span class="operator">(</span><span class="cons_IntSort">int</span><span class="operator">)</span> <span class="operator">-&gt;</span> <span class="cons_IntSort">int</span>
  <a href="#minOfList_440_3" id="minOfList_441_3" title="Defined at line 440"><span class="token sort_Id">minOfList</span></a><span class="operator">([])</span> <span class="operator">=</span> 100000<span class="operator">.</span>
  <a href="#minOfList_440_3" id="minOfList_442_3" title="Defined at line 440"><span class="token sort_Id">minOfList</span></a><span class="operator">([</span><span class="cons_Var"><span id="x_442_14" title="Not referenced"><span class="token sort_Id">x</span></span></span><span class="operator">|</span><span class="cons_Var"><a href="#xs_443_20" id="xs_442_16" title="Referenced at line 443"><span class="token sort_Id">xs</span></a></span><span class="operator">])</span> <span class="operator">=</span> <span class="cons_Var"><a href="#z_444_5" id="z_442_23" title="Referenced at line 444"><span class="token sort_Id">z</span></a></span> <span class="operator">:-</span> <span class="operator">{</span><span class="cons_Var"><a href="#y_443_5" id="y_442_29" title="Referenced at line 443"><span class="token sort_Id">y</span></a></span><span class="operator">}</span>
    <span class="cons_Var"><a href="#y_442_29" id="y_443_5" title="Defined at line 442"><span class="token sort_Id">y</span></a></span> <span class="operator">==</span> <a href="#minOfList_440_3" id="minOfList_443_10" title="Defined at line 440"><span class="token sort_Id">minOfList</span></a><span class="operator">(</span><span class="cons_Var"><a href="#xs_442_16" id="xs_443_20" title="Defined at line 442"><span class="token sort_Id">xs</span></a></span><span class="operator">),</span>
    <span class="cons_Var"><a href="#z_442_23" id="z_444_5" title="Defined at line 442"><span class="token sort_Id">z</span></a></span> <span class="operator">#=</span> <span class="keyword">min</span><span class="operator">(</span><span class="cons_Var">x</span><span class="operator">,</span><span class="cons_Var">y</span><span class="operator">).</span>

  <button class="modal-open" id="scopeFromPath_446_3" title="Multi-file references" data-urls="#scopeFromPath_447_3 line 447, 448; ../entities/annotations.stx/#scopeFromPath_182_15 line 182, 259, 263"><span class="token sort_Id">scopeFromPath</span></button> <span class="operator">:</span> <span class="cons_PathSort">path</span> <span class="operator">-&gt;</span> <span class="cons_ScopeSort">scope</span>
  <a href="#scopeFromPath_446_3" id="scopeFromPath_447_3" title="Defined at line 446"><span class="token sort_Id">scopeFromPath</span></a><span class="operator">(_</span><span class="token sort_Id">PathEmpty</span><span class="operator">(</span><span class="cons_Var">s</span><span class="operator">))</span> <span class="operator">=</span> <span class="cons_Var"><span id="s_447_34" title="Not referenced"><span class="token sort_Id">s</span></span></span><span class="operator">.</span>
  <a href="#scopeFromPath_446_3" id="scopeFromPath_448_3" title="Defined at line 446"><span class="token sort_Id">scopeFromPath</span></a><span class="operator">(_</span><span class="token sort_Id">PathStep</span><span class="operator">(_,</span> <span class="operator">_,</span> <span class="cons_Var">s</span><span class="operator">))</span> <span class="operator">=</span> <span class="cons_Var"><span id="s_448_39" title="Not referenced"><span class="token sort_Id">s</span></span></span><span class="operator">.</span>

  <button class="modal-open" id="pathLength_450_3" title="Multi-file references" data-urls="#pathLength_451_3 line 451, 452, 453, 479, 485; ../webdsl-entities.stx/#pathLength_218_40 line 218"><span class="token sort_Id">pathLength</span></button> <span class="operator">:</span> <span class="cons_PathSort">path</span> <span class="operator">-&gt;</span> <span class="cons_IntSort">int</span>
  <a href="#pathLength_450_3" id="pathLength_451_3" title="Defined at line 450"><span class="token sort_Id">pathLength</span></a><span class="operator">(_</span><span class="token sort_Id">PathEmpty</span><span class="operator">(_))</span> <span class="operator">=</span> 0<span class="operator">.</span>
  <a href="#pathLength_450_3" id="pathLength_452_3" title="Defined at line 450"><span class="token sort_Id">pathLength</span></a><span class="operator">(_</span><span class="token sort_Id">PathStep</span><span class="operator">(</span><span class="cons_Var"><a href="#p_453_22" id="p_452_24" title="Referenced at line 453"><span class="token sort_Id">p</span></a></span><span class="operator">,</span> <span class="operator">_,</span> <span class="operator">_))</span> <span class="operator">=</span> <span class="cons_Var"><a href="#x_454_5" id="x_452_36" title="Referenced at line 454"><span class="token sort_Id">x</span></a></span> <span class="operator">:-</span> <span class="operator">{</span><span class="cons_Var"><a href="#x'_453_5" id="x'_452_42" title="Referenced at line 453"><span class="token sort_Id">x'</span></a></span><span class="operator">}</span>
    <span class="cons_Var"><a href="#x'_452_42" id="x'_453_5" title="Defined at line 452"><span class="token sort_Id">x'</span></a></span> <span class="operator">==</span> <a href="#pathLength_450_3" id="pathLength_453_11" title="Defined at line 450"><span class="token sort_Id">pathLength</span></a><span class="operator">(</span><span class="cons_Var"><a href="#p_452_24" id="p_453_22" title="Defined at line 452"><span class="token sort_Id">p</span></a></span><span class="operator">),</span>
    <span class="cons_Var"><a href="#x_452_36" id="x_454_5" title="Defined at line 452"><span class="token sort_Id">x</span></a></span> <span class="operator">#=</span> <span class="cons_Var">x'</span> <span class="operator">+</span> 1<span class="operator">.</span>

  <button class="modal-open" id="noDuplicatesString_456_3" title="Multi-file references" data-urls="#noDuplicatesString_457_3 line 457, 458, 459, 460, 461; ../ui/template-calls.stx/#noDuplicatesString_101_5 line 101"><span class="token sort_Id">noDuplicatesString</span></button> <span class="operator">:</span> <span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="keyword">list</span><span class="operator">(</span><span class="cons_StringSort">string</span><span class="operator">)</span>
  <a href="#noDuplicatesString_456_3" id="noDuplicatesString_457_3" title="Defined at line 456"><span class="token sort_Id">noDuplicatesString</span></a><span class="operator">(_,</span> <span class="operator">[]).</span>
  <a href="#noDuplicatesString_456_3" id="noDuplicatesString_458_3" title="Defined at line 456"><span class="token sort_Id">noDuplicatesString</span></a><span class="operator">(</span><span class="cons_Str"><span class="operator">"</span>_IGNORE"</span><span class="operator">,</span> <span class="operator">_).</span>
  <a href="#noDuplicatesString_456_3" id="noDuplicatesString_459_3" title="Defined at line 456"><span class="token sort_Id">noDuplicatesString</span></a><span class="operator">(</span><span class="cons_Var"><a href="#x_459_65" id="x_459_22" title="Referenced at line 459"><span class="token sort_Id">x</span></a></span><span class="operator">,</span> <span class="operator">[</span><span class="cons_Str"><span class="operator">"</span>_IGNORE"</span> <span class="operator">|</span> <span class="cons_Var"><a href="#ys_459_68" id="ys_459_38" title="Referenced at line 459"><span class="token sort_Id">ys</span></a></span><span class="operator">])</span> <span class="operator">:-</span> <a href="#noDuplicatesString_456_3" id="noDuplicatesString_459_46" title="Defined at line 456"><span class="token sort_Id">noDuplicatesString</span></a><span class="operator">(</span><span class="cons_Var"><a href="#x_459_22" id="x_459_65" title="Defined at line 459"><span class="token sort_Id">x</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#ys_459_38" id="ys_459_68" title="Defined at line 459"><span class="token sort_Id">ys</span></a></span><span class="operator">).</span>
  <a href="#noDuplicatesString_456_3" id="noDuplicatesString_460_3" title="Defined at line 456"><span class="token sort_Id">noDuplicatesString</span></a><span class="operator">(</span><span class="cons_Var"><a href="#x_460_57" id="x_460_22" title="Referenced at line 460"><span class="token sort_Id">x</span></a></span><span class="operator">,</span> <span class="operator">[</span><span class="cons_Var"><span id="y_460_26" title="Not referenced"><span class="token sort_Id">y</span></span></span> <span class="operator">|</span> <span class="cons_Var"><a href="#ys_460_60" id="ys_460_30" title="Referenced at line 460"><span class="token sort_Id">ys</span></a></span><span class="operator">])</span> <span class="operator">:-</span> <a href="#noDuplicatesString_456_3" id="noDuplicatesString_460_38" title="Defined at line 456"><span class="token sort_Id">noDuplicatesString</span></a><span class="operator">(</span><span class="cons_Var"><a href="#x_460_22" id="x_460_57" title="Defined at line 460"><span class="token sort_Id">x</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#ys_460_30" id="ys_460_60" title="Defined at line 460"><span class="token sort_Id">ys</span></a></span><span class="operator">).</span>
  <a href="#noDuplicatesString_456_3" id="noDuplicatesString_461_3" title="Defined at line 456"><span class="token sort_Id">noDuplicatesString</span></a><span class="operator">(</span><span class="cons_Var"><span id="x_461_22" title="Not referenced"><span class="token sort_Id">x</span></span></span><span class="operator">,</span> <span class="operator">[</span><span class="cons_Var">x</span> <span class="operator">|</span> <span class="operator">_])</span> <span class="operator">:-</span> <span class="keyword">false</span><span class="operator">.</span>

  <a href="#addQueryResults_464_3" id="addQueryResults_463_3" title="Referenced at line 464, 465"><span class="token sort_Id">addQueryResults</span></a> <span class="operator">:</span> <span class="keyword">list</span><span class="operator">((</span><span class="cons_PathSort">path</span> <span class="operator">*</span> <span class="operator">(</span><span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_463_44" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">)))</span> <span class="operator">*</span> <span class="keyword">list</span><span class="operator">((</span><span class="cons_PathSort">path</span> <span class="operator">*</span> <span class="operator">(</span><span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_463_77" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">)))</span> <span class="operator">-&gt;</span> <span class="keyword">list</span><span class="operator">((</span><span class="cons_PathSort">path</span> <span class="operator">*</span> <span class="operator">(</span><span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_463_111" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">)))</span>
  <a href="#addQueryResults_463_3" id="addQueryResults_464_3" title="Defined at line 463"><span class="token sort_Id">addQueryResults</span></a><span class="operator">([],</span> <span class="cons_Var">ls</span><span class="operator">)</span> <span class="operator">=</span> <span class="cons_Var"><span id="ls_464_29" title="Not referenced"><span class="token sort_Id">ls</span></span></span><span class="operator">.</span>
  <a href="#addQueryResults_463_3" id="addQueryResults_465_3" title="Defined at line 463"><span class="token sort_Id">addQueryResults</span></a><span class="operator">([</span><span class="cons_Var"><span id="hd_465_20" title="Not referenced"><span class="token sort_Id">hd</span></span></span> <span class="operator">|</span> <span class="cons_Var">tl</span><span class="operator">],</span> <span class="cons_Var">ls</span><span class="operator">)</span> <span class="operator">=</span> <span class="operator">[</span><span class="cons_Var">hd</span> <span class="operator">|</span> <a href="#addQueryResults_463_3" id="addQueryResults_465_42" title="Defined at line 463"><span class="token sort_Id">addQueryResults</span></a><span class="operator">(</span><span class="cons_Var"><span id="tl_465_58" title="Not referenced"><span class="token sort_Id">tl</span></span></span><span class="operator">,</span> <span class="cons_Var"><span id="ls_465_62" title="Not referenced"><span class="token sort_Id">ls</span></span></span><span class="operator">)].</span>

  <span class="layout">// functional rule to drop all results with longer paths than the minimal</span>
  <a href="#filterShortestPath_469_3" id="filterShortestPath_468_3" title="Referenced at line 469"><span class="token sort_Id">filterShortestPath</span></a> <span class="operator">:</span> <span class="keyword">list</span><span class="operator">((</span><span class="cons_PathSort">path</span> <span class="operator">*</span> <span class="operator">(</span><span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_468_47" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">)))</span> <span class="operator">-&gt;</span> <span class="keyword">list</span><span class="operator">((</span><span class="cons_PathSort">path</span> <span class="operator">*</span> <span class="operator">(</span><span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_468_81" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">)))</span>
  <a href="#filterShortestPath_468_3" id="filterShortestPath_469_3" title="Defined at line 468"><span class="token sort_Id">filterShortestPath</span></a><span class="operator">(</span><span class="cons_Var"><span id="ps_469_22" title="Not referenced"><span class="token sort_Id">ps</span></span></span><span class="operator">)</span> <span class="operator">=</span> <a href="#filterShortestPath_internal_471_3" id="filterShortestPath_internal_469_28" title="Defined at line 471"><span class="token sort_Id">filterShortestPath_internal</span></a><span class="operator">(</span><a href="#zipQueryResultsWithPathLength_483_3" id="zipQueryResultsWithPathLength_469_56" title="Defined at line 483"><span class="token sort_Id">zipQueryResultsWithPathLength</span></a><span class="operator">(</span><span class="cons_Var">ps</span><span class="operator">),</span> <a href="#shortestPathLength_476_3" id="shortestPathLength_469_91" title="Defined at line 476"><span class="token sort_Id">shortestPathLength</span></a><span class="operator">(</span><span class="cons_Var">ps</span><span class="operator">)).</span>

  <a href="#filterShortestPath_internal_469_28" id="filterShortestPath_internal_471_3" title="Referenced at line 469, 472, 473, 474"><span class="token sort_Id">filterShortestPath_internal</span></a> <span class="operator">:</span> <span class="keyword">list</span><span class="operator">((</span><span class="cons_IntSort">int</span> <span class="operator">*</span> <span class="operator">(</span><span class="cons_PathSort">path</span> <span class="operator">*</span> <span class="operator">(</span><span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_471_63" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">))))</span> <span class="operator">*</span> <span class="cons_IntSort">int</span> <span class="operator">-&gt;</span> <span class="keyword">list</span><span class="operator">((</span><span class="cons_PathSort">path</span> <span class="operator">*</span> <span class="operator">(</span><span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_471_104" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">)))</span>
  <a href="#filterShortestPath_internal_471_3" id="filterShortestPath_internal_472_3" title="Defined at line 471"><span class="token sort_Id">filterShortestPath_internal</span></a><span class="operator">([],</span> <span class="operator">_)</span> <span class="operator">=</span> <span class="operator">[].</span>
  <a href="#filterShortestPath_internal_471_3" id="filterShortestPath_internal_473_3" title="Defined at line 471"><span class="token sort_Id">filterShortestPath_internal</span></a><span class="operator">([(</span><span class="cons_Var">x</span><span class="operator">,</span> <span class="cons_Var">r</span><span class="operator">)</span> <span class="operator">|</span> <span class="cons_Var">ps</span><span class="operator">],</span> <span class="cons_Var">x</span><span class="operator">)</span> <span class="operator">=</span> <span class="operator">[</span><span class="cons_Var"><span id="r_473_52" title="Not referenced"><span class="token sort_Id">r</span></span></span> <span class="operator">|</span> <a href="#filterShortestPath_internal_471_3" id="filterShortestPath_internal_473_56" title="Defined at line 471"><span class="token sort_Id">filterShortestPath_internal</span></a><span class="operator">(</span><span class="cons_Var"><span id="ps_473_84" title="Not referenced"><span class="token sort_Id">ps</span></span></span><span class="operator">,</span> <span class="cons_Var"><span id="x_473_88" title="Not referenced"><span class="token sort_Id">x</span></span></span><span class="operator">)].</span>
  <a href="#filterShortestPath_internal_471_3" id="filterShortestPath_internal_474_3" title="Defined at line 471"><span class="token sort_Id">filterShortestPath_internal</span></a><span class="operator">([_</span>      <span class="operator">|</span> <span class="cons_Var"><span id="ps_474_41" title="Not referenced"><span class="token sort_Id">ps</span></span></span><span class="operator">],</span> <span class="cons_Var"><span id="x_474_46" title="Not referenced"><span class="token sort_Id">x</span></span></span><span class="operator">)</span> <span class="operator">=</span> <a href="#filterShortestPath_internal_471_3" id="filterShortestPath_internal_474_51" title="Defined at line 471"><span class="token sort_Id">filterShortestPath_internal</span></a><span class="operator">(</span><span class="cons_Var">ps</span><span class="operator">,</span> <span class="cons_Var">x</span><span class="operator">).</span>

  <a href="#shortestPathLength_469_91" id="shortestPathLength_476_3" title="Referenced at line 469, 477, 478, 480"><span class="token sort_Id">shortestPathLength</span></a> <span class="operator">:</span> <span class="keyword">list</span><span class="operator">((</span><span class="cons_PathSort">path</span> <span class="operator">*</span> <span class="operator">(</span><span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_476_47" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">)))</span> <span class="operator">-&gt;</span> <span class="cons_IntSort">int</span>
  <a href="#shortestPathLength_476_3" id="shortestPathLength_477_3" title="Defined at line 476"><span class="token sort_Id">shortestPathLength</span></a><span class="operator">([])</span> <span class="operator">=</span> 10000<span class="operator">.</span>
  <a href="#shortestPathLength_476_3" id="shortestPathLength_478_3" title="Defined at line 476"><span class="token sort_Id">shortestPathLength</span></a><span class="operator">([(</span><span class="cons_Var"><a href="#p_479_21" id="p_478_24" title="Referenced at line 479"><span class="token sort_Id">p</span></a></span><span class="operator">,</span> <span class="operator">_)</span> <span class="operator">|</span> <span class="cons_Var"><a href="#ps_480_29" id="ps_478_32" title="Referenced at line 480"><span class="token sort_Id">ps</span></a></span><span class="operator">])</span> <span class="operator">=</span> <span class="cons_Var"><a href="#z_481_5" id="z_478_39" title="Referenced at line 481"><span class="token sort_Id">z</span></a></span> <span class="operator">:-</span> <span class="operator">{</span><span class="cons_Var"><a href="#x_479_5" id="x_478_45" title="Referenced at line 479"><span class="token sort_Id">x</span></a></span> <span class="cons_Var"><a href="#y_480_5" id="y_478_47" title="Referenced at line 480"><span class="token sort_Id">y</span></a></span><span class="operator">}</span>
    <span class="cons_Var"><a href="#x_478_45" id="x_479_5" title="Defined at line 478"><span class="token sort_Id">x</span></a></span> <span class="operator">==</span> <a href="#pathLength_450_3" id="pathLength_479_10" title="Defined at line 450"><span class="token sort_Id">pathLength</span></a><span class="operator">(</span><span class="cons_Var"><a href="#p_478_24" id="p_479_21" title="Defined at line 478"><span class="token sort_Id">p</span></a></span><span class="operator">),</span>
    <span class="cons_Var"><a href="#y_478_47" id="y_480_5" title="Defined at line 478"><span class="token sort_Id">y</span></a></span> <span class="operator">==</span> <a href="#shortestPathLength_476_3" id="shortestPathLength_480_10" title="Defined at line 476"><span class="token sort_Id">shortestPathLength</span></a><span class="operator">(</span><span class="cons_Var"><a href="#ps_478_32" id="ps_480_29" title="Defined at line 478"><span class="token sort_Id">ps</span></a></span><span class="operator">),</span>
    <span class="cons_Var"><a href="#z_478_39" id="z_481_5" title="Defined at line 478"><span class="token sort_Id">z</span></a></span> <span class="operator">#=</span> <span class="keyword">min</span><span class="operator">(</span><span class="cons_Var">x</span><span class="operator">,</span> <span class="cons_Var">y</span><span class="operator">).</span>

  <a href="#zipQueryResultsWithPathLength_469_56" id="zipQueryResultsWithPathLength_483_3" title="Referenced at line 469"><span class="token sort_Id">zipQueryResultsWithPathLength</span></a> <span class="keyword">maps</span> <a href="#zipQueryResultWithPathLength_484_3" id="zipQueryResultWithPathLength_483_38" title="Defined at line 484"><span class="token sort_Id">zipQueryResultWithPathLength</span></a><span class="operator">(</span><span class="keyword">list</span><span class="operator">(*))</span> <span class="operator">=</span> <span class="keyword">list</span><span class="operator">(*)</span>
  <a href="#zipQueryResultWithPathLength_483_38" id="zipQueryResultWithPathLength_484_3" title="Referenced at line 483, 485"><span class="token sort_Id">zipQueryResultWithPathLength</span></a> <span class="operator">:</span> <span class="operator">(</span><span class="cons_PathSort">path</span> <span class="operator">*</span> <span class="operator">(</span><span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_484_52" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">))</span> <span class="operator">-&gt;</span> <span class="operator">(</span><span class="cons_IntSort">int</span> <span class="operator">*</span> <span class="operator">(</span><span class="cons_PathSort">path</span> <span class="operator">*</span> <span class="operator">(</span><span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_484_87" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">)))</span>
  <a href="#zipQueryResultWithPathLength_484_3" id="zipQueryResultWithPathLength_485_3" title="Defined at line 484"><span class="token sort_Id">zipQueryResultWithPathLength</span></a><span class="operator">(</span><span class="cons_Var">r</span><span class="operator">@(</span><span class="cons_Var">p</span><span class="operator">,</span> <span class="operator">_))</span> <span class="operator">=</span> <span class="operator">(</span><a href="#pathLength_450_3" id="pathLength_485_45" title="Defined at line 450"><span class="token sort_Id">pathLength</span></a><span class="operator">(</span><span class="cons_Var"><span id="p_485_56" title="Not referenced"><span class="token sort_Id">p</span></span></span><span class="operator">),</span> <span class="cons_Var"><span id="r_485_60" title="Not referenced"><span class="token sort_Id">r</span></span></span><span class="operator">).</span>

  <a href="../webdsl-ac.stx/#queryResultTypes_155_11" id="queryResultTypes_487_3" title="Referenced at ../webdsl-ac.stx line 155, 164, 173, 274"><span class="token sort_Id">queryResultTypes</span></a> <span class="keyword">maps</span> <a href="#queryResultType_488_3" id="queryResultType_487_25" title="Defined at line 488"><span class="token sort_Id">queryResultType</span></a><span class="operator">(</span><span class="keyword">list</span><span class="operator">(*))</span> <span class="operator">=</span> <span class="keyword">list</span><span class="operator">(*)</span>
  <a href="#queryResultType_487_25" id="queryResultType_488_3" title="Referenced at line 487, 489"><span class="token sort_Id">queryResultType</span></a> <span class="operator">:</span> <span class="operator">(</span><span class="cons_PathSort">path</span> <span class="operator">*</span> <span class="operator">(</span><span class="cons_StringSort">string</span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_488_39" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span><span class="operator">))</span> <span class="operator">-&gt;</span> <span class="cons_SimpleSort"><a href="#TYPE_29_5" id="TYPE_488_49" title="Defined at line 29"><span class="token sort_Id">TYPE</span></a></span>
  <a href="#queryResultType_488_3" id="queryResultType_489_3" title="Defined at line 488"><span class="token sort_Id">queryResultType</span></a><span class="operator">((_,</span> <span class="operator">(_,</span> <span class="cons_Var">t</span><span class="operator">)))</span> <span class="operator">=</span> <span class="cons_Var"><span id="t_489_34" title="Not referenced"><span class="token sort_Id">t</span></span></span><span class="operator">.</span>

  <a href="../webdsl-ac.stx/#argNames_213_38" id="argNames_491_3" title="Referenced at ../webdsl-ac.stx line 213"><span class="token sort_Id">argNames</span></a> <span class="keyword">maps</span> <a href="#argName_492_3" id="argName_491_17" title="Defined at line 492"><span class="token sort_Id">argName</span></a><span class="operator">(</span><span class="keyword">list</span><span class="operator">(*))</span> <span class="operator">=</span> <span class="keyword">list</span><span class="operator">(*)</span>
  <a href="#argName_491_17" id="argName_492_3" title="Referenced at line 491, 493"><span class="token sort_Id">argName</span></a> <span class="operator">:</span> <span class="cons_SimpleSort"><a href="../../../src-gen/statix/signatures/WebDSL-Core-sig.stx/#FormalArg_11_5" id="FormalArg_492_13" title="Defined at ../../../src-gen/statix/signatures/WebDSL-Core-sig.stx line 11"><span class="token sort_Id">FormalArg</span></a></span> <span class="operator">-&gt;</span> <span class="cons_StringSort">string</span>
  <a href="#argName_492_3" id="argName_493_3" title="Defined at line 492"><span class="token sort_Id">argName</span></a><span class="operator">(</span><span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-Core-sig.stx/#Arg_56_5" id="Arg_493_11" title="Defined at ../../../src-gen/statix/signatures/WebDSL-Core-sig.stx line 56"><span class="token sort_Id">Arg</span></a><span class="operator">(</span><span class="cons_Var">x</span>, _)</span><span class="operator">)</span> <span class="operator">=</span> <span class="cons_Var"><span id="x_493_24" title="Not referenced"><span class="token sort_Id">x</span></span></span><span class="operator">.</span>

</code></pre></td></tr></tbody></table></div>

<div id="modal">
  <div id="modal-content">
    <span id="modal-close">&times;</span>
    <h2 id="modal-h2"></h2>
    <p  id="modal-p"></p>
    <ul id="modal-ul"></ul>
  </div>
</div>
