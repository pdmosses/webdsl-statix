---
title: webdsl-entities.stx
hide:
  - toc
---

# `webdsl-entities.stx`

:simple-github: [pdmosses/webdsl-statix/webdslstatix/trans/static-semantics/webdsl-entities.stx]

[pdmosses/webdsl-statix/webdslstatix/trans/static-semantics/webdsl-entities.stx]: https://github.com/pdmosses/webdsl-statix/blob/master/webdslstatix/trans/static-semantics/webdsl-entities.stx "The source file on GitHub"

<div class="stx"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
</pre></div></td>
<td class="code"><pre><code><span class="keyword">module</span> <button class="modal-open" id="static-semantics/webdsl-entities_1_8" title="a definition with multiple references" data-urls="../webdsl-ac.stx/#static-semantics/webdsl-entities line 14_3; ../webdsl-actions.stx/#static-semantics/webdsl-entities line 13_3; ../webdsl-native.stx/#static-semantics/webdsl-entities line 9_3; ../webdsl.stx/#static-semantics/webdsl-entities line 15_3; ../actions/functions.stx/#static-semantics/webdsl-entities line 7_3; ../entities/annotations.stx/#static-semantics/webdsl-entities line 7_3; ../entities/built-ins.stx/#static-semantics/webdsl-entities line 8_3; ../types/built-ins.stx/#static-semantics/webdsl-entities line 8_3; ../types/type-extensions.stx/#static-semantics/webdsl-entities line 8_3"><span class="token sort_Id">static-semantics/webdsl-entities</span></button>

<span class="keyword">imports</span>
  <a href="../actions/functions.stx/#static-semantics/actions/functions_1_8" id="static-semantics/actions/functions_4_3" title="a reference to a single-file definition"><span class="token sort_Id">static-semantics/actions/functions</span></a>

  <a href="../entities/annotations.stx/#static-semantics/entities/annotations_1_8" id="static-semantics/entities/annotations_6_3" title="a reference to a single-file definition"><span class="token sort_Id">static-semantics/entities/annotations</span></a>
  <a href="../entities/built-ins.stx/#static-semantics/entities/built-ins_1_8" id="static-semantics/entities/built-ins_7_3" title="a reference to a single-file definition"><span class="token sort_Id">static-semantics/entities/built-ins</span></a>
  <a href="../entities/generated-functions.stx/#static-semantics/entities/generated-functions_1_8" id="static-semantics/entities/generated-functions_8_3" title="a reference to a single-file definition"><span class="token sort_Id">static-semantics/entities/generated-functions</span></a>

  <a href="../types/built-ins.stx/#static-semantics/types/built-ins_1_8" id="static-semantics/types/built-ins_10_3" title="a reference to a single-file definition"><span class="token sort_Id">static-semantics/types/built-ins</span></a>

  <a href="../webdsl-actions.stx/#static-semantics/webdsl-actions_1_8" id="static-semantics/webdsl-actions_12_3" title="a reference to a single-file definition"><span class="token sort_Id">static-semantics/webdsl-actions</span></a>
  <a href="../webdsl-types.stx/#static-semantics/webdsl-types_1_8" id="static-semantics/webdsl-types_13_3" title="a reference to a single-file definition"><span class="token sort_Id">static-semantics/webdsl-types</span></a>
  <a href="../webdsl.stx/#static-semantics/webdsl_1_8" id="static-semantics/webdsl_14_3" title="a reference to a single-file definition"><span class="token sort_Id">static-semantics/webdsl</span></a>

<span class="keyword">rules</span> <span class="layout">// unimplemented</span>

  <a href="../webdsl.stx/#stmtOk_361_3" id="stmtOk_18_3" title="a reference to a single-file definition"><span class="token sort_Id">stmtOk</span></a><span class="operator">(_,</span> <span class="operator">_,</span> <span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-EntityDerive-sig.stx/#ForeachStatementEntityDerive_25_5" id="ForeachStatementEntityDerive_18_16" title="a reference to a single-file definition"><span class="token sort_Id">ForeachStatementEntityDerive</span></a><span class="operator">(_,</span> <span class="operator">_)</span></span><span class="operator">,</span> <span class="operator">_)</span> <span class="operator">:-</span> <span class="keyword">try</span> <span class="operator">{</span> <span class="keyword">false</span> <span class="operator">}</span> <span class="operator">|</span> <span class="token sort_Id">warning</span> <span class="operator">$[</span><span class="cons_Text">This statement is not yet implemented</span><span class="operator">].</span>

<span class="keyword">rules</span> <span class="layout">// entity declaration</span>

  <span class="layout">// entity x : super { ... }</span>
  <a href="../webdsl.stx/#defOk_356_3" id="defOk_23_3" title="a reference to a single-file definition"><span class="token sort_Id">defOk</span></a><span class="operator">(</span><span class="cons_Var"><button class="modal-open" id="s_23_9" title="a definition with multiple references" data-urls="#s line 24_17, 25_64, 27_16, 28_16"><span class="token sort_Id">s</span></button></span><span class="operator">,</span> <span class="cons_Var"><a href="#e_26_80" id="e_23_12" title="a definition with a single reference"><span class="token sort_Id">e</span></a></span><span class="operator">@</span><span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-DataModel-sig.stx/#Entity_26_5" id="Entity_23_14" title="a reference to a single-file definition"><span class="token sort_Id">Entity</span></a><span class="operator">(</span><span class="cons_Var"><button class="modal-open" id="x_23_21" title="a definition with multiple references" data-urls="#x line 27_29, 28_19, 28_35"><span class="token sort_Id">x</span></button></span><span class="operator">,</span> <span class="cons_Var"><button class="modal-open" id="super_23_24" title="a definition with multiple references" data-urls="#super line 24_20, 24_94, 24_118, 31_6"><span class="token sort_Id">super</span></button></span><span class="operator">,</span> <span class="cons_Var"><a href="#bodydecs_27_32" id="bodydecs_23_31" title="a definition with a single reference"><span class="token sort_Id">bodydecs</span></a></span><span class="operator">)</span></span><span class="operator">)</span> <span class="operator">:-</span> <span class="operator">{</span><span class="cons_Var"><button class="modal-open" id="s_entity_23_46" title="a definition with multiple references" data-urls="#s_entity line 25_9, 25_19, 25_48, 26_27, 27_19, 28_38, 29_18, 30_29"><span class="token sort_Id">s_entity</span></button></span> <span class="cons_Var"><button class="modal-open" id="super'_23_55" title="a definition with multiple references" data-urls="#super' line 24_36, 31_19"><span class="token sort_Id">super'</span></button></span> <span class="cons_Var"><button class="modal-open" id="s_super_23_62" title="a definition with multiple references" data-urls="#s_super line 24_64, 25_39"><span class="token sort_Id">s_super</span></button></span> <span class="cons_Var"><button class="modal-open" id="superType_23_70" title="a definition with multiple references" data-urls="#superType line 24_44, 29_28"><span class="token sort_Id">superType</span></button></span> <span class="operator">}</span>
    <a href="../webdsl.stx/#resolveType_105_3" id="resolveType_24_5" title="a reference to a single-file definition"><span class="token sort_Id">resolveType</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_23_9" id="s_24_17" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#super_23_24" id="super_24_20" title="a reference to a single-file definition"><span class="token sort_Id">super</span></a></span><span class="operator">)</span> <span class="operator">==</span> <span class="operator">[(_,</span> <span class="operator">(</span><span class="cons_Var"><a href="#super'_23_55" id="super'_24_36" title="a reference to a single-file definition"><span class="token sort_Id">super'</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#superType_23_70" id="superType_24_44" title="a reference to a single-file definition"><span class="token sort_Id">superType</span></a></span><span class="operator">@</span><span class="cons_Op"><a href="../webdsl-types.stx/#ENTITY_20_5" id="ENTITY_24_54" title="a reference to a single-file definition"><span class="token sort_Id">ENTITY</span></a><span class="operator">(_,</span> <span class="cons_Var"><a href="#s_super_23_62" id="s_super_24_64" title="a reference to a single-file definition"><span class="token sort_Id">s_super</span></a></span><span class="operator">)</span></span><span class="operator">))]</span> <span class="operator">|</span> <span class="keyword">error</span> <span class="operator">$[</span><span class="cons_Text">Entity </span><span class="operator">[</span><span class="cons_Var"><a href="#super_23_24" id="super_24_94" title="a reference to a single-file definition"><span class="token sort_Id">super</span></a></span><span class="operator">]</span><span class="cons_Text"> is not defined</span><span class="operator">]</span> <span class="operator">@</span><span class="cons_Var"><a href="#super_23_24" id="super_24_118" title="a reference to a single-file definition"><span class="token sort_Id">super</span></a></span><span class="operator">,</span>
    <span class="keyword">new</span> <span class="cons_Var"><a href="#s_entity_23_46" id="s_entity_25_9" title="a reference to a single-file definition"><span class="token sort_Id">s_entity</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#s_entity_23_46" id="s_entity_25_19" title="a reference to a single-file definition"><span class="token sort_Id">s_entity</span></a></span> <span class="operator">-</span><span class="cons_Label"><a href="../webdsl.stx/#INHERIT_48_7" id="INHERIT_25_29" title="a reference to a single-file definition"><span class="token sort_Id">INHERIT</span></a></span><span class="operator">-&gt;</span> <span class="cons_Var"><a href="#s_super_23_62" id="s_super_25_39" title="a reference to a single-file definition"><span class="token sort_Id">s_super</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#s_entity_23_46" id="s_entity_25_48" title="a reference to a single-file definition"><span class="token sort_Id">s_entity</span></a></span> <span class="operator">-</span><span class="cons_Label"><a href="../webdsl.stx/#DEF_49_7" id="DEF_25_58" title="a reference to a single-file definition"><span class="token sort_Id">DEF</span></a></span><span class="operator">-&gt;</span> <span class="cons_Var"><a href="#s_23_9" id="s_25_64" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">,</span>
    <a href="#noCircularInheritance_76_3" id="noCircularInheritance_26_5" title="a reference to a single-file definition"><span class="token sort_Id">noCircularInheritance</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_entity_23_46" id="s_entity_26_27" title="a reference to a single-file definition"><span class="token sort_Id">s_entity</span></a></span><span class="operator">)</span> <span class="operator">|</span> <span class="keyword">error</span> <span class="operator">$[</span><span class="cons_Text">Circular inhertitance detected</span><span class="operator">]</span> <span class="operator">@</span><span class="cons_Var"><a href="#e_23_12" id="e_26_80" title="a reference to a single-file definition"><span class="token sort_Id">e</span></a></span><span class="operator">,</span>
    <a href="#declEntity_47_3" id="declEntity_27_5" title="a reference to a single-file definition"><span class="token sort_Id">declEntity</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_23_9" id="s_27_16" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#s_entity_23_46" id="s_entity_27_19" title="a reference to a single-file definition"><span class="token sort_Id">s_entity</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#x_23_21" id="x_27_29" title="a reference to a single-file definition"><span class="token sort_Id">x</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#bodydecs_23_31" id="bodydecs_27_32" title="a reference to a single-file definition"><span class="token sort_Id">bodydecs</span></a></span><span class="operator">),</span>
    <a href="../webdsl.stx/#declareVar_301_3" id="declareVar_28_5" title="a reference to a single-file definition"><span class="token sort_Id">declareVar</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_23_9" id="s_28_16" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#x_23_21" id="x_28_19" title="a reference to a single-file definition"><span class="token sort_Id">x</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../webdsl-types.stx/#STATICENTITY_21_5" id="STATICENTITY_28_22" title="a reference to a single-file definition"><span class="token sort_Id">STATICENTITY</span></a><span class="operator">(</span><span class="cons_Var"><a href="#x_23_21" id="x_28_35" title="a reference to a single-file definition"><span class="token sort_Id">x</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#s_entity_23_46" id="s_entity_28_38" title="a reference to a single-file definition"><span class="token sort_Id">s_entity</span></a></span><span class="operator">)</span></span><span class="operator">),</span> <span class="layout">// declare entity_name as global variable that refers to the static scope</span>
    <a href="#declSuperVar_88_3" id="declSuperVar_29_5" title="a reference to a single-file definition"><span class="token sort_Id">declSuperVar</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_entity_23_46" id="s_entity_29_18" title="a reference to a single-file definition"><span class="token sort_Id">s_entity</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#superType_23_70" id="superType_29_28" title="a reference to a single-file definition"><span class="token sort_Id">superType</span></a></span><span class="operator">),</span>
    <a href="../entities/annotations.stx/#declareEntityAnnotation_66_3" id="declareEntityAnnotation_30_5" title="a reference to a single-file definition"><span class="token sort_Id">declareEntityAnnotation</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_entity_23_46" id="s_entity_30_29" title="a reference to a single-file definition"><span class="token sort_Id">s_entity</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../entities/annotations.stx/#SUBENTITY_27_5" id="SUBENTITY_30_39" title="a reference to a single-file definition"><span class="token sort_Id">SUBENTITY</span></a><span class="operator">()</span></span><span class="operator">),</span>
    <span class="operator">@</span><span class="cons_Var"><a href="#super_23_24" id="super_31_6" title="a reference to a single-file definition"><span class="token sort_Id">super</span></a></span><span class="operator">.</span><span class="keyword">ref</span> <span class="operator">:=</span> <span class="cons_Var"><a href="#super'_23_55" id="super'_31_19" title="a reference to a single-file definition"><span class="token sort_Id">super'</span></a></span><span class="operator">.</span>

  <span class="layout">// entity x { ... }</span>
  <a href="../webdsl.stx/#defOk_356_3" id="defOk_34_3" title="a reference to a single-file definition"><span class="token sort_Id">defOk</span></a><span class="operator">(</span><span class="cons_Var"><button class="modal-open" id="s_34_9" title="a definition with multiple references" data-urls="#s line 35_12, 36_64, 37_16, 38_16"><span class="token sort_Id">s</span></button></span><span class="operator">,</span> <span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-DataModel-sig.stx/#EntityNoSuper_27_5" id="EntityNoSuper_34_12" title="a reference to a single-file definition"><span class="token sort_Id">EntityNoSuper</span></a><span class="operator">(</span><span class="cons_Var"><button class="modal-open" id="x_34_26" title="a definition with multiple references" data-urls="#x line 37_29, 38_19, 38_35"><span class="token sort_Id">x</span></button></span><span class="operator">,</span> <span class="cons_Var"><a href="#bodydecs_37_32" id="bodydecs_34_29" title="a definition with a single reference"><span class="token sort_Id">bodydecs</span></a></span><span class="operator">)</span></span><span class="operator">)</span> <span class="operator">:-</span> <span class="operator">{</span><span class="cons_Var"><button class="modal-open" id="s_entity_34_44" title="a definition with multiple references" data-urls="#s_entity line 36_9, 36_19, 36_48, 37_19, 38_38"><span class="token sort_Id">s_entity</span></button></span> <span class="cons_Var"><button class="modal-open" id="s_super_34_53" title="a definition with multiple references" data-urls="#s_super line 35_28, 36_39"><span class="token sort_Id">s_super</span></button></span><span class="operator">}</span>
    <a href="../types/built-ins.stx/#entity_81_3" id="entity_35_5" title="a reference to a single-file definition"><span class="token sort_Id">entity</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_34_9" id="s_35_12" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">)</span> <span class="operator">==</span> <span class="cons_Op"><a href="../webdsl-types.stx/#ENTITY_20_5" id="ENTITY_35_18" title="a reference to a single-file definition"><span class="token sort_Id">ENTITY</span></a><span class="operator">(_,</span> <span class="cons_Var"><a href="#s_super_34_53" id="s_super_35_28" title="a reference to a single-file definition"><span class="token sort_Id">s_super</span></a></span><span class="operator">)</span></span><span class="operator">,</span>
    <span class="keyword">new</span> <span class="cons_Var"><a href="#s_entity_34_44" id="s_entity_36_9" title="a reference to a single-file definition"><span class="token sort_Id">s_entity</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#s_entity_34_44" id="s_entity_36_19" title="a reference to a single-file definition"><span class="token sort_Id">s_entity</span></a></span> <span class="operator">-</span><span class="cons_Label"><a href="../webdsl.stx/#INHERIT_48_7" id="INHERIT_36_29" title="a reference to a single-file definition"><span class="token sort_Id">INHERIT</span></a></span><span class="operator">-&gt;</span> <span class="cons_Var"><a href="#s_super_34_53" id="s_super_36_39" title="a reference to a single-file definition"><span class="token sort_Id">s_super</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#s_entity_34_44" id="s_entity_36_48" title="a reference to a single-file definition"><span class="token sort_Id">s_entity</span></a></span> <span class="operator">-</span><span class="cons_Label"><a href="../webdsl.stx/#DEF_49_7" id="DEF_36_58" title="a reference to a single-file definition"><span class="token sort_Id">DEF</span></a></span><span class="operator">-&gt;</span> <span class="cons_Var"><a href="#s_34_9" id="s_36_64" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">,</span>
    <a href="#declEntity_47_3" id="declEntity_37_5" title="a reference to a single-file definition"><span class="token sort_Id">declEntity</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_34_9" id="s_37_16" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#s_entity_34_44" id="s_entity_37_19" title="a reference to a single-file definition"><span class="token sort_Id">s_entity</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#x_34_26" id="x_37_29" title="a reference to a single-file definition"><span class="token sort_Id">x</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#bodydecs_34_29" id="bodydecs_37_32" title="a reference to a single-file definition"><span class="token sort_Id">bodydecs</span></a></span><span class="operator">),</span>
    <a href="../webdsl.stx/#declareVar_301_3" id="declareVar_38_5" title="a reference to a single-file definition"><span class="token sort_Id">declareVar</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_34_9" id="s_38_16" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#x_34_26" id="x_38_19" title="a reference to a single-file definition"><span class="token sort_Id">x</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../webdsl-types.stx/#STATICENTITY_21_5" id="STATICENTITY_38_22" title="a reference to a single-file definition"><span class="token sort_Id">STATICENTITY</span></a><span class="operator">(</span><span class="cons_Var"><a href="#x_34_26" id="x_38_35" title="a reference to a single-file definition"><span class="token sort_Id">x</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#s_entity_34_44" id="s_entity_38_38" title="a reference to a single-file definition"><span class="token sort_Id">s_entity</span></a></span><span class="operator">)</span></span><span class="operator">).</span> <span class="layout">// declare entity_name as global variable that refers to the static scope</span>

  <span class="layout">// session x { ... }</span>
  <a href="../webdsl.stx/#defOk_356_3" id="defOk_41_3" title="a reference to a single-file definition"><span class="token sort_Id">defOk</span></a><span class="operator">(</span><span class="cons_Var"><button class="modal-open" id="s_41_9" title="a definition with multiple references" data-urls="#s line 42_35, 43_16, 44_16"><span class="token sort_Id">s</span></button></span><span class="operator">,</span> <span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-DataModel-sig.stx/#SessionEntity_28_5" id="SessionEntity_41_12" title="a reference to a single-file definition"><span class="token sort_Id">SessionEntity</span></a><span class="operator">(</span><span class="cons_Var"><button class="modal-open" id="x_41_26" title="a definition with multiple references" data-urls="#x line 43_29, 44_19, 44_29"><span class="token sort_Id">x</span></button></span><span class="operator">,</span> <span class="cons_Var"><a href="#bodydecs_43_32" id="bodydecs_41_29" title="a definition with a single reference"><span class="token sort_Id">bodydecs</span></a></span><span class="operator">)</span></span><span class="operator">)</span> <span class="operator">:-</span> <span class="operator">{</span><span class="cons_Var"><button class="modal-open" id="s_entity_41_44" title="a definition with multiple references" data-urls="#s_entity line 42_9, 42_19, 43_19, 44_32, 45_29"><span class="token sort_Id">s_entity</span></button></span><span class="operator">}</span>
    <span class="keyword">new</span> <span class="cons_Var"><a href="#s_entity_41_44" id="s_entity_42_9" title="a reference to a single-file definition"><span class="token sort_Id">s_entity</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#s_entity_41_44" id="s_entity_42_19" title="a reference to a single-file definition"><span class="token sort_Id">s_entity</span></a></span> <span class="operator">-</span><span class="cons_Label"><a href="../webdsl.stx/#DEF_49_7" id="DEF_42_29" title="a reference to a single-file definition"><span class="token sort_Id">DEF</span></a></span><span class="operator">-&gt;</span> <span class="cons_Var"><a href="#s_41_9" id="s_42_35" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">,</span>
    <a href="#declEntity_47_3" id="declEntity_43_5" title="a reference to a single-file definition"><span class="token sort_Id">declEntity</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_41_9" id="s_43_16" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#s_entity_41_44" id="s_entity_43_19" title="a reference to a single-file definition"><span class="token sort_Id">s_entity</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#x_41_26" id="x_43_29" title="a reference to a single-file definition"><span class="token sort_Id">x</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#bodydecs_41_29" id="bodydecs_43_32" title="a reference to a single-file definition"><span class="token sort_Id">bodydecs</span></a></span><span class="operator">),</span>
    <a href="../webdsl.stx/#declareVar_301_3" id="declareVar_44_5" title="a reference to a single-file definition"><span class="token sort_Id">declareVar</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_41_9" id="s_44_16" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#x_41_26" id="x_44_19" title="a reference to a single-file definition"><span class="token sort_Id">x</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../webdsl-types.stx/#ENTITY_20_5" id="ENTITY_44_22" title="a reference to a single-file definition"><span class="token sort_Id">ENTITY</span></a><span class="operator">(</span><span class="cons_Var"><a href="#x_41_26" id="x_44_29" title="a reference to a single-file definition"><span class="token sort_Id">x</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#s_entity_41_44" id="s_entity_44_32" title="a reference to a single-file definition"><span class="token sort_Id">s_entity</span></a></span><span class="operator">)</span></span><span class="operator">),</span> <span class="layout">// session entities only have one instance and don't have a static scope</span>
    <a href="../entities/annotations.stx/#declareEntityAnnotation_66_3" id="declareEntityAnnotation_45_5" title="a reference to a single-file definition"><span class="token sort_Id">declareEntityAnnotation</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_entity_41_44" id="s_entity_45_29" title="a reference to a single-file definition"><span class="token sort_Id">s_entity</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../entities/annotations.stx/#SESSIONENTITY_26_5" id="SESSIONENTITY_45_39" title="a reference to a single-file definition"><span class="token sort_Id">SESSIONENTITY</span></a><span class="operator">()</span></span><span class="operator">).</span>

  <button class="modal-open" id="declEntity_47_3" title="a definition with multiple references" data-urls="#declEntity line 27_5, 37_5, 43_5, 48_3"><span class="token sort_Id">declEntity</span></button> <span class="operator">:</span> <span class="cons_ScopeSort"><span class="keyword">scope</span></span> <span class="operator">*</span> <span class="cons_ScopeSort"><span class="keyword">scope</span></span> <span class="operator">*</span> <span class="cons_StringSort"><span class="keyword">string</span></span> <span class="operator">*</span> <span class="keyword">list</span><span class="operator">(</span><span class="cons_SimpleSort"><a href="../../../src-gen/statix/signatures/WebDSL-DataModel-sig.stx/#EntityBodyDeclaration_11_5" id="EntityBodyDeclaration_47_46" title="a reference to a single-file definition"><span class="token sort_Id">EntityBodyDeclaration</span></a></span><span class="operator">)</span>
  <a href="#declEntity_47_3" id="declEntity_48_3" title="a reference to a single-file definition"><span class="token sort_Id">declEntity</span></a><span class="operator">(</span><span class="cons_Var"><button class="modal-open" id="s_48_14" title="a definition with multiple references" data-urls="#s line 49_24, 50_37, 52_17"><span class="token sort_Id">s</span></button></span><span class="operator">,</span> <span class="cons_Var"><button class="modal-open" id="s_entity_48_17" title="a definition with multiple references" data-urls="#s_entity line 49_40, 50_54, 51_39, 53_17, 54_20"><span class="token sort_Id">s_entity</span></button></span><span class="operator">,</span> <span class="cons_Var"><button class="modal-open" id="entity_name_48_27" title="a definition with multiple references" data-urls="#entity_name line 49_27, 50_40, 51_26, 52_20, 54_30"><span class="token sort_Id">entity_name</span></button></span><span class="operator">,</span> <span class="cons_Var"><a href="#bodydecs_54_43" id="bodydecs_48_40" title="a definition with a single reference"><span class="token sort_Id">bodydecs</span></a></span><span class="operator">)</span> <span class="operator">:-</span> <span class="operator">{</span> <span class="cons_Var"><button class="modal-open" id="entityType_48_55" title="a definition with multiple references" data-urls="#entityType line 51_5, 52_33, 53_27"><span class="token sort_Id">entityType</span></button></span> <span class="operator">}</span>
    <a href="../webdsl.stx/#declareExtendScope_133_3" id="declareExtendScope_49_5" title="a reference to a single-file definition"><span class="token sort_Id">declareExtendScope</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_48_14" id="s_49_24" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#entity_name_48_27" id="entity_name_49_27" title="a reference to a single-file definition"><span class="token sort_Id">entity_name</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#s_entity_48_17" id="s_entity_49_40" title="a reference to a single-file definition"><span class="token sort_Id">s_entity</span></a></span><span class="operator">),</span> <span class="layout">// declare entity_scope to be linked to entity_name</span>
    <a href="#extendScopes_56_3" id="extendScopes_50_5" title="a reference to a single-file definition"><span class="token sort_Id">extendScopes</span></a><span class="operator">(</span><a href="../webdsl.stx/#resolveExtendScope_137_3" id="resolveExtendScope_50_18" title="a reference to a single-file definition"><span class="token sort_Id">resolveExtendScope</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_48_14" id="s_50_37" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#entity_name_48_27" id="entity_name_50_40" title="a reference to a single-file definition"><span class="token sort_Id">entity_name</span></a></span><span class="operator">),</span> <span class="cons_Var"><a href="#s_entity_48_17" id="s_entity_50_54" title="a reference to a single-file definition"><span class="token sort_Id">s_entity</span></a></span><span class="operator">),</span>
    <span class="cons_Var"><a href="#entityType_48_55" id="entityType_51_5" title="a reference to a single-file definition"><span class="token sort_Id">entityType</span></a></span> <span class="operator">==</span> <span class="cons_Op"><a href="../webdsl-types.stx/#ENTITY_20_5" id="ENTITY_51_19" title="a reference to a single-file definition"><span class="token sort_Id">ENTITY</span></a><span class="operator">(</span><span class="cons_Var"><a href="#entity_name_48_27" id="entity_name_51_26" title="a reference to a single-file definition"><span class="token sort_Id">entity_name</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#s_entity_48_17" id="s_entity_51_39" title="a reference to a single-file definition"><span class="token sort_Id">s_entity</span></a></span><span class="operator">)</span></span><span class="operator">,</span>
    <a href="../webdsl.stx/#declareType_100_3" id="declareType_52_5" title="a reference to a single-file definition"><span class="token sort_Id">declareType</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_48_14" id="s_52_17" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#entity_name_48_27" id="entity_name_52_20" title="a reference to a single-file definition"><span class="token sort_Id">entity_name</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#entityType_48_55" id="entityType_52_33" title="a reference to a single-file definition"><span class="token sort_Id">entityType</span></a></span><span class="operator">),</span>
    <a href="#declThisVar_83_3" id="declThisVar_53_5" title="a reference to a single-file definition"><span class="token sort_Id">declThisVar</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_entity_48_17" id="s_entity_53_17" title="a reference to a single-file definition"><span class="token sort_Id">s_entity</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#entityType_48_55" id="entityType_53_27" title="a reference to a single-file definition"><span class="token sort_Id">entityType</span></a></span><span class="operator">),</span>
    <a href="#declEntityBody_109_3" id="declEntityBody_54_5" title="a reference to a single-file definition"><span class="token sort_Id">declEntityBody</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_entity_48_17" id="s_entity_54_20" title="a reference to a single-file definition"><span class="token sort_Id">s_entity</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#entity_name_48_27" id="entity_name_54_30" title="a reference to a single-file definition"><span class="token sort_Id">entity_name</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#bodydecs_48_40" id="bodydecs_54_43" title="a reference to a single-file definition"><span class="token sort_Id">bodydecs</span></a></span><span class="operator">).</span>

  <button class="modal-open" id="extendScopes_56_3" title="a definition with multiple references" data-urls="#extendScopes line 50_5, 73_5; ../webdsl-ac.stx/#extendScopes line 28_5, 86_5; ../webdsl-native.stx/#extendScopes line 41_5, 54_5; ../types/built-ins.stx/#extendScopes line 20_5, 30_5; ../types/type-extensions.stx/#extendScopes line 19_5"><span class="token sort_Id">extendScopes</span></button> <span class="keyword">maps</span> <a href="#extendScope_57_3" id="extendScope_56_21" title="a reference to a single-file definition"><span class="token sort_Id">extendScope</span></a><span class="operator">(</span><span class="keyword">list</span><span class="operator">(*),</span> <span class="operator">*)</span>
  <button class="modal-open" id="extendScope_57_3" title="a definition with multiple references" data-urls="#extendScope line 56_21, 58_3, 59_3"><span class="token sort_Id">extendScope</span></button> <span class="operator">:</span> <span class="operator">(</span><span class="cons_PathSort"><span class="keyword">path</span></span> <span class="operator">*</span> <span class="operator">(</span><span class="cons_StringSort"><span class="keyword">string</span></span> <span class="operator">*</span> <span class="cons_ScopeSort"><span class="keyword">scope</span></span><span class="operator">))</span> <span class="operator">*</span> <span class="cons_ScopeSort"><span class="keyword">scope</span></span>
  <a href="#extendScope_57_3" id="extendScope_58_3" title="a reference to a single-file definition"><span class="token sort_Id">extendScope</span></a><span class="operator">((_,</span> <span class="operator">(_,</span> <span class="cons_Var">s</span><span class="operator">)),</span> <span class="cons_Var"><span id="s_58_28" title="a definition with no references"><span class="token sort_Id">s</span></span></span><span class="operator">).</span> <span class="layout">// Do not inherit own scope</span>
  <a href="#extendScope_57_3" id="extendScope_59_3" title="a reference to a single-file definition"><span class="token sort_Id">extendScope</span></a><span class="operator">((_,</span> <span class="operator">(_,</span> <span class="cons_Var"><a href="#s'_60_17" id="s'_59_23" title="a definition with a single reference"><span class="token sort_Id">s'</span></a></span><span class="operator">)),</span> <span class="cons_Var"><a href="#s_60_5" id="s_59_29" title="a definition with a single reference"><span class="token sort_Id">s</span></a></span><span class="operator">)</span> <span class="operator">:-</span>
    <span class="cons_Var"><a href="#s_59_29" id="s_60_5" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span> <span class="operator">-</span><span class="cons_Label"><a href="../webdsl.stx/#EXTEND_47_7" id="EXTEND_60_8" title="a reference to a single-file definition"><span class="token sort_Id">EXTEND</span></a></span><span class="operator">-&gt;</span> <span class="cons_Var"><a href="#s'_59_23" id="s'_60_17" title="a reference to a single-file definition"><span class="token sort_Id">s'</span></a></span><span class="operator">.</span>

  <span class="layout">// extend entity x { ... }</span>
  <a href="../webdsl.stx/#defOk_356_3" id="defOk_63_3" title="a reference to a single-file definition"><span class="token sort_Id">defOk</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_global_63_66" id="s_global_63_9" title="a definition with a single reference"><span class="token sort_Id">s_global</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-DataModel-sig.stx/#ExtendEntity_29_5" id="ExtendEntity_63_19" title="a reference to a single-file definition"><span class="token sort_Id">ExtendEntity</span></a><span class="operator">(</span><span class="cons_Var"><a href="#x_63_76" id="x_63_32" title="a definition with a single reference"><span class="token sort_Id">x</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#bodydecs_63_79" id="bodydecs_63_35" title="a definition with a single reference"><span class="token sort_Id">bodydecs</span></a></span><span class="operator">)</span></span><span class="operator">)</span> <span class="operator">:-</span> <a href="#declExtendEntity_68_3" id="declExtendEntity_63_49" title="a reference to a single-file definition"><span class="token sort_Id">declExtendEntity</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_global_63_9" id="s_global_63_66" title="a reference to a single-file definition"><span class="token sort_Id">s_global</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#x_63_32" id="x_63_76" title="a reference to a single-file definition"><span class="token sort_Id">x</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#bodydecs_63_35" id="bodydecs_63_79" title="a reference to a single-file definition"><span class="token sort_Id">bodydecs</span></a></span><span class="operator">).</span>

  <span class="layout">// extend session { ... }</span>
  <a href="../webdsl.stx/#defOk_356_3" id="defOk_66_3" title="a reference to a single-file definition"><span class="token sort_Id">defOk</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_global_66_73" id="s_global_66_9" title="a definition with a single reference"><span class="token sort_Id">s_global</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-DataModel-sig.stx/#ExtendSessionEntity_30_5" id="ExtendSessionEntity_66_19" title="a reference to a single-file definition"><span class="token sort_Id">ExtendSessionEntity</span></a><span class="operator">(</span><span class="cons_Var"><a href="#x_66_83" id="x_66_39" title="a definition with a single reference"><span class="token sort_Id">x</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#bodydecs_66_86" id="bodydecs_66_42" title="a definition with a single reference"><span class="token sort_Id">bodydecs</span></a></span><span class="operator">)</span></span><span class="operator">)</span> <span class="operator">:-</span> <a href="#declExtendEntity_68_3" id="declExtendEntity_66_56" title="a reference to a single-file definition"><span class="token sort_Id">declExtendEntity</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_global_66_9" id="s_global_66_73" title="a reference to a single-file definition"><span class="token sort_Id">s_global</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#x_66_39" id="x_66_83" title="a reference to a single-file definition"><span class="token sort_Id">x</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#bodydecs_66_42" id="bodydecs_66_86" title="a reference to a single-file definition"><span class="token sort_Id">bodydecs</span></a></span><span class="operator">).</span>

  <button class="modal-open" id="declExtendEntity_68_3" title="a definition with multiple references" data-urls="#declExtendEntity line 63_49, 66_56, 69_3"><span class="token sort_Id">declExtendEntity</span></button> <span class="operator">:</span> <span class="cons_ScopeSort"><span class="keyword">scope</span></span> <span class="operator">*</span> <span class="cons_StringSort"><span class="keyword">string</span></span> <span class="operator">*</span> <span class="keyword">list</span><span class="operator">(</span><span class="cons_SimpleSort"><a href="../../../src-gen/statix/signatures/WebDSL-DataModel-sig.stx/#EntityBodyDeclaration_11_5" id="EntityBodyDeclaration_68_44" title="a reference to a single-file definition"><span class="token sort_Id">EntityBodyDeclaration</span></a></span><span class="operator">)</span>
  <a href="#declExtendEntity_68_3" id="declExtendEntity_69_3" title="a reference to a single-file definition"><span class="token sort_Id">declExtendEntity</span></a><span class="operator">(</span><span class="cons_Var"><button class="modal-open" id="s_69_20" title="a definition with multiple references" data-urls="#s line 70_17, 71_49, 72_24, 73_37"><span class="token sort_Id">s</span></button></span><span class="operator">,</span> <span class="cons_Var"><button class="modal-open" id="entity_name_69_23" title="a definition with multiple references" data-urls="#entity_name line 70_20, 70_79, 72_27, 73_40, 74_37"><span class="token sort_Id">entity_name</span></button></span><span class="operator">,</span> <span class="cons_Var"><a href="#bodydecs_74_50" id="bodydecs_69_36" title="a definition with a single reference"><span class="token sort_Id">bodydecs</span></a></span><span class="operator">)</span> <span class="operator">:-</span> <span class="operator">{</span><span class="cons_Var"><button class="modal-open" id="s_extend_entity_69_50" title="a definition with multiple references" data-urls="#s_extend_entity line 71_9, 71_26, 72_40, 73_54, 74_20"><span class="token sort_Id">s_extend_entity</span></button></span> <span class="cons_Var"><span id="entity_scopes_69_66" title="a definition with no references"><span class="token sort_Id">entity_scopes</span></span></span><span class="operator">}</span>
    <a href="../webdsl.stx/#resolveType_105_3" id="resolveType_70_5" title="a reference to a single-file definition"><span class="token sort_Id">resolveType</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_69_20" id="s_70_17" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#entity_name_69_23" id="entity_name_70_20" title="a reference to a single-file definition"><span class="token sort_Id">entity_name</span></a></span><span class="operator">)</span> <span class="operator">==</span> <span class="operator">[(_,</span> <span class="operator">(_,</span> <span class="cons_Op"><a href="../webdsl-types.stx/#ENTITY_20_5" id="ENTITY_70_45" title="a reference to a single-file definition"><span class="token sort_Id">ENTITY</span></a><span class="operator">(_,</span> <span class="operator">_)</span></span><span class="operator">))]</span> <span class="operator">|</span> <span class="keyword">error</span> <span class="operator">$[</span><span class="cons_Text">Entity </span><span class="operator">[</span><span class="cons_Var"><a href="#entity_name_69_23" id="entity_name_70_79" title="a reference to a single-file definition"><span class="token sort_Id">entity_name</span></a></span><span class="operator">]</span><span class="cons_Text"> is not defined</span><span class="operator">],</span>
    <span class="keyword">new</span> <span class="cons_Var"><a href="#s_extend_entity_69_50" id="s_extend_entity_71_9" title="a reference to a single-file definition"><span class="token sort_Id">s_extend_entity</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#s_extend_entity_69_50" id="s_extend_entity_71_26" title="a reference to a single-file definition"><span class="token sort_Id">s_extend_entity</span></a></span> <span class="operator">-</span><span class="cons_Label"><a href="../webdsl.stx/#DEF_49_7" id="DEF_71_43" title="a reference to a single-file definition"><span class="token sort_Id">DEF</span></a></span><span class="operator">-&gt;</span> <span class="cons_Var"><a href="#s_69_20" id="s_71_49" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">,</span>
    <a href="../webdsl.stx/#declareExtendScope_133_3" id="declareExtendScope_72_5" title="a reference to a single-file definition"><span class="token sort_Id">declareExtendScope</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_69_20" id="s_72_24" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#entity_name_69_23" id="entity_name_72_27" title="a reference to a single-file definition"><span class="token sort_Id">entity_name</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#s_extend_entity_69_50" id="s_extend_entity_72_40" title="a reference to a single-file definition"><span class="token sort_Id">s_extend_entity</span></a></span><span class="operator">),</span> <span class="layout">// declare entity_scope to be linked to entity_name</span>
    <a href="#extendScopes_56_3" id="extendScopes_73_5" title="a reference to a single-file definition"><span class="token sort_Id">extendScopes</span></a><span class="operator">(</span><a href="../webdsl.stx/#resolveExtendScope_137_3" id="resolveExtendScope_73_18" title="a reference to a single-file definition"><span class="token sort_Id">resolveExtendScope</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_69_20" id="s_73_37" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#entity_name_69_23" id="entity_name_73_40" title="a reference to a single-file definition"><span class="token sort_Id">entity_name</span></a></span><span class="operator">),</span> <span class="cons_Var"><a href="#s_extend_entity_69_50" id="s_extend_entity_73_54" title="a reference to a single-file definition"><span class="token sort_Id">s_extend_entity</span></a></span><span class="operator">),</span>
    <a href="#declEntityBody_109_3" id="declEntityBody_74_5" title="a reference to a single-file definition"><span class="token sort_Id">declEntityBody</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_extend_entity_69_50" id="s_extend_entity_74_20" title="a reference to a single-file definition"><span class="token sort_Id">s_extend_entity</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#entity_name_69_23" id="entity_name_74_37" title="a reference to a single-file definition"><span class="token sort_Id">entity_name</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#bodydecs_69_36" id="bodydecs_74_50" title="a reference to a single-file definition"><span class="token sort_Id">bodydecs</span></a></span><span class="operator">).</span>

  <button class="modal-open" id="noCircularInheritance_76_3" title="a definition with multiple references" data-urls="#noCircularInheritance line 26_5, 77_3; ../webdsl-native.stx/#noCircularInheritance line 44_5; ../types/built-ins.stx/#noCircularInheritance line 28_5"><span class="token sort_Id">noCircularInheritance</span></button> <span class="operator">:</span> <span class="cons_ScopeSort"><span class="keyword">scope</span></span>
  <a href="#noCircularInheritance_76_3" id="noCircularInheritance_77_3" title="a reference to a single-file definition"><span class="token sort_Id">noCircularInheritance</span></a><span class="operator">(</span><span class="cons_Var"><button class="modal-open" id="s_ent_77_25" title="a definition with multiple references" data-urls="#s_ent line 78_46, 80_17"><span class="token sort_Id">s_ent</span></button></span><span class="operator">)</span> <span class="operator">:-</span> <span class="operator">{</span><span class="cons_Var"><button class="modal-open" id="res_77_36" title="a definition with multiple references" data-urls="#res line 80_27, 81_5"><span class="token sort_Id">res</span></button></span><span class="operator">}</span>
    <span class="keyword">query</span> <span class="operator">()</span> <span class="keyword">filter</span> <span class="cons_Label"><a href="../webdsl.stx/#INHERIT_48_7" id="INHERIT_78_21" title="a reference to a single-file definition"><span class="token sort_Id">INHERIT</span></a></span><span class="operator">+</span> <span class="keyword">and</span> <span class="operator">{</span> <span class="cons_Var"><a href="#s_78_41" id="s_78_36" title="a definition with a single reference"><span class="token sort_Id">s</span></a></span> <span class="operator">:-</span> <span class="cons_Var"><a href="#s_78_36" id="s_78_41" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span> <span class="operator">==</span> <span class="cons_Var"><a href="#s_ent_77_25" id="s_ent_78_46" title="a reference to a single-file definition"><span class="token sort_Id">s_ent</span></a></span> <span class="operator">}</span>
             <span class="keyword">min</span> <span class="operator">$</span> <span class="operator">&lt;</span> <span class="cons_Label"><a href="../webdsl.stx/#INHERIT_48_7" id="INHERIT_79_22" title="a reference to a single-file definition"><span class="token sort_Id">INHERIT</span></a></span>
             <span class="keyword">in</span> <span class="cons_Var"><a href="#s_ent_77_25" id="s_ent_80_17" title="a reference to a single-file definition"><span class="token sort_Id">s_ent</span></a></span> <span class="operator">|-&gt;</span> <span class="cons_Var"><a href="#res_77_36" id="res_80_27" title="a reference to a single-file definition"><span class="token sort_Id">res</span></a></span><span class="operator">,</span>
    <span class="cons_Var"><a href="#res_77_36" id="res_81_5" title="a reference to a single-file definition"><span class="token sort_Id">res</span></a></span> <span class="operator">==</span> <span class="operator">[].</span>

  <button class="modal-open" id="declThisVar_83_3" title="a definition with multiple references" data-urls="#declThisVar line 53_5, 84_3"><span class="token sort_Id">declThisVar</span></button> <span class="operator">:</span> <span class="cons_ScopeSort"><span class="keyword">scope</span></span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="../webdsl.stx/#TYPE_29_5" id="TYPE_83_25" title="a reference to a single-file definition"><span class="token sort_Id">TYPE</span></a></span>
  <a href="#declThisVar_83_3" id="declThisVar_84_3" title="a reference to a single-file definition"><span class="token sort_Id">declThisVar</span></a><span class="operator">(</span><span class="cons_Var"><button class="modal-open" id="s_ent_84_15" title="a definition with multiple references" data-urls="#s_ent line 85_16, 86_23"><span class="token sort_Id">s_ent</span></button></span><span class="operator">,</span> <span class="cons_Var"><a href="#t_85_31" id="t_84_22" title="a definition with a single reference"><span class="token sort_Id">t</span></a></span><span class="operator">)</span> <span class="operator">:-</span>
    <a href="../webdsl.stx/#declareVar_301_3" id="declareVar_85_5" title="a reference to a single-file definition"><span class="token sort_Id">declareVar</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_ent_84_15" id="s_ent_85_16" title="a reference to a single-file definition"><span class="token sort_Id">s_ent</span></a></span><span class="operator">,</span> <span class="cons_Str"><span class="operator">"</span>this<span class="operator">"</span></span><span class="operator">,</span> <span class="cons_Var"><a href="#t_84_22" id="t_85_31" title="a reference to a single-file definition"><span class="token sort_Id">t</span></a></span><span class="operator">),</span>
    <a href="../entities/annotations.stx/#declareAnnotation_36_3" id="declareAnnotation_86_5" title="a reference to a single-file definition"><span class="token sort_Id">declareAnnotation</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_ent_84_15" id="s_ent_86_23" title="a reference to a single-file definition"><span class="token sort_Id">s_ent</span></a></span><span class="operator">,</span> <span class="cons_Str"><span class="operator">"</span>this<span class="operator">"</span></span><span class="operator">,</span> <span class="cons_Op"><a href="../entities/annotations.stx/#DERIVED_22_5" id="DERIVED_86_38" title="a reference to a single-file definition"><span class="token sort_Id">DERIVED</span></a><span class="operator">()</span></span><span class="operator">).</span> <span class="layout">// prevent mutability of this var</span>

  <button class="modal-open" id="declSuperVar_88_3" title="a definition with multiple references" data-urls="#declSuperVar line 29_5, 89_3"><span class="token sort_Id">declSuperVar</span></button> <span class="operator">:</span> <span class="cons_ScopeSort"><span class="keyword">scope</span></span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="../webdsl.stx/#TYPE_29_5" id="TYPE_88_26" title="a reference to a single-file definition"><span class="token sort_Id">TYPE</span></a></span>
  <a href="#declSuperVar_88_3" id="declSuperVar_89_3" title="a reference to a single-file definition"><span class="token sort_Id">declSuperVar</span></a><span class="operator">(</span><span class="cons_Var"><button class="modal-open" id="s_ent_89_16" title="a definition with multiple references" data-urls="#s_ent line 90_16, 91_23"><span class="token sort_Id">s_ent</span></button></span><span class="operator">,</span> <span class="cons_Var"><a href="#t_90_32" id="t_89_23" title="a definition with a single reference"><span class="token sort_Id">t</span></a></span><span class="operator">)</span> <span class="operator">:-</span>
    <a href="../webdsl.stx/#declareVar_301_3" id="declareVar_90_5" title="a reference to a single-file definition"><span class="token sort_Id">declareVar</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_ent_89_16" id="s_ent_90_16" title="a reference to a single-file definition"><span class="token sort_Id">s_ent</span></a></span><span class="operator">,</span> <span class="cons_Str"><span class="operator">"</span>super<span class="operator">"</span></span><span class="operator">,</span> <span class="cons_Var"><a href="#t_89_23" id="t_90_32" title="a reference to a single-file definition"><span class="token sort_Id">t</span></a></span><span class="operator">),</span>
    <a href="../entities/annotations.stx/#declareAnnotation_36_3" id="declareAnnotation_91_5" title="a reference to a single-file definition"><span class="token sort_Id">declareAnnotation</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_ent_89_16" id="s_ent_91_23" title="a reference to a single-file definition"><span class="token sort_Id">s_ent</span></a></span><span class="operator">,</span> <span class="cons_Str"><span class="operator">"</span>super<span class="operator">"</span></span><span class="operator">,</span> <span class="cons_Op"><a href="../entities/annotations.stx/#DERIVED_22_5" id="DERIVED_91_39" title="a reference to a single-file definition"><span class="token sort_Id">DERIVED</span></a><span class="operator">()</span></span><span class="operator">).</span> <span class="layout">// prevent mutability of super var</span>

  <a href="../webdsl.stx/#defOk_356_3" id="defOk_93_3" title="a reference to a single-file definition"><span class="token sort_Id">defOk</span></a><span class="operator">(</span><span class="cons_Var"><button class="modal-open" id="s_93_9" title="a definition with multiple references" data-urls="#s line 94_12, 95_64, 96_41, 98_17, 99_23"><span class="token sort_Id">s</span></button></span><span class="operator">,</span> <span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-Core-sig.stx/#Enum_75_5" id="Enum_93_12" title="a reference to a single-file definition"><span class="token sort_Id">Enum</span></a><span class="operator">(</span><span class="cons_Var"><button class="modal-open" id="e_93_17" title="a definition with multiple references" data-urls="#e line 97_17, 98_20"><span class="token sort_Id">e</span></button></span><span class="operator">,</span> <span class="cons_Var"><a href="#values_99_26" id="values_93_20" title="a definition with a single reference"><span class="token sort_Id">values</span></a></span><span class="operator">)</span></span><span class="operator">)</span> <span class="operator">:-</span> <span class="operator">{</span> <span class="cons_Var"><button class="modal-open" id="s_entity_93_34" title="a definition with multiple references" data-urls="#s_entity line 95_9, 95_19, 95_48, 96_16, 97_20"><span class="token sort_Id">s_entity</span></button></span> <span class="cons_Var"><button class="modal-open" id="s_super_93_43" title="a definition with multiple references" data-urls="#s_super line 94_28, 95_39"><span class="token sort_Id">s_super</span></button></span> <span class="cons_Var"><button class="modal-open" id="t_93_51" title="a definition with multiple references" data-urls="#t line 97_5, 98_23, 99_34"><span class="token sort_Id">t</span></button></span> <span class="operator">}</span>
    <a href="../types/built-ins.stx/#entity_81_3" id="entity_94_5" title="a reference to a single-file definition"><span class="token sort_Id">entity</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_93_9" id="s_94_12" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">)</span> <span class="operator">==</span> <span class="cons_Op"><a href="../webdsl-types.stx/#ENTITY_20_5" id="ENTITY_94_18" title="a reference to a single-file definition"><span class="token sort_Id">ENTITY</span></a><span class="operator">(_,</span> <span class="cons_Var"><a href="#s_super_93_43" id="s_super_94_28" title="a reference to a single-file definition"><span class="token sort_Id">s_super</span></a></span><span class="operator">)</span></span><span class="operator">,</span>
    <span class="keyword">new</span> <span class="cons_Var"><a href="#s_entity_93_34" id="s_entity_95_9" title="a reference to a single-file definition"><span class="token sort_Id">s_entity</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#s_entity_93_34" id="s_entity_95_19" title="a reference to a single-file definition"><span class="token sort_Id">s_entity</span></a></span> <span class="operator">-</span><span class="cons_Label"><a href="../webdsl.stx/#INHERIT_48_7" id="INHERIT_95_29" title="a reference to a single-file definition"><span class="token sort_Id">INHERIT</span></a></span><span class="operator">-&gt;</span> <span class="cons_Var"><a href="#s_super_93_43" id="s_super_95_39" title="a reference to a single-file definition"><span class="token sort_Id">s_super</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#s_entity_93_34" id="s_entity_95_48" title="a reference to a single-file definition"><span class="token sort_Id">s_entity</span></a></span> <span class="operator">-</span><span class="cons_Label"><a href="../webdsl.stx/#DEF_49_7" id="DEF_95_58" title="a reference to a single-file definition"><span class="token sort_Id">DEF</span></a></span><span class="operator">-&gt;</span> <span class="cons_Var"><a href="#s_93_9" id="s_95_64" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">,</span>
    <a href="../webdsl.stx/#declareVar_301_3" id="declareVar_96_5" title="a reference to a single-file definition"><span class="token sort_Id">declareVar</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_entity_93_34" id="s_entity_96_16" title="a reference to a single-file definition"><span class="token sort_Id">s_entity</span></a></span><span class="operator">,</span> <span class="cons_Str"><span class="operator">"</span>name<span class="operator">"</span></span><span class="operator">,</span> <a href="../types/built-ins.stx/#string_48_3" id="string_96_34" title="a reference to a single-file definition"><span class="keyword">string</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_93_9" id="s_96_41" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">)),</span>
    <span class="cons_Var"><a href="#t_93_51" id="t_97_5" title="a reference to a single-file definition"><span class="token sort_Id">t</span></a></span> <span class="operator">==</span> <span class="cons_Op"><a href="../webdsl-types.stx/#ENTITY_20_5" id="ENTITY_97_10" title="a reference to a single-file definition"><span class="token sort_Id">ENTITY</span></a><span class="operator">(</span><span class="cons_Var"><a href="#e_93_17" id="e_97_17" title="a reference to a single-file definition"><span class="token sort_Id">e</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#s_entity_93_34" id="s_entity_97_20" title="a reference to a single-file definition"><span class="token sort_Id">s_entity</span></a></span><span class="operator">)</span></span><span class="operator">,</span>
    <a href="../webdsl.stx/#declareType_100_3" id="declareType_98_5" title="a reference to a single-file definition"><span class="token sort_Id">declareType</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_93_9" id="s_98_17" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#e_93_17" id="e_98_20" title="a reference to a single-file definition"><span class="token sort_Id">e</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#t_93_51" id="t_98_23" title="a reference to a single-file definition"><span class="token sort_Id">t</span></a></span><span class="operator">),</span>
    <a href="#declareEnumValues_101_3" id="declareEnumValues_99_5" title="a reference to a single-file definition"><span class="token sort_Id">declareEnumValues</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_93_9" id="s_99_23" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#values_93_20" id="values_99_26" title="a reference to a single-file definition"><span class="token sort_Id">values</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#t_93_51" id="t_99_34" title="a reference to a single-file definition"><span class="token sort_Id">t</span></a></span><span class="operator">).</span>

  <a href="#declareEnumValues_99_5" id="declareEnumValues_101_3" title="a definition with a single reference"><span class="token sort_Id">declareEnumValues</span></a> <span class="keyword">maps</span> <a href="#declareEnumValue_102_3" id="declareEnumValue_101_26" title="a reference to a single-file definition"><span class="token sort_Id">declareEnumValue</span></a><span class="operator">(*,</span> <span class="keyword">list</span><span class="operator">(*),</span> <span class="operator">*)</span>
  <button class="modal-open" id="declareEnumValue_102_3" title="a definition with multiple references" data-urls="#declareEnumValue line 101_26, 103_3"><span class="token sort_Id">declareEnumValue</span></button> <span class="operator">:</span> <span class="cons_ScopeSort"><span class="keyword">scope</span></span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="../../../src-gen/statix/signatures/WebDSL-Core-sig.stx/#EnumValue_21_5" id="EnumValue_102_30" title="a reference to a single-file definition"><span class="token sort_Id">EnumValue</span></a></span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="../webdsl.stx/#TYPE_29_5" id="TYPE_102_42" title="a reference to a single-file definition"><span class="token sort_Id">TYPE</span></a></span>
  <a href="#declareEnumValue_102_3" id="declareEnumValue_103_3" title="a reference to a single-file definition"><span class="token sort_Id">declareEnumValue</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_103_57" id="s_103_20" title="a definition with a single reference"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-Core-sig.stx/#EnumValue_76_5" id="EnumValue_103_23" title="a reference to a single-file definition"><span class="token sort_Id">EnumValue</span></a><span class="operator">(</span><span class="cons_Var"><a href="#v_103_60" id="v_103_33" title="a definition with a single reference"><span class="token sort_Id">v</span></a></span><span class="operator">,</span> <span class="operator">_)</span></span><span class="operator">,</span> <span class="cons_Var"><a href="#t_103_63" id="t_103_40" title="a definition with a single reference"><span class="token sort_Id">t</span></a></span><span class="operator">)</span> <span class="operator">:-</span> <a href="../webdsl.stx/#declareVar_301_3" id="declareVar_103_46" title="a reference to a single-file definition"><span class="token sort_Id">declareVar</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_103_20" id="s_103_57" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#v_103_33" id="v_103_60" title="a reference to a single-file definition"><span class="token sort_Id">v</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#t_103_40" id="t_103_63" title="a reference to a single-file definition"><span class="token sort_Id">t</span></a></span><span class="operator">).</span>

<span class="keyword">rules</span> <span class="layout">// entity body declaration</span>

  <button class="modal-open" id="declEntityBodyDeclaration_107_3" title="a definition with multiple references" data-urls="#declEntityBodyDeclaration line 108_3, 109_23, 112_3, 113_3, 114_3, 119_3, 129_3, 173_3; ../webdsl-ac.stx/#declEntityBodyDeclaration line 186_3"><span class="token sort_Id">declEntityBodyDeclaration</span></button> <span class="operator">:</span> <span class="cons_ScopeSort"><span class="keyword">scope</span></span> <span class="operator">*</span> <span class="cons_StringSort"><span class="keyword">string</span></span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="../../../src-gen/statix/signatures/WebDSL-DataModel-sig.stx/#EntityBodyDeclaration_11_5" id="EntityBodyDeclaration_107_48" title="a reference to a single-file definition"><span class="token sort_Id">EntityBodyDeclaration</span></a></span>
  <a href="#declEntityBodyDeclaration_107_3" id="declEntityBodyDeclaration_108_3" title="a reference to a single-file definition"><span class="token sort_Id">declEntityBodyDeclaration</span></a><span class="operator">(_,</span> <span class="operator">_,</span> <span class="operator">_)</span> <span class="operator">:-</span> <span class="keyword">try</span> <span class="operator">{</span> <span class="keyword">false</span> <span class="operator">}</span> <span class="operator">|</span> <span class="token sort_Id">warning</span> <span class="operator">$[</span><span class="cons_Text">This entity body declaration is not yet implemented</span><span class="operator">].</span>
  <button class="modal-open" id="declEntityBody_109_3" title="a definition with multiple references" data-urls="#declEntityBody line 54_5, 74_5"><span class="token sort_Id">declEntityBody</span></button> <span class="keyword">maps</span> <a href="#declEntityBodyDeclaration_107_3" id="declEntityBodyDeclaration_109_23" title="a reference to a single-file definition"><span class="token sort_Id">declEntityBodyDeclaration</span></a><span class="operator">(*,</span> <span class="operator">*,</span> <span class="keyword">list</span><span class="operator">(*))</span>

  <span class="layout">// entity function</span>
  <a href="#declEntityBodyDeclaration_107_3" id="declEntityBodyDeclaration_112_3" title="a reference to a single-file definition"><span class="token sort_Id">declEntityBodyDeclaration</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_112_74" id="s_112_29" title="a definition with a single reference"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="operator">_,</span> <span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-Action-sig.stx/#EntityFunction_73_5" id="EntityFunction_112_35" title="a reference to a single-file definition"><span class="token sort_Id">EntityFunction</span></a><span class="operator">(</span><span class="cons_Var"><a href="#f_112_77" id="f_112_50" title="a definition with a single reference"><span class="token sort_Id">f</span></a></span><span class="operator">)</span></span><span class="operator">)</span> <span class="operator">:-</span> <a href="../actions/functions.stx/#entityFunctionOk_104_3" id="entityFunctionOk_112_57" title="a reference to a single-file definition"><span class="token sort_Id">entityFunctionOk</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_112_29" id="s_112_74" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#f_112_50" id="f_112_77" title="a reference to a single-file definition"><span class="token sort_Id">f</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../webdsl.stx/#FALSE_35_5" id="FALSE_112_80" title="a reference to a single-file definition"><span class="token sort_Id">FALSE</span></a><span class="operator">()</span></span><span class="operator">).</span>
  <a href="#declEntityBodyDeclaration_107_3" id="declEntityBodyDeclaration_113_3" title="a reference to a single-file definition"><span class="token sort_Id">declEntityBodyDeclaration</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_113_80" id="s_113_29" title="a definition with a single reference"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="operator">_,</span> <span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-Action-sig.stx/#StaticEntityFunction_76_5" id="StaticEntityFunction_113_35" title="a reference to a single-file definition"><span class="token sort_Id">StaticEntityFunction</span></a><span class="operator">(</span><span class="cons_Var"><a href="#f_113_83" id="f_113_56" title="a definition with a single reference"><span class="token sort_Id">f</span></a></span><span class="operator">)</span></span><span class="operator">)</span> <span class="operator">:-</span> <a href="../actions/functions.stx/#entityFunctionOk_104_3" id="entityFunctionOk_113_63" title="a reference to a single-file definition"><span class="token sort_Id">entityFunctionOk</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_113_29" id="s_113_80" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#f_113_56" id="f_113_83" title="a reference to a single-file definition"><span class="token sort_Id">f</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../webdsl.stx/#TRUE_34_5" id="TRUE_113_86" title="a reference to a single-file definition"><span class="token sort_Id">TRUE</span></a><span class="operator">()</span></span><span class="operator">).</span>
  <a href="#declEntityBodyDeclaration_107_3" id="declEntityBodyDeclaration_114_3" title="a reference to a single-file definition"><span class="token sort_Id">declEntityBodyDeclaration</span></a><span class="operator">(</span><span class="cons_Var"><button class="modal-open" id="s_114_29" title="a definition with multiple references" data-urls="#s line 115_17, 116_22"><span class="token sort_Id">s</span></button></span><span class="operator">,</span> <span class="operator">_,</span> <span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-Action-sig.stx/#CachedFunction_74_5" id="CachedFunction_114_35" title="a reference to a single-file definition"><span class="token sort_Id">CachedFunction</span></a><span class="operator">(</span><span class="cons_Var"><button class="modal-open" id="f_114_50" title="a definition with multiple references" data-urls="#f line 115_20, 116_25"><span class="token sort_Id">f</span></button></span><span class="operator">)</span></span><span class="operator">)</span> <span class="operator">:-</span>
    <a href="../actions/functions.stx/#canBeCached_122_3" id="canBeCached_115_5" title="a reference to a single-file definition"><span class="token sort_Id">canBeCached</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_114_29" id="s_115_17" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#f_114_50" id="f_115_20" title="a reference to a single-file definition"><span class="token sort_Id">f</span></a></span><span class="operator">),</span>
    <a href="../actions/functions.stx/#entityFunctionOk_104_3" id="entityFunctionOk_116_5" title="a reference to a single-file definition"><span class="token sort_Id">entityFunctionOk</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_114_29" id="s_116_22" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#f_114_50" id="f_116_25" title="a reference to a single-file definition"><span class="token sort_Id">f</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../webdsl.stx/#FALSE_35_5" id="FALSE_116_28" title="a reference to a single-file definition"><span class="token sort_Id">FALSE</span></a><span class="operator">()</span></span><span class="operator">).</span>

  <span class="layout">// entity property</span>
  <a href="#declEntityBodyDeclaration_107_3" id="declEntityBodyDeclaration_119_3" title="a reference to a single-file definition"><span class="token sort_Id">declEntityBodyDeclaration</span></a><span class="operator">(</span><span class="cons_Var"><button class="modal-open" id="s_119_29" title="a definition with multiple references" data-urls="#s line 120_28, 125_18, 126_19"><span class="token sort_Id">s</span></button></span><span class="operator">,</span> <span class="cons_Var"><a href="#ent_125_21" id="ent_119_32" title="a definition with a single reference"><span class="token sort_Id">ent</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-DataModel-sig.stx/#Property_43_5" id="Property_119_37" title="a reference to a single-file definition"><span class="token sort_Id">Property</span></a><span class="operator">(</span><span class="cons_Var"><button class="modal-open" id="x_119_46" title="a definition with multiple references" data-urls="#x line 125_26, 126_22"><span class="token sort_Id">x</span></button></span><span class="operator">,</span> <span class="cons_Var"><a href="#propkind_124_28" id="propkind_119_49" title="a definition with a single reference"><span class="token sort_Id">propkind</span></a></span><span class="operator">,</span> <span class="cons_Var"><button class="modal-open" id="sort_119_59" title="a definition with multiple references" data-urls="#sort line 120_31, 121_69, 121_77, 122_80, 123_89, 124_38"><span class="token sort_Id">sort</span></button></span><span class="operator">,</span> <span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-DataModel-sig.stx/#PropAnnos_46_5" id="PropAnnos_119_65" title="a reference to a single-file definition"><span class="token sort_Id">PropAnnos</span></a><span class="operator">(</span><span class="cons_Var"><a href="#annos_126_35" id="annos_119_75" title="a definition with a single reference"><span class="token sort_Id">annos</span></a></span><span class="operator">)</span></span><span class="operator">)</span></span><span class="operator">)</span> <span class="operator">:-</span> <span class="operator">{</span><span class="cons_Var"><button class="modal-open" id="sortType_119_88" title="a definition with multiple references" data-urls="#sortType line 120_5, 121_17, 122_17, 123_17, 124_44, 125_29, 126_25"><span class="token sort_Id">sortType</span></button></span><span class="operator">}</span>
    <span class="cons_Var"><a href="#sortType_119_88" id="sortType_120_5" title="a reference to a single-file definition"><span class="token sort_Id">sortType</span></a></span> <span class="operator">==</span> <a href="../webdsl-types.stx/#typeOfSort_160_3" id="typeOfSort_120_17" title="a reference to a single-file definition"><span class="token sort_Id">typeOfSort</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_119_29" id="s_120_28" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#sort_119_59" id="sort_120_31" title="a reference to a single-file definition"><span class="token sort_Id">sort</span></a></span><span class="operator">),</span>
    <a href="../webdsl-types.stx/#inequalType_286_3" id="inequalType_121_5" title="a reference to a single-file definition"><span class="token sort_Id">inequalType</span></a><span class="operator">(</span><span class="cons_Var"><a href="#sortType_119_88" id="sortType_121_17" title="a reference to a single-file definition"><span class="token sort_Id">sortType</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../webdsl-types.stx/#UNTYPED_49_5" id="UNTYPED_121_27" title="a reference to a single-file definition"><span class="token sort_Id">UNTYPED</span></a><span class="operator">()</span></span><span class="operator">)</span> <span class="operator">|</span> <span class="keyword">error</span> <span class="operator">$[</span><span class="cons_Text">Cannot resolve type </span><span class="operator">[</span><span class="cons_Var"><a href="#sort_119_59" id="sort_121_69" title="a reference to a single-file definition"><span class="token sort_Id">sort</span></a></span><span class="operator">]]</span> <span class="operator">@</span><span class="cons_Var"><a href="#sort_119_59" id="sort_121_77" title="a reference to a single-file definition"><span class="token sort_Id">sort</span></a></span><span class="operator">,</span>
    <a href="../webdsl-types.stx/#inequalType_286_3" id="inequalType_122_5" title="a reference to a single-file definition"><span class="token sort_Id">inequalType</span></a><span class="operator">(</span><span class="cons_Var"><a href="#sortType_119_88" id="sortType_122_17" title="a reference to a single-file definition"><span class="token sort_Id">sortType</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../webdsl-types.stx/#VOID_46_5" id="VOID_122_27" title="a reference to a single-file definition"><span class="token sort_Id">VOID</span></a><span class="operator">()</span></span><span class="operator">)</span> <span class="operator">|</span> <span class="keyword">error</span> <span class="operator">$[</span><span class="cons_Text">Property type 'Void' not allowed</span><span class="operator">]</span> <span class="operator">@</span><span class="cons_Var"><a href="#sort_119_59" id="sort_122_80" title="a reference to a single-file definition"><span class="token sort_Id">sort</span></a></span><span class="operator">,</span>
    <a href="../webdsl-types.stx/#inequalType_286_3" id="inequalType_123_5" title="a reference to a single-file definition"><span class="token sort_Id">inequalType</span></a><span class="operator">(</span><span class="cons_Var"><a href="#sortType_119_88" id="sortType_123_17" title="a reference to a single-file definition"><span class="token sort_Id">sortType</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../webdsl-types.stx/#REF_37_5" id="REF_123_27" title="a reference to a single-file definition"><span class="token sort_Id">REF</span></a><span class="operator">(_)</span></span><span class="operator">)</span> <span class="operator">|</span> <span class="keyword">error</span> <span class="operator">$[</span><span class="cons_Text">Reference type is not allowed in property</span><span class="operator">]</span> <span class="operator">@</span><span class="cons_Var"><a href="#sort_119_59" id="sort_123_89" title="a reference to a single-file definition"><span class="token sort_Id">sort</span></a></span><span class="operator">,</span>
    <a href="#isValidTypeForPropKind_150_3" id="isValidTypeForPropKind_124_5" title="a reference to a single-file definition"><span class="token sort_Id">isValidTypeForPropKind</span></a><span class="operator">(</span><span class="cons_Var"><a href="#propkind_119_49" id="propkind_124_28" title="a reference to a single-file definition"><span class="token sort_Id">propkind</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#sort_119_59" id="sort_124_38" title="a reference to a single-file definition"><span class="token sort_Id">sort</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#sortType_119_88" id="sortType_124_44" title="a reference to a single-file definition"><span class="token sort_Id">sortType</span></a></span><span class="operator">),</span>
    <a href="#declProperty_139_3" id="declProperty_125_5" title="a reference to a single-file definition"><span class="token sort_Id">declProperty</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_119_29" id="s_125_18" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#ent_119_32" id="ent_125_21" title="a reference to a single-file definition"><span class="token sort_Id">ent</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#x_119_46" id="x_125_26" title="a reference to a single-file definition"><span class="token sort_Id">x</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#sortType_119_88" id="sortType_125_29" title="a reference to a single-file definition"><span class="token sort_Id">sortType</span></a></span><span class="operator">),</span>
    <a href="../entities/annotations.stx/#annotationsOk_75_3" id="annotationsOk_126_5" title="a reference to a single-file definition"><span class="token sort_Id">annotationsOk</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_119_29" id="s_126_19" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#x_119_46" id="x_126_22" title="a reference to a single-file definition"><span class="token sort_Id">x</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#sortType_119_88" id="sortType_126_25" title="a reference to a single-file definition"><span class="token sort_Id">sortType</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#annos_119_75" id="annos_126_35" title="a reference to a single-file definition"><span class="token sort_Id">annos</span></a></span><span class="operator">).</span>

  <span class="layout">// derived entity property</span>
  <a href="#declEntityBodyDeclaration_107_3" id="declEntityBodyDeclaration_129_3" title="a reference to a single-file definition"><span class="token sort_Id">declEntityBodyDeclaration</span></a><span class="operator">(</span><span class="cons_Var"><button class="modal-open" id="s_129_29" title="a definition with multiple references" data-urls="#s line 130_28, 132_26, 134_18, 135_23, 136_19"><span class="token sort_Id">s</span></button></span><span class="operator">,</span> <span class="cons_Var"><a href="#ent_134_21" id="ent_129_32" title="a definition with a single reference"><span class="token sort_Id">ent</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-DataModel-sig.stx/#DerivedProperty_44_5" id="DerivedProperty_129_37" title="a reference to a single-file definition"><span class="token sort_Id">DerivedProperty</span></a><span class="operator">(</span><span class="cons_Var"><button class="modal-open" id="x_129_53" title="a definition with multiple references" data-urls="#x line 133_89, 134_26, 135_26, 136_22"><span class="token sort_Id">x</span></button></span><span class="operator">,</span> <span class="cons_Var"><span id="propkind_129_56" title="a definition with no references"><span class="token sort_Id">propkind</span></span></span><span class="operator">,</span> <span class="cons_Var"><a href="#sort_130_31" id="sort_129_66" title="a definition with a single reference"><span class="token sort_Id">sort</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-DataModel-sig.stx/#PropAnnos_46_5" id="PropAnnos_129_72" title="a reference to a single-file definition"><span class="token sort_Id">PropAnnos</span></a><span class="operator">(</span><span class="cons_Var"><a href="#annos_136_35" id="annos_129_82" title="a definition with a single reference"><span class="token sort_Id">annos</span></a></span><span class="operator">)</span></span><span class="operator">,</span> <span class="cons_Var"><button class="modal-open" id="exp_129_90" title="a definition with multiple references" data-urls="#exp line 132_29, 133_128"><span class="token sort_Id">exp</span></button></span><span class="operator">)</span></span><span class="operator">)</span> <span class="operator">:-</span> <span class="operator">{</span> <span class="cons_Var"><button class="modal-open" id="sortType_129_101" title="a definition with multiple references" data-urls="#sortType line 130_5, 131_30, 133_29, 134_29, 136_25"><span class="token sort_Id">sortType</span></button></span> <span class="cons_Var"><button class="modal-open" id="sortTypeString_129_110" title="a definition with multiple references" data-urls="#sortTypeString line 131_5, 133_110"><span class="token sort_Id">sortTypeString</span></button></span> <span class="cons_Var"><button class="modal-open" id="expType_129_125" title="a definition with multiple references" data-urls="#expType line 132_5, 133_20"><span class="token sort_Id">expType</span></button></span> <span class="operator">}</span>
    <span class="cons_Var"><a href="#sortType_129_101" id="sortType_130_5" title="a reference to a single-file definition"><span class="token sort_Id">sortType</span></a></span> <span class="operator">==</span> <a href="../webdsl-types.stx/#typeOfSort_160_3" id="typeOfSort_130_17" title="a reference to a single-file definition"><span class="token sort_Id">typeOfSort</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_129_29" id="s_130_28" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#sort_129_66" id="sort_130_31" title="a reference to a single-file definition"><span class="token sort_Id">sort</span></a></span><span class="operator">),</span>
    <span class="cons_Var"><a href="#sortTypeString_129_110" id="sortTypeString_131_5" title="a reference to a single-file definition"><span class="token sort_Id">sortTypeString</span></a></span> <span class="operator">==</span> <a href="../webdsl-types.stx/#ppType_298_3" id="ppType_131_23" title="a reference to a single-file definition"><span class="token sort_Id">ppType</span></a><span class="operator">(</span><span class="cons_Var"><a href="#sortType_129_101" id="sortType_131_30" title="a reference to a single-file definition"><span class="token sort_Id">sortType</span></a></span><span class="operator">),</span>
    <span class="cons_Var"><a href="#expType_129_125" id="expType_132_5" title="a reference to a single-file definition"><span class="token sort_Id">expType</span></a></span> <span class="operator">==</span> <a href="../webdsl.stx/#typeOfExp_388_3" id="typeOfExp_132_16" title="a reference to a single-file definition"><span class="token sort_Id">typeOfExp</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_129_29" id="s_132_26" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#exp_129_90" id="exp_132_29" title="a reference to a single-file definition"><span class="token sort_Id">exp</span></a></span><span class="operator">),</span>
    <a href="../webdsl.stx/#typeCompatible_408_3" id="typeCompatible_133_5" title="a reference to a single-file definition"><span class="token sort_Id">typeCompatible</span></a><span class="operator">(</span><span class="cons_Var"><a href="#expType_129_125" id="expType_133_20" title="a reference to a single-file definition"><span class="token sort_Id">expType</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#sortType_129_101" id="sortType_133_29" title="a reference to a single-file definition"><span class="token sort_Id">sortType</span></a></span><span class="operator">)</span> <span class="operator">|</span> <span class="keyword">error</span> <span class="operator">$[</span><span class="cons_Text">The expression of the derived property </span><span class="operator">[</span><span class="cons_Var"><a href="#x_129_53" id="x_133_89" title="a reference to a single-file definition"><span class="token sort_Id">x</span></a></span><span class="operator">]</span><span class="cons_Text"> should have type </span><span class="operator">[</span><span class="cons_Var"><a href="#sortTypeString_129_110" id="sortTypeString_133_110" title="a reference to a single-file definition"><span class="token sort_Id">sortTypeString</span></a></span><span class="operator">]]</span> <span class="operator">@</span><span class="cons_Var"><a href="#exp_129_90" id="exp_133_128" title="a reference to a single-file definition"><span class="token sort_Id">exp</span></a></span><span class="operator">,</span>
    <a href="#declProperty_139_3" id="declProperty_134_5" title="a reference to a single-file definition"><span class="token sort_Id">declProperty</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_129_29" id="s_134_18" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#ent_129_32" id="ent_134_21" title="a reference to a single-file definition"><span class="token sort_Id">ent</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#x_129_53" id="x_134_26" title="a reference to a single-file definition"><span class="token sort_Id">x</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#sortType_129_101" id="sortType_134_29" title="a reference to a single-file definition"><span class="token sort_Id">sortType</span></a></span><span class="operator">),</span>
    <a href="../entities/annotations.stx/#declareAnnotation_36_3" id="declareAnnotation_135_5" title="a reference to a single-file definition"><span class="token sort_Id">declareAnnotation</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_129_29" id="s_135_23" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#x_129_53" id="x_135_26" title="a reference to a single-file definition"><span class="token sort_Id">x</span></a></span><span class="operator">,</span> <span class="cons_Op"><a href="../entities/annotations.stx/#DERIVED_22_5" id="DERIVED_135_29" title="a reference to a single-file definition"><span class="token sort_Id">DERIVED</span></a><span class="operator">()</span></span><span class="operator">),</span>
    <a href="../entities/annotations.stx/#annotationsOk_75_3" id="annotationsOk_136_5" title="a reference to a single-file definition"><span class="token sort_Id">annotationsOk</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_129_29" id="s_136_19" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#x_129_53" id="x_136_22" title="a reference to a single-file definition"><span class="token sort_Id">x</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#sortType_129_101" id="sortType_136_25" title="a reference to a single-file definition"><span class="token sort_Id">sortType</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#annos_129_82" id="annos_136_35" title="a reference to a single-file definition"><span class="token sort_Id">annos</span></a></span><span class="operator">).</span>

  <span id="declProperties_138_3" title="a definition with no references"><span class="token sort_Id">declProperties</span></span> <span class="keyword">maps</span> <a href="#declProperty_139_3" id="declProperty_138_23" title="a reference to a single-file definition"><span class="token sort_Id">declProperty</span></a><span class="operator">(*,</span> <span class="operator">*,</span> <span class="keyword">list</span><span class="operator">(*),</span> <span class="keyword">list</span><span class="operator">(*))</span>
  <button class="modal-open" id="declProperty_139_3" title="a definition with multiple references" data-urls="#declProperty line 125_5, 134_5, 138_23, 140_3; ../webdsl-ac.stx/#declProperty line 82_5, 83_5"><span class="token sort_Id">declProperty</span></button> <span class="operator">:</span> <span class="cons_ScopeSort"><span class="keyword">scope</span></span> <span class="operator">*</span> <span class="cons_StringSort"><span class="keyword">string</span></span> <span class="operator">*</span> <span class="cons_StringSort"><span class="keyword">string</span></span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="../webdsl.stx/#TYPE_29_5" id="TYPE_139_44" title="a reference to a single-file definition"><span class="token sort_Id">TYPE</span></a></span>
  <a href="#declProperty_139_3" id="declProperty_140_3" title="a reference to a single-file definition"><span class="token sort_Id">declProperty</span></a><span class="operator">(</span><span class="cons_Var"><button class="modal-open" id="s_140_16" title="a definition with multiple references" data-urls="#s line 142_16, 143_26, 144_31"><span class="token sort_Id">s</span></button></span><span class="operator">,</span> <span class="cons_Var"><a href="#ent_143_73" id="ent_140_19" title="a definition with a single reference"><span class="token sort_Id">ent</span></a></span><span class="operator">,</span> <span class="cons_Var"><button class="modal-open" id="x_140_24" title="a definition with multiple references" data-urls="#x line 141_23, 142_19, 143_29, 143_59, 143_106, 144_34, 144_89, 144_94"><span class="token sort_Id">x</span></button></span><span class="operator">,</span> <span class="cons_Var"><a href="#sortType_142_22" id="sortType_140_27" title="a definition with a single reference"><span class="token sort_Id">sortType</span></a></span><span class="operator">)</span> <span class="operator">:-</span>
    <a href="#validPropertyName_146_3" id="validPropertyName_141_5" title="a reference to a single-file definition"><span class="token sort_Id">validPropertyName</span></a><span class="operator">(</span><span class="cons_Var"><a href="#x_140_24" id="x_141_23" title="a reference to a single-file definition"><span class="token sort_Id">x</span></a></span><span class="operator">),</span>
    <a href="../webdsl.stx/#declareVar_301_3" id="declareVar_142_5" title="a reference to a single-file definition"><span class="token sort_Id">declareVar</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_140_16" id="s_142_16" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#x_140_24" id="x_142_19" title="a reference to a single-file definition"><span class="token sort_Id">x</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#sortType_140_27" id="sortType_142_22" title="a reference to a single-file definition"><span class="token sort_Id">sortType</span></a></span><span class="operator">),</span>
    <a href="../webdsl.stx/#resolveLocalProperty_320_3" id="resolveLocalProperty_143_5" title="a reference to a single-file definition"><span class="token sort_Id">resolveLocalProperty</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_140_16" id="s_143_26" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#x_140_24" id="x_143_29" title="a reference to a single-file definition"><span class="token sort_Id">x</span></a></span><span class="operator">)</span> <span class="operator">==</span> <span class="operator">[_]</span> <span class="operator">|</span> <span class="keyword">error</span> <span class="operator">$[</span><span class="cons_Text">Property </span><span class="operator">[</span><span class="cons_Var"><a href="#x_140_24" id="x_143_59" title="a reference to a single-file definition"><span class="token sort_Id">x</span></a></span><span class="operator">]</span><span class="cons_Text"> of entity </span><span class="operator">[</span><span class="cons_Var"><a href="#ent_140_19" id="ent_143_73" title="a reference to a single-file definition"><span class="token sort_Id">ent</span></a></span><span class="operator">]</span><span class="cons_Text"> is defined multiple times</span><span class="operator">]</span> <span class="operator">@</span><span class="cons_Var"><a href="#x_140_24" id="x_143_106" title="a reference to a single-file definition"><span class="token sort_Id">x</span></a></span><span class="operator">,</span>
    <a href="../webdsl-actions.stx/#noDuplicateVarDefsInSuper_92_3" id="noDuplicateVarDefsInSuper_144_5" title="a reference to a single-file definition"><span class="token sort_Id">noDuplicateVarDefsInSuper</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_140_16" id="s_144_31" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#x_140_24" id="x_144_34" title="a reference to a single-file definition"><span class="token sort_Id">x</span></a></span><span class="operator">)</span> <span class="operator">|</span> <span class="keyword">error</span> <span class="operator">$[</span><span class="cons_Text">Cannot override existing entity property </span><span class="operator">[</span><span class="cons_Var"><a href="#x_140_24" id="x_144_89" title="a reference to a single-file definition"><span class="token sort_Id">x</span></a></span><span class="operator">]]</span> <span class="operator">@</span><span class="cons_Var"><a href="#x_140_24" id="x_144_94" title="a reference to a single-file definition"><span class="token sort_Id">x</span></a></span><span class="operator">.</span>

  <button class="modal-open" id="validPropertyName_146_3" title="a definition with multiple references" data-urls="#validPropertyName line 141_5, 147_3"><span class="token sort_Id">validPropertyName</span></button> <span class="operator">:</span> <span class="cons_StringSort"><span class="keyword">string</span></span>
  <a href="#validPropertyName_146_3" id="validPropertyName_147_3" title="a reference to a single-file definition"><span class="token sort_Id">validPropertyName</span></a><span class="operator">(</span><span class="cons_Var"><button class="modal-open" id="x_147_21" title="a definition with multiple references" data-urls="#x line 148_5, 148_67, 148_72"><span class="token sort_Id">x</span></button></span><span class="operator">)</span> <span class="operator">:-</span>
    <span class="cons_Var"><a href="#x_147_21" id="x_148_5" title="a reference to a single-file definition"><span class="token sort_Id">x</span></a></span> <span class="operator">!=</span> <span class="cons_Str"><span class="operator">"</span>class<span class="operator">"</span></span> <span class="operator">|</span> <span class="keyword">error</span> <span class="operator">$[</span><span class="cons_Text">Cannot use the reserved property name </span><span class="operator">[</span><span class="cons_Var"><a href="#x_147_21" id="x_148_67" title="a reference to a single-file definition"><span class="token sort_Id">x</span></a></span><span class="operator">]]</span> <span class="operator">@</span><span class="cons_Var"><a href="#x_147_21" id="x_148_72" title="a reference to a single-file definition"><span class="token sort_Id">x</span></a></span><span class="operator">.</span>

  <button class="modal-open" id="isValidTypeForPropKind_150_3" title="a definition with multiple references" data-urls="#isValidTypeForPropKind line 124_5, 151_3, 154_3, 155_3, 156_3, 157_3, 160_3, 161_3, 162_3, 163_3, 166_3, 167_3, 168_3, 169_3"><span class="token sort_Id">isValidTypeForPropKind</span></button> <span class="operator">:</span> <span class="cons_SimpleSort"><a href="../../../src-gen/statix/signatures/WebDSL-DataModel-sig.stx/#PropKind_13_5" id="PropKind_150_28" title="a reference to a single-file definition"><span class="token sort_Id">PropKind</span></a></span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="../../../src-gen/statix/signatures/WebDSL-Core-sig.stx/#Sort_17_5" id="Sort_150_39" title="a reference to a single-file definition"><span class="token sort_Id">Sort</span></a></span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="../webdsl.stx/#TYPE_29_5" id="TYPE_150_46" title="a reference to a single-file definition"><span class="token sort_Id">TYPE</span></a></span>
  <a href="#isValidTypeForPropKind_150_3" id="isValidTypeForPropKind_151_3" title="a reference to a single-file definition"><span class="token sort_Id">isValidTypeForPropKind</span></a><span class="operator">(</span><span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-DataModel-sig.stx/#Simple_48_5" id="Simple_151_26" title="a reference to a single-file definition"><span class="token sort_Id">Simple</span></a><span class="operator">()</span></span><span class="operator">,</span> <span class="cons_Var"><a href="#sort_152_62" id="sort_151_36" title="a definition with a single reference"><span class="token sort_Id">sort</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#sortType_152_19" id="sortType_151_42" title="a definition with a single reference"><span class="token sort_Id">sortType</span></a></span><span class="operator">)</span> <span class="operator">:-</span>
    <a href="../webdsl-types.stx/#isBuiltInType_198_3" id="isBuiltInType_152_5" title="a reference to a single-file definition"><span class="token sort_Id">isBuiltInType</span></a><span class="operator">(</span><span class="cons_Var"><a href="#sortType_151_42" id="sortType_152_19" title="a reference to a single-file definition"><span class="token sort_Id">sortType</span></a></span><span class="operator">)</span> <span class="operator">|</span> <span class="keyword">error</span> <span class="operator">$[</span><span class="cons_Text">Expected simple type</span><span class="operator">]</span> <span class="operator">@</span><span class="cons_Var"><a href="#sort_151_36" id="sort_152_62" title="a reference to a single-file definition"><span class="token sort_Id">sort</span></a></span><span class="operator">.</span>

  <a href="#isValidTypeForPropKind_150_3" id="isValidTypeForPropKind_154_3" title="a reference to a single-file definition"><span class="token sort_Id">isValidTypeForPropKind</span></a><span class="operator">(</span><span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-DataModel-sig.stx/#Ref_49_5" id="Ref_154_26" title="a reference to a single-file definition"><span class="token sort_Id">Ref</span></a><span class="operator">()</span></span><span class="operator">,</span> <span class="operator">_,</span> <span class="cons_Op"><a href="../webdsl-types.stx/#ENTITY_20_5" id="ENTITY_154_36" title="a reference to a single-file definition"><span class="token sort_Id">ENTITY</span></a><span class="operator">(_,</span> <span class="operator">_)</span></span><span class="operator">).</span>
  <a href="#isValidTypeForPropKind_150_3" id="isValidTypeForPropKind_155_3" title="a reference to a single-file definition"><span class="token sort_Id">isValidTypeForPropKind</span></a><span class="operator">(</span><span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-DataModel-sig.stx/#Ref_49_5" id="Ref_155_26" title="a reference to a single-file definition"><span class="token sort_Id">Ref</span></a><span class="operator">()</span></span><span class="operator">,</span> <span class="operator">_,</span> <span class="cons_Op"><a href="../webdsl-types.stx/#LIST_35_5" id="LIST_155_36" title="a reference to a single-file definition"><span class="token sort_Id">LIST</span></a><span class="operator">(</span><span class="cons_Op"><a href="../webdsl-types.stx/#ENTITY_20_5" id="ENTITY_155_41" title="a reference to a single-file definition"><span class="token sort_Id">ENTITY</span></a><span class="operator">(_,</span> <span class="operator">_)</span></span><span class="operator">)</span></span><span class="operator">).</span>
  <a href="#isValidTypeForPropKind_150_3" id="isValidTypeForPropKind_156_3" title="a reference to a single-file definition"><span class="token sort_Id">isValidTypeForPropKind</span></a><span class="operator">(</span><span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-DataModel-sig.stx/#Ref_49_5" id="Ref_156_26" title="a reference to a single-file definition"><span class="token sort_Id">Ref</span></a><span class="operator">()</span></span><span class="operator">,</span> <span class="operator">_,</span> <span class="cons_Op"><a href="../webdsl-types.stx/#SET_36_5" id="SET_156_36" title="a reference to a single-file definition"><span class="token sort_Id">SET</span></a><span class="operator">(</span><span class="cons_Op"><a href="../webdsl-types.stx/#ENTITY_20_5" id="ENTITY_156_40" title="a reference to a single-file definition"><span class="token sort_Id">ENTITY</span></a><span class="operator">(_,</span> <span class="operator">_)</span></span><span class="operator">)</span></span><span class="operator">).</span>
  <a href="#isValidTypeForPropKind_150_3" id="isValidTypeForPropKind_157_3" title="a reference to a single-file definition"><span class="token sort_Id">isValidTypeForPropKind</span></a><span class="operator">(</span><span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-DataModel-sig.stx/#Ref_49_5" id="Ref_157_26" title="a reference to a single-file definition"><span class="token sort_Id">Ref</span></a><span class="operator">()</span></span><span class="operator">,</span> <span class="cons_Var"><a href="#sort_158_66" id="sort_157_33" title="a definition with a single reference"><span class="token sort_Id">sort</span></a></span><span class="operator">,</span> <span class="operator">_)</span> <span class="operator">:-</span>
    <span class="keyword">false</span> <span class="operator">|</span> <span class="keyword">error</span> <span class="operator">$[</span><span class="cons_Text">Expected: Reference type or Composite type</span><span class="operator">]</span> <span class="operator">@</span><span class="cons_Var"><a href="#sort_157_33" id="sort_158_66" title="a reference to a single-file definition"><span class="token sort_Id">sort</span></a></span><span class="operator">.</span> <span class="layout">// correct error message for tests</span>

  <a href="#isValidTypeForPropKind_150_3" id="isValidTypeForPropKind_160_3" title="a reference to a single-file definition"><span class="token sort_Id">isValidTypeForPropKind</span></a><span class="operator">(</span><span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-DataModel-sig.stx/#Comp_50_5" id="Comp_160_26" title="a reference to a single-file definition"><span class="token sort_Id">Comp</span></a><span class="operator">()</span></span><span class="operator">,</span> <span class="operator">_,</span> <span class="cons_Op"><a href="../webdsl-types.stx/#ENTITY_20_5" id="ENTITY_160_37" title="a reference to a single-file definition"><span class="token sort_Id">ENTITY</span></a><span class="operator">(_,</span> <span class="operator">_)</span></span><span class="operator">).</span>
  <a href="#isValidTypeForPropKind_150_3" id="isValidTypeForPropKind_161_3" title="a reference to a single-file definition"><span class="token sort_Id">isValidTypeForPropKind</span></a><span class="operator">(</span><span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-DataModel-sig.stx/#Comp_50_5" id="Comp_161_26" title="a reference to a single-file definition"><span class="token sort_Id">Comp</span></a><span class="operator">()</span></span><span class="operator">,</span> <span class="operator">_,</span> <span class="cons_Op"><a href="../webdsl-types.stx/#LIST_35_5" id="LIST_161_37" title="a reference to a single-file definition"><span class="token sort_Id">LIST</span></a><span class="operator">(</span><span class="cons_Op"><a href="../webdsl-types.stx/#ENTITY_20_5" id="ENTITY_161_42" title="a reference to a single-file definition"><span class="token sort_Id">ENTITY</span></a><span class="operator">(_,</span> <span class="operator">_)</span></span><span class="operator">)</span></span><span class="operator">).</span>
  <a href="#isValidTypeForPropKind_150_3" id="isValidTypeForPropKind_162_3" title="a reference to a single-file definition"><span class="token sort_Id">isValidTypeForPropKind</span></a><span class="operator">(</span><span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-DataModel-sig.stx/#Comp_50_5" id="Comp_162_26" title="a reference to a single-file definition"><span class="token sort_Id">Comp</span></a><span class="operator">()</span></span><span class="operator">,</span> <span class="operator">_,</span> <span class="cons_Op"><a href="../webdsl-types.stx/#SET_36_5" id="SET_162_37" title="a reference to a single-file definition"><span class="token sort_Id">SET</span></a><span class="operator">(</span><span class="cons_Op"><a href="../webdsl-types.stx/#ENTITY_20_5" id="ENTITY_162_41" title="a reference to a single-file definition"><span class="token sort_Id">ENTITY</span></a><span class="operator">(_,</span> <span class="operator">_)</span></span><span class="operator">)</span></span><span class="operator">).</span>
  <a href="#isValidTypeForPropKind_150_3" id="isValidTypeForPropKind_163_3" title="a reference to a single-file definition"><span class="token sort_Id">isValidTypeForPropKind</span></a><span class="operator">(</span><span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-DataModel-sig.stx/#Comp_50_5" id="Comp_163_26" title="a reference to a single-file definition"><span class="token sort_Id">Comp</span></a><span class="operator">()</span></span><span class="operator">,</span> <span class="cons_Var"><a href="#sort_164_66" id="sort_163_34" title="a definition with a single reference"><span class="token sort_Id">sort</span></a></span><span class="operator">,</span> <span class="operator">_)</span> <span class="operator">:-</span>
    <span class="keyword">false</span> <span class="operator">|</span> <span class="keyword">error</span> <span class="operator">$[</span><span class="cons_Text">Expected: Reference type or Composite type</span><span class="operator">]</span> <span class="operator">@</span><span class="cons_Var"><a href="#sort_163_34" id="sort_164_66" title="a reference to a single-file definition"><span class="token sort_Id">sort</span></a></span><span class="operator">.</span> <span class="layout">// correct error message for tests</span>

  <a href="#isValidTypeForPropKind_150_3" id="isValidTypeForPropKind_166_3" title="a reference to a single-file definition"><span class="token sort_Id">isValidTypeForPropKind</span></a><span class="operator">(</span><span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-DataModel-sig.stx/#AnyProp_51_5" id="AnyProp_166_26" title="a reference to a single-file definition"><span class="token sort_Id">AnyProp</span></a><span class="operator">()</span></span><span class="operator">,</span> <span class="operator">_,</span> <span class="cons_Op"><a href="../webdsl-types.stx/#ENTITY_20_5" id="ENTITY_166_40" title="a reference to a single-file definition"><span class="token sort_Id">ENTITY</span></a><span class="operator">(_,</span> <span class="operator">_)</span></span><span class="operator">).</span>
  <a href="#isValidTypeForPropKind_150_3" id="isValidTypeForPropKind_167_3" title="a reference to a single-file definition"><span class="token sort_Id">isValidTypeForPropKind</span></a><span class="operator">(</span><span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-DataModel-sig.stx/#AnyProp_51_5" id="AnyProp_167_26" title="a reference to a single-file definition"><span class="token sort_Id">AnyProp</span></a><span class="operator">()</span></span><span class="operator">,</span> <span class="operator">_,</span> <span class="cons_Op"><a href="../webdsl-types.stx/#LIST_35_5" id="LIST_167_40" title="a reference to a single-file definition"><span class="token sort_Id">LIST</span></a><span class="operator">(</span><span class="cons_Op"><a href="../webdsl-types.stx/#ENTITY_20_5" id="ENTITY_167_45" title="a reference to a single-file definition"><span class="token sort_Id">ENTITY</span></a><span class="operator">(_,</span> <span class="operator">_)</span></span><span class="operator">)</span></span><span class="operator">).</span>
  <a href="#isValidTypeForPropKind_150_3" id="isValidTypeForPropKind_168_3" title="a reference to a single-file definition"><span class="token sort_Id">isValidTypeForPropKind</span></a><span class="operator">(</span><span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-DataModel-sig.stx/#AnyProp_51_5" id="AnyProp_168_26" title="a reference to a single-file definition"><span class="token sort_Id">AnyProp</span></a><span class="operator">()</span></span><span class="operator">,</span> <span class="operator">_,</span> <span class="cons_Op"><a href="../webdsl-types.stx/#SET_36_5" id="SET_168_40" title="a reference to a single-file definition"><span class="token sort_Id">SET</span></a><span class="operator">(</span><span class="cons_Op"><a href="../webdsl-types.stx/#ENTITY_20_5" id="ENTITY_168_44" title="a reference to a single-file definition"><span class="token sort_Id">ENTITY</span></a><span class="operator">(_,</span> <span class="operator">_)</span></span><span class="operator">)</span></span><span class="operator">).</span>
  <a href="#isValidTypeForPropKind_150_3" id="isValidTypeForPropKind_169_3" title="a reference to a single-file definition"><span class="token sort_Id">isValidTypeForPropKind</span></a><span class="operator">(</span><span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-DataModel-sig.stx/#AnyProp_51_5" id="AnyProp_169_26" title="a reference to a single-file definition"><span class="token sort_Id">AnyProp</span></a><span class="operator">()</span></span><span class="operator">,</span> <span class="cons_Var"><a href="#sort_170_111" id="sort_169_37" title="a definition with a single reference"><span class="token sort_Id">sort</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#sortType_170_19" id="sortType_169_43" title="a definition with a single reference"><span class="token sort_Id">sortType</span></a></span><span class="operator">)</span> <span class="operator">:-</span>
    <a href="../webdsl-types.stx/#isBuiltInType_198_3" id="isBuiltInType_170_5" title="a reference to a single-file definition"><span class="token sort_Id">isBuiltInType</span></a><span class="operator">(</span><span class="cons_Var"><a href="#sortType_169_43" id="sortType_170_19" title="a reference to a single-file definition"><span class="token sort_Id">sortType</span></a></span><span class="operator">)</span> <span class="operator">|</span> <span class="keyword">error</span> <span class="operator">$[</span><span class="cons_Text">Expected simple type or entity type or a collection of an entity type</span><span class="operator">]</span> <span class="operator">@</span><span class="cons_Var"><a href="#sort_169_37" id="sort_170_111" title="a reference to a single-file definition"><span class="token sort_Id">sort</span></a></span><span class="operator">.</span>

  <span class="layout">// validation</span>
  <a href="#declEntityBodyDeclaration_107_3" id="declEntityBodyDeclaration_173_3" title="a reference to a single-file definition"><span class="token sort_Id">declEntityBodyDeclaration</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_173_90" id="s_173_29" title="a definition with a single reference"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="operator">_,</span> <span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-DataValidation-sig.stx/#ValidateEntity_24_5" id="ValidateEntity_173_35" title="a reference to a single-file definition"><span class="token sort_Id">ValidateEntity</span></a><span class="operator">(</span><span class="cons_Var"><a href="#validateExp_173_93" id="validateExp_173_50" title="a definition with a single reference"><span class="token sort_Id">validateExp</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#messageExp_173_106" id="messageExp_173_63" title="a definition with a single reference"><span class="token sort_Id">messageExp</span></a></span><span class="operator">)</span></span><span class="operator">)</span> <span class="operator">:-</span> <a href="../entities/annotations.stx/#validateOk_194_3" id="validateOk_173_79" title="a reference to a single-file definition"><span class="token sort_Id">validateOk</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_173_29" id="s_173_90" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#validateExp_173_50" id="validateExp_173_93" title="a reference to a single-file definition"><span class="token sort_Id">validateExp</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#messageExp_173_63" id="messageExp_173_106" title="a reference to a single-file definition"><span class="token sort_Id">messageExp</span></a></span><span class="operator">).</span>

<span class="keyword">rules</span> <span class="layout">// entity resolving</span>

  <a href="../webdsl.stx/#typeOfExp_388_3" id="typeOfExp_177_3" title="a reference to a single-file definition"><span class="token sort_Id">typeOfExp</span></a><span class="operator">(</span><span class="cons_Var"><button class="modal-open" id="s_177_13" title="a definition with multiple references" data-urls="#s line 178_17, 180_23"><span class="token sort_Id">s</span></button></span><span class="operator">,</span> <span class="cons_Var"><a href="#exp_181_6" id="exp_177_16" title="a definition with a single reference"><span class="token sort_Id">exp</span></a></span><span class="operator">@</span><span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-Action-sig.stx/#ObjectCreation_124_5" id="ObjectCreation_177_20" title="a reference to a single-file definition"><span class="token sort_Id">ObjectCreation</span></a><span class="operator">(</span><span class="cons_Var"><a href="#x_178_20" id="x_177_35" title="a definition with a single reference"><span class="token sort_Id">x</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#prop_assignments_180_29" id="prop_assignments_177_38" title="a definition with a single reference"><span class="token sort_Id">prop_assignments</span></a></span><span class="operator">)</span></span><span class="operator">)</span> <span class="operator">=</span> <span class="cons_Var"><button class="modal-open" id="e_177_59" title="a definition with multiple references" data-urls="#e line 178_26, 179_5, 180_26, 181_18"><span class="token sort_Id">e</span></button></span> <span class="operator">:-</span>
    <a href="../webdsl-types.stx/#definedType_218_3" id="definedType_178_5" title="a reference to a single-file definition"><span class="token sort_Id">definedType</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_177_13" id="s_178_17" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#x_177_35" id="x_178_20" title="a reference to a single-file definition"><span class="token sort_Id">x</span></a></span><span class="operator">)</span> <span class="operator">==</span> <span class="cons_Var"><a href="#e_177_59" id="e_178_26" title="a reference to a single-file definition"><span class="token sort_Id">e</span></a></span><span class="operator">,</span>
    <span class="cons_Var"><a href="#e_177_59" id="e_179_5" title="a reference to a single-file definition"><span class="token sort_Id">e</span></a></span> <span class="operator">==</span> <span class="cons_Op"><a href="../webdsl-types.stx/#ENTITY_20_5" id="ENTITY_179_10" title="a reference to a single-file definition"><span class="token sort_Id">ENTITY</span></a><span class="operator">(_,</span> <span class="operator">_)</span></span><span class="operator">,</span>
    <a href="#propAssignmentsOk_193_3" id="propAssignmentsOk_180_5" title="a reference to a single-file definition"><span class="token sort_Id">propAssignmentsOk</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_177_13" id="s_180_23" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#e_177_59" id="e_180_26" title="a reference to a single-file definition"><span class="token sort_Id">e</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#prop_assignments_177_38" id="prop_assignments_180_29" title="a reference to a single-file definition"><span class="token sort_Id">prop_assignments</span></a></span><span class="operator">),</span>
    <span class="operator">@</span><span class="cons_Var"><a href="#exp_177_16" id="exp_181_6" title="a reference to a single-file definition"><span class="token sort_Id">exp</span></a></span><span class="operator">.</span><span class="token sort_Id">type</span> <span class="operator">:=</span> <span class="cons_Var"><a href="#e_177_59" id="e_181_18" title="a reference to a single-file definition"><span class="token sort_Id">e</span></a></span><span class="operator">.</span>

  <button class="modal-open" id="typeOfThis_183_3" title="a definition with multiple references" data-urls="#typeOfThis line 184_3, 187_27; ../entities/annotations.stx/#typeOfThis line 114_17, 129_17, 142_17"><span class="token sort_Id">typeOfThis</span></button> <span class="operator">:</span> <span class="cons_ScopeSort"><span class="keyword">scope</span></span> <span class="operator">-&gt;</span> <span class="cons_SimpleSort"><a href="../webdsl.stx/#TYPE_29_5" id="TYPE_183_25" title="a reference to a single-file definition"><span class="token sort_Id">TYPE</span></a></span>
  <a href="#typeOfThis_183_3" id="typeOfThis_184_3" title="a reference to a single-file definition"><span class="token sort_Id">typeOfThis</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_ent_185_16" id="s_ent_184_14" title="a definition with a single reference"><span class="token sort_Id">s_ent</span></a></span><span class="operator">)</span> <span class="operator">=</span> <span class="cons_Var"><a href="#t_185_43" id="t_184_23" title="a definition with a single reference"><span class="token sort_Id">t</span></a></span> <span class="operator">:-</span>
    <a href="../webdsl.stx/#resolveVar_306_3" id="resolveVar_185_5" title="a reference to a single-file definition"><span class="token sort_Id">resolveVar</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_ent_184_14" id="s_ent_185_16" title="a reference to a single-file definition"><span class="token sort_Id">s_ent</span></a></span><span class="operator">,</span> <span class="cons_Str"><span class="operator">"</span>this<span class="operator">"</span></span><span class="operator">)</span> <span class="operator">==</span> <span class="operator">[(_,</span> <span class="operator">(_,</span> <span class="cons_Var"><a href="#t_184_23" id="t_185_43" title="a reference to a single-file definition"><span class="token sort_Id">t</span></a></span><span class="operator">))]</span> <span class="operator">|</span> <span class="keyword">error</span> <span class="operator">$[</span><span class="cons_Text">Variable "this" not defined</span><span class="operator">].</span>

  <a href="../webdsl.stx/#typeOfExp_388_3" id="typeOfExp_187_3" title="a reference to a single-file definition"><span class="token sort_Id">typeOfExp</span></a><span class="operator">(</span><span class="cons_Var"><span id="s_187_13" title="a definition with no references"><span class="token sort_Id">s</span></span></span><span class="operator">,</span> <span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-Action-sig.stx/#This_119_5" id="This_187_16" title="a reference to a single-file definition"><span class="token sort_Id">This</span></a><span class="operator">(_)</span></span><span class="operator">)</span> <span class="operator">=</span> <a href="#typeOfThis_183_3" id="typeOfThis_187_27" title="a reference to a single-file definition"><span class="token sort_Id">typeOfThis</span></a><span class="operator">(</span><span class="cons_Var">s</span><span class="operator">).</span>

  <a href="../webdsl-actions.stx/#typeOfProperty_260_3" id="typeOfProperty_189_3" title="a reference to a single-file definition"><span class="token sort_Id">typeOfProperty</span></a><span class="operator">(_,</span> <span class="operator">_,</span> <span class="cons_Str"><span class="operator">"</span>this<span class="operator">"</span></span><span class="operator">)</span> <span class="operator">=</span> <span class="cons_Op"><a href="../webdsl-types.stx/#UNTYPED_49_5" id="UNTYPED_189_34" title="a reference to a single-file definition"><span class="token sort_Id">UNTYPED</span></a><span class="operator">()</span></span> <span class="operator">:-</span>
    <span class="keyword">false</span> <span class="operator">|</span> <span class="keyword">error</span> <span class="operator">$[</span><span class="cons_Text">This is only accessible from within the entity</span><span class="operator">].</span>

  <span class="layout">// object creation properties</span>
  <a href="#propAssignmentsOk_180_5" id="propAssignmentsOk_193_3" title="a definition with a single reference"><span class="token sort_Id">propAssignmentsOk</span></a> <span class="keyword">maps</span> <a href="#propAssignmentOk_194_3" id="propAssignmentOk_193_26" title="a reference to a single-file definition"><span class="token sort_Id">propAssignmentOk</span></a><span class="operator">(*,</span> <span class="operator">*,</span> <span class="keyword">list</span><span class="operator">(*))</span>
  <button class="modal-open" id="propAssignmentOk_194_3" title="a definition with multiple references" data-urls="#propAssignmentOk line 193_26, 195_3, 196_3"><span class="token sort_Id">propAssignmentOk</span></button> <span class="operator">:</span> <span class="cons_ScopeSort"><span class="keyword">scope</span></span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="../webdsl.stx/#TYPE_29_5" id="TYPE_194_30" title="a reference to a single-file definition"><span class="token sort_Id">TYPE</span></a></span> <span class="operator">*</span> <span class="cons_SimpleSort"><a href="../../../src-gen/statix/signatures/WebDSL-Action-sig.stx/#PropAssignment_26_5" id="PropAssignment_194_37" title="a reference to a single-file definition"><span class="token sort_Id">PropAssignment</span></a></span>
  <a href="#propAssignmentOk_194_3" id="propAssignmentOk_195_3" title="a reference to a single-file definition"><span class="token sort_Id">propAssignmentOk</span></a><span class="operator">(_,</span> <span class="operator">_,</span> <span class="operator">_)</span> <span class="operator">:-</span> <span class="keyword">try</span> <span class="operator">{</span> <span class="keyword">false</span> <span class="operator">}</span> <span class="operator">|</span> <span class="token sort_Id">warning</span> <span class="operator">$[</span><span class="cons_Text">This property assignment is not yet implemented</span><span class="operator">].</span>
  <a href="#propAssignmentOk_194_3" id="propAssignmentOk_196_3" title="a reference to a single-file definition"><span class="token sort_Id">propAssignmentOk</span></a><span class="operator">(</span><span class="cons_Var"><button class="modal-open" id="s_196_20" title="a definition with multiple references" data-urls="#s line 197_20, 199_15"><span class="token sort_Id">s</span></button></span><span class="operator">,</span> <span class="cons_Var"><a href="#ent_197_23" id="ent_196_23" title="a definition with a single reference"><span class="token sort_Id">ent</span></a></span><span class="operator">@</span><span class="cons_Op"><a href="../webdsl-types.stx/#ENTITY_20_5" id="ENTITY_196_27" title="a reference to a single-file definition"><span class="token sort_Id">ENTITY</span></a><span class="operator">(</span><span class="cons_Var"><a href="#e_197_61" id="e_196_34" title="a definition with a single reference"><span class="token sort_Id">e</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#s_ent_198_15" id="s_ent_196_37" title="a definition with a single reference"><span class="token sort_Id">s_ent</span></a></span><span class="operator">)</span></span><span class="operator">,</span> <span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-Action-sig.stx/#PropAssignment_125_5" id="PropAssignment_196_45" title="a reference to a single-file definition"><span class="token sort_Id">PropAssignment</span></a><span class="operator">(</span><span class="cons_Op"><a href="../../../src-gen/statix/signatures/WebDSL-Action-sig.stx/#ObjectPropertyAssignment_127_5" id="ObjectPropertyAssignment_196_60" title="a reference to a single-file definition"><span class="token sort_Id">ObjectPropertyAssignment</span></a><span class="operator">(</span><span class="cons_Var"><button class="modal-open" id="x_196_85" title="a definition with multiple references" data-urls="#x line 197_28, 197_93, 198_22"><span class="token sort_Id">x</span></button></span><span class="operator">,</span> <span class="cons_Var"><a href="#exp_199_18" id="exp_196_88" title="a definition with a single reference"><span class="token sort_Id">exp</span></a></span><span class="operator">)</span></span><span class="operator">)</span></span><span class="operator">)</span> <span class="operator">:-</span> <span class="operator">{</span> <span class="cons_Var"><button class="modal-open" id="propType_196_100" title="a definition with multiple references" data-urls="#propType line 197_34, 200_29, 200_124"><span class="token sort_Id">propType</span></button></span> <span class="cons_Var"><button class="modal-open" id="expType_196_109" title="a definition with multiple references" data-urls="#expType line 199_26, 200_20, 200_69"><span class="token sort_Id">expType</span></button></span> <span class="operator">}</span>
    <a href="../webdsl-actions.stx/#typeOfProperty_260_3" id="typeOfProperty_197_5" title="a reference to a single-file definition"><span class="token sort_Id">typeOfProperty</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_196_20" id="s_197_20" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#ent_196_23" id="ent_197_23" title="a reference to a single-file definition"><span class="token sort_Id">ent</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#x_196_85" id="x_197_28" title="a reference to a single-file definition"><span class="token sort_Id">x</span></a></span><span class="operator">)</span> <span class="operator">==</span> <span class="cons_Var"><a href="#propType_196_100" id="propType_197_34" title="a reference to a single-file definition"><span class="token sort_Id">propType</span></a></span> <span class="operator">|</span> <span class="keyword">error</span> <span class="operator">$[</span><span class="cons_Text">Entity </span><span class="operator">[</span><span class="cons_Var"><a href="#e_196_34" id="e_197_61" title="a reference to a single-file definition"><span class="token sort_Id">e</span></a></span><span class="operator">]</span><span class="cons_Text"> does not contain a property </span><span class="operator">[</span><span class="cons_Var"><a href="#x_196_85" id="x_197_93" title="a reference to a single-file definition"><span class="token sort_Id">x</span></a></span><span class="operator">]],</span>
    <a href="../entities/annotations.stx/#isMutable_226_3" id="isMutable_198_5" title="a reference to a single-file definition"><span class="token sort_Id">isMutable</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_ent_196_37" id="s_ent_198_15" title="a reference to a single-file definition"><span class="token sort_Id">s_ent</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#x_196_85" id="x_198_22" title="a reference to a single-file definition"><span class="token sort_Id">x</span></a></span><span class="operator">)</span> <span class="operator">|</span> <span class="keyword">error</span> <span class="operator">$[</span><span class="cons_Text">Assignment to derived property is not allowed.</span><span class="operator">],</span> <span class="layout">// correct error message for tests</span>
    <a href="../webdsl.stx/#typeOfExp_388_3" id="typeOfExp_199_5" title="a reference to a single-file definition"><span class="token sort_Id">typeOfExp</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_196_20" id="s_199_15" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#exp_196_88" id="exp_199_18" title="a reference to a single-file definition"><span class="token sort_Id">exp</span></a></span><span class="operator">)</span> <span class="operator">==</span> <span class="cons_Var"><a href="#expType_196_109" id="expType_199_26" title="a reference to a single-file definition"><span class="token sort_Id">expType</span></a></span><span class="operator">,</span>
    <a href="../webdsl.stx/#typeCompatible_408_3" id="typeCompatible_200_5" title="a reference to a single-file definition"><span class="token sort_Id">typeCompatible</span></a><span class="operator">(</span><span class="cons_Var"><a href="#expType_196_109" id="expType_200_20" title="a reference to a single-file definition"><span class="token sort_Id">expType</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#propType_196_100" id="propType_200_29" title="a reference to a single-file definition"><span class="token sort_Id">propType</span></a></span><span class="operator">)</span> <span class="operator">|</span> <span class="keyword">error</span> <span class="operator">$[</span><span class="cons_Text">Type of expression </span><span class="operator">[</span><span class="cons_Var"><a href="#expType_196_109" id="expType_200_69" title="a reference to a single-file definition"><span class="token sort_Id">expType</span></a></span><span class="operator">]</span><span class="cons_Text"> is incompatible with type of entity property </span><span class="operator">[</span><span class="cons_Var"><a href="#propType_196_100" id="propType_200_124" title="a reference to a single-file definition"><span class="token sort_Id">propType</span></a></span><span class="operator">]].</span>

<span class="keyword">rules</span> <span class="layout">// subtyping</span>

  <a href="../webdsl.stx/#typeCompatibleB_411_3" id="typeCompatibleB_204_3" title="a reference to a single-file definition"><span class="token sort_Id">typeCompatibleB</span></a><span class="operator">(</span><span class="cons_Op"><a href="../webdsl-types.stx/#ENTITY_20_5" id="ENTITY_204_19" title="a reference to a single-file definition"><span class="token sort_Id">ENTITY</span></a><span class="operator">(_,</span> <span class="cons_Var">s_sub</span><span class="operator">)</span></span><span class="operator">,</span> <span class="cons_Op"><a href="../webdsl-types.stx/#ENTITY_20_5" id="ENTITY_204_37" title="a reference to a single-file definition"><span class="token sort_Id">ENTITY</span></a><span class="operator">(_,</span> <span class="cons_Var"><span id="s_super_204_47" title="a definition with no references"><span class="token sort_Id">s_super</span></span></span><span class="operator">)</span></span><span class="operator">)</span> <span class="operator">=</span> <a href="#inherits_206_3" id="inherits_204_59" title="a reference to a single-file definition"><span class="token sort_Id">inherits</span></a><span class="operator">(</span><span class="cons_Var"><span id="s_sub_204_68" title="a definition with no references"><span class="token sort_Id">s_sub</span></span></span><span class="operator">,</span> <span class="cons_Var">s_super</span><span class="operator">).</span>

  <button class="modal-open" id="inherits_206_3" title="a definition with multiple references" data-urls="#inherits line 204_59, 207_3; ../webdsl-native.stx/#inherits line 15_69"><span class="token sort_Id">inherits</span></button> <span class="operator">:</span> <span class="cons_ScopeSort"><span class="keyword">scope</span></span> <span class="operator">*</span> <span class="cons_ScopeSort"><span class="keyword">scope</span></span> <span class="operator">-&gt;</span> <span class="cons_SimpleSort"><a href="../webdsl.stx/#BOOL_30_5" id="BOOL_206_31" title="a reference to a single-file definition"><span class="token sort_Id">BOOL</span></a></span>
  <a href="#inherits_206_3" id="inherits_207_3" title="a reference to a single-file definition"><span class="token sort_Id">inherits</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_sub_211_17" id="s_sub_207_12" title="a definition with a single reference"><span class="token sort_Id">s_sub</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#s_super_209_30" id="s_super_207_19" title="a definition with a single reference"><span class="token sort_Id">s_super</span></a></span><span class="operator">)</span> <span class="operator">=</span> <a href="#nonEmptyPathScopeList_213_3" id="nonEmptyPathScopeList_207_30" title="a reference to a single-file definition"><span class="token sort_Id">nonEmptyPathScopeList</span></a><span class="operator">(</span><span class="cons_Var"><a href="#ps_211_27" id="ps_207_52" title="a definition with a single reference"><span class="token sort_Id">ps</span></a></span><span class="operator">)</span> <span class="operator">:-</span>
    <span class="keyword">query</span> <span class="operator">()</span> <span class="keyword">filter</span> <span class="cons_Closure"><span class="cons_Label"><a href="../webdsl.stx/#INHERIT_48_7" id="INHERIT_208_21" title="a reference to a single-file definition"><span class="token sort_Id">INHERIT</span></a></span><span class="operator">*</span></span>
             <span class="keyword">and</span> <span class="operator">{</span> <span class="cons_Var"><a href="#s_209_25" id="s_209_20" title="a definition with a single reference"><span class="token sort_Id">s</span></a></span> <span class="operator">:-</span> <span class="cons_Var"><a href="#s_209_20" id="s_209_25" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span> <span class="operator">==</span> <span class="cons_Var"><a href="#s_super_207_19" id="s_super_209_30" title="a reference to a single-file definition"><span class="token sort_Id">s_super</span></a></span> <span class="operator">}</span>
             <span class="keyword">min</span> <span class="operator">$</span> <span class="operator">&lt;</span> <span class="cons_Label"><a href="../webdsl.stx/#INHERIT_48_7" id="INHERIT_210_22" title="a reference to a single-file definition"><span class="token sort_Id">INHERIT</span></a></span>
             <span class="keyword">in</span> <span class="cons_Var"><a href="#s_sub_207_12" id="s_sub_211_17" title="a reference to a single-file definition"><span class="token sort_Id">s_sub</span></a></span> <span class="operator">|-&gt;</span> <span class="cons_Var"><a href="#ps_207_52" id="ps_211_27" title="a reference to a single-file definition"><span class="token sort_Id">ps</span></a></span><span class="operator">.</span>

  <button class="modal-open" id="nonEmptyPathScopeList_213_3" title="a definition with multiple references" data-urls="#nonEmptyPathScopeList line 207_30, 214_3, 215_3, 226_29"><span class="token sort_Id">nonEmptyPathScopeList</span></button> <span class="operator">:</span> <span class="keyword">list</span><span class="operator">((</span><span class="cons_PathSort"><span class="keyword">path</span></span> <span class="operator">*</span> <span class="cons_ScopeSort"><span class="keyword">scope</span></span><span class="operator">))</span> <span class="operator">-&gt;</span> <span class="cons_SimpleSort"><a href="../webdsl.stx/#BOOL_30_5" id="BOOL_213_51" title="a reference to a single-file definition"><span class="token sort_Id">BOOL</span></a></span>
  <a href="#nonEmptyPathScopeList_213_3" id="nonEmptyPathScopeList_214_3" title="a reference to a single-file definition"><span class="token sort_Id">nonEmptyPathScopeList</span></a><span class="operator">(_)</span>       <span class="operator">=</span> <span class="cons_Op"><a href="../webdsl.stx/#FALSE_35_5" id="FALSE_214_36" title="a reference to a single-file definition"><span class="token sort_Id">FALSE</span></a><span class="operator">()</span></span><span class="operator">.</span>
  <a href="#nonEmptyPathScopeList_213_3" id="nonEmptyPathScopeList_215_3" title="a reference to a single-file definition"><span class="token sort_Id">nonEmptyPathScopeList</span></a><span class="operator">([(_,_)])</span> <span class="operator">=</span> <span class="cons_Op"><a href="../webdsl.stx/#TRUE_34_5" id="TRUE_215_36" title="a reference to a single-file definition"><span class="token sort_Id">TRUE</span></a><span class="operator">()</span></span><span class="operator">.</span>

  <button class="modal-open" id="inheritEdgesAmount_217_3" title="a definition with multiple references" data-urls="#inheritEdgesAmount line 218_3; ../actions/functions.stx/#inheritEdgesAmount line 231_10"><span class="token sort_Id">inheritEdgesAmount</span></button> <span class="operator">:</span> <span class="cons_ScopeSort"><span class="keyword">scope</span></span> <span class="operator">*</span> <span class="cons_ScopeSort"><span class="keyword">scope</span></span> <span class="operator">-&gt;</span> <span class="cons_IntSort"><span class="token sort_Id">int</span></span>
  <a href="#inheritEdgesAmount_217_3" id="inheritEdgesAmount_218_3" title="a reference to a single-file definition"><span class="token sort_Id">inheritEdgesAmount</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_sub_221_17" id="s_sub_218_22" title="a definition with a single reference"><span class="token sort_Id">s_sub</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#s_super_219_46" id="s_super_218_29" title="a definition with a single reference"><span class="token sort_Id">s_super</span></a></span><span class="operator">)</span> <span class="operator">=</span> <a href="../webdsl.stx/#pathLength_450_3" id="pathLength_218_40" title="a reference to a single-file definition"><span class="token sort_Id">pathLength</span></a><span class="operator">(</span><span class="cons_Var"><a href="#p_221_29" id="p_218_51" title="a definition with a single reference"><span class="token sort_Id">p</span></a></span><span class="operator">)</span> <span class="operator">:-</span>
    <span class="keyword">query</span> <span class="operator">()</span> <span class="keyword">filter</span> <span class="cons_Closure"><span class="cons_Label"><a href="../webdsl.stx/#INHERIT_48_7" id="INHERIT_219_21" title="a reference to a single-file definition"><span class="token sort_Id">INHERIT</span></a></span><span class="operator">*</span></span> <span class="keyword">and</span> <span class="operator">{</span> <span class="cons_Var"><a href="#s_219_41" id="s_219_36" title="a definition with a single reference"><span class="token sort_Id">s</span></a></span> <span class="operator">:-</span> <span class="cons_Var"><a href="#s_219_36" id="s_219_41" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span> <span class="operator">==</span> <span class="cons_Var"><a href="#s_super_218_29" id="s_super_219_46" title="a reference to a single-file definition"><span class="token sort_Id">s_super</span></a></span> <span class="operator">}</span>
             <span class="keyword">min</span> <span class="operator">$</span> <span class="operator">&lt;</span> <span class="cons_Label"><a href="../webdsl.stx/#INHERIT_48_7" id="INHERIT_220_22" title="a reference to a single-file definition"><span class="token sort_Id">INHERIT</span></a></span>
             <span class="keyword">in</span> <span class="cons_Var"><a href="#s_sub_218_22" id="s_sub_221_17" title="a reference to a single-file definition"><span class="token sort_Id">s_sub</span></a></span> <span class="operator">|-&gt;</span> <span class="operator">[(</span><span class="cons_Var"><a href="#p_218_51" id="p_221_29" title="a reference to a single-file definition"><span class="token sort_Id">p</span></a></span><span class="operator">,</span> <span class="operator">_)].</span>

<span class="keyword">rules</span> <span class="layout">// extension</span>

  <a href="#extends_226_3" id="extends_225_3" title="a definition with a single reference"><span class="token sort_Id">extends</span></a> <span class="operator">:</span> <span class="cons_ScopeSort"><span class="keyword">scope</span></span> <span class="operator">*</span> <span class="cons_ScopeSort"><span class="keyword">scope</span></span> <span class="operator">-&gt;</span> <span class="cons_SimpleSort"><a href="../webdsl.stx/#BOOL_30_5" id="BOOL_225_30" title="a reference to a single-file definition"><span class="token sort_Id">BOOL</span></a></span>
  <a href="#extends_225_3" id="extends_226_3" title="a reference to a single-file definition"><span class="token sort_Id">extends</span></a><span class="operator">(</span><span class="cons_Var"><a href="#s_extending_230_17" id="s_extending_226_11" title="a definition with a single reference"><span class="token sort_Id">s_extending</span></a></span><span class="operator">,</span> <span class="cons_Var"><a href="#s_228_32" id="s_226_24" title="a definition with a single reference"><span class="token sort_Id">s</span></a></span><span class="operator">)</span> <span class="operator">=</span> <a href="#nonEmptyPathScopeList_213_3" id="nonEmptyPathScopeList_226_29" title="a reference to a single-file definition"><span class="token sort_Id">nonEmptyPathScopeList</span></a><span class="operator">(</span><span class="cons_Var"><a href="#ps_230_33" id="ps_226_51" title="a definition with a single reference"><span class="token sort_Id">ps</span></a></span><span class="operator">)</span> <span class="operator">:-</span>
    <span class="keyword">query</span> <span class="operator">()</span> <span class="keyword">filter</span> <span class="cons_Label"><a href="../webdsl.stx/#EXTEND_47_7" id="EXTEND_227_21" title="a reference to a single-file definition"><span class="token sort_Id">EXTEND</span></a></span><span class="operator">?</span> <span class="cons_Closure"><span class="operator">(</span><span class="cons_Label"><a href="../webdsl.stx/#INHERIT_48_7" id="INHERIT_227_30" title="a reference to a single-file definition"><span class="token sort_Id">INHERIT</span></a></span> <span class="cons_Label"><a href="../webdsl.stx/#EXTEND_47_7" id="EXTEND_227_38" title="a reference to a single-file definition"><span class="token sort_Id">EXTEND</span></a></span><span class="operator">?)*</span></span>
             <span class="keyword">and</span> <span class="operator">{</span> <span class="cons_Var"><a href="#s'_228_26" id="s'_228_20" title="a definition with a single reference"><span class="token sort_Id">s'</span></a></span> <span class="operator">:-</span> <span class="cons_Var"><a href="#s'_228_20" id="s'_228_26" title="a reference to a single-file definition"><span class="token sort_Id">s'</span></a></span> <span class="operator">==</span> <span class="cons_Var"><a href="#s_226_24" id="s_228_32" title="a reference to a single-file definition"><span class="token sort_Id">s</span></a></span> <span class="operator">}</span>
             <span class="keyword">min</span> <span class="operator">$</span> <span class="operator">&lt;</span> <span class="cons_Label"><a href="../webdsl.stx/#EXTEND_47_7" id="EXTEND_229_22" title="a reference to a single-file definition"><span class="token sort_Id">EXTEND</span></a></span><span class="operator">,</span> <span class="operator">$</span> <span class="operator">&lt;</span> <span class="cons_Label"><a href="../webdsl.stx/#INHERIT_48_7" id="INHERIT_229_34" title="a reference to a single-file definition"><span class="token sort_Id">INHERIT</span></a></span><span class="operator">,</span> <span class="cons_Label"><a href="../webdsl.stx/#EXTEND_47_7" id="EXTEND_229_43" title="a reference to a single-file definition"><span class="token sort_Id">EXTEND</span></a></span> <span class="operator">&lt;</span> <span class="cons_Label"><a href="../webdsl.stx/#INHERIT_48_7" id="INHERIT_229_52" title="a reference to a single-file definition"><span class="token sort_Id">INHERIT</span></a></span>
             <span class="keyword">in</span> <span class="cons_Var"><a href="#s_extending_226_11" id="s_extending_230_17" title="a reference to a single-file definition"><span class="token sort_Id">s_extending</span></a></span> <span class="operator">|-&gt;</span> <span class="cons_Var"><a href="#ps_226_51" id="ps_230_33" title="a reference to a single-file definition"><span class="token sort_Id">ps</span></a></span><span class="operator">.</span>

</code></pre></td></tr></tbody></table></div>

<div id="modal">
  <div id="modal-content">
    <span id="modal-close">&times;</span>
    <h2 id="modal-h2"></h2>
    <p  id="modal-p"></p>
    <ul id="modal-ul"></ul>
  </div>
</div>
